<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WINABET.AI - Dashboard Paris Sportifs</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fustat:wght@400&family=Outfit:wght@300;500;600&display=swap" rel="stylesheet">
  {% render 'dashboard-styles' %}
  <style>
    /* ==================== VARIABLES CSS SPÉCIFIQUES AU DASHBOARD ==================== */
    :root {
      /* Position du badge/logo/badge IA à gauche */
      --desktop-left-offset: -39rem;
      
      /* Position des boutons auth à droite */
      --desktop-right-offset: 10rem;
      
      /* Variables laptop allongé - Dashboard */
      --laptop-left-margin: 10rem;
      --laptop-right-transform: 10rem;
      --laptop-nav-gap: 1.75rem;
      --laptop-scrolled-width: calc(100% - 15rem);
    }
    
    /* ==================== DESKTOP UNIQUEMENT - AJUSTEMENTS FACILES ==================== */
    @media (min-width: 769px) {
      
      /* ===== SANS SCROLL - Positions et tailles initiales ===== */
      
      /* Badge Online - Position gauche/droite + hauteur */
      .desktop-badge-online {
        position: relative;
        left: 0rem;
        top: 0rem;
      }
      
      /* Logo - Taille et position */
      .desktop-logo {
        font-size: 3.6rem !important;
        position: relative;
        left: 0rem;
        top: 0.5rem;
      }
      
      /* Badge IA - Position gauche/droite + hauteur */
      .desktop-badge-ia {
        position: relative;
        left: 0rem;
        top: 0rem;
      }
      
      /* Espacement global entre les éléments */
      .desktop-left {
        gap: 2rem !important;
      }
      
      /* ===== AVEC SCROLL - Rectangle gris ===== */
      /* Déplacé dans des media queries dédiées plus bas pour laptop et grands écrans */
    }
    
    /* ==================== LAPTOP BREAKPOINT (769px - 1440px) ==================== */
    @media (min-width: 769px) and (max-width: 1440px) {
      
      /* Rectangle gris plus large pour laptop */
      .header.scrolled::before {
        width: calc(100% - 2rem) !important;
        height: 90%;
        top: 100%;
      }
      
      /* Badge Online */
      .desktop-badge-online {
        left: 0;
        transform: scale(0.9);
      }
      
      /* Logo */
      .desktop-logo {
        font-size: 2.8rem !important;
        left: 0;
      }
      
      /* Badge MAJ IA */
      .desktop-badge-ia {
        left: 0;
        transform: scale(0.9);
      }
      
      /* Espacement global - Groupe gauche */
      .desktop-left {
        gap: 1rem !important;
        margin-left: 0rem;
      }
      
      /* Espacement global - Groupe droite */
      .desktop-right {
        gap: 1rem;
        transform: translateX(0rem);
      }
      
      /* Nav Links */
      .desktop-nav {
        gap: 1.5rem;
      }
      
      .desktop-nav-item {
        font-size: 1.2rem;
        cursor: pointer !important;
      }
      
      /* Auth Buttons */
      .desktop-auth-link {
        font-size: 1.2rem;
        margin-right: 0.5rem;
      }
      
      .desktop-auth-btn {
        padding: 0.95rem 1.4rem;
        font-size: 1.1rem;
      }
      
      /* Positions indépendantes + drop vertical 2px au scroll */
      .desktop-badge-online,
      .desktop-logo,
      .desktop-badge-ia {
        --left-shift: 0rem;
        --scroll-shift: 0px;
        /* Conserver l'échelle si définie ailleurs */
        transform: scale(0.9) translateX(var(--left-shift)) translateY(var(--scroll-shift));
      }
      
      .desktop-nav {
        --nav-shift: 0rem;
        --scroll-shift: 0px;
        transform: translateX(calc(-50% + var(--nav-shift))) translateY(var(--scroll-shift)) !important;
      }
      
      .header.scrolled .desktop-badge-online,
      .header.scrolled .desktop-logo,
      .header.scrolled .desktop-badge-ia {
        --scroll-shift: 2px;
      }
      
      /* Nav: descendre de 2px, ne pas bouger horizontalement */
    .header.scrolled .desktop-nav {
      --scroll-shift: 0px;
      transform: translateX(calc(-50% + var(--nav-shift))) translateY(var(--scroll-shift)) !important;
    }
    }

    /* Laptop étendu (1441px - 1800px) - Rectangle gris bord à bord + éléments centrés */
    @media (min-width: 1441px) and (max-width: 1800px) {
      .header.scrolled::before {
        width: var(--laptop-scrolled-width) !important;
        height: 90%;
        top: 100%;
      }
      
      /* Groupe gauche - ajuster position (ne pas déplacer le conteneur parent) */
      .desktop-left {
        gap: 1.5rem;
      }
      
      /* Déplacer UNIQUEMENT les éléments de gauche (indépendamment du nav) */
      .desktop-badge-online,
      .desktop-logo,
      .desktop-badge-ia {
        --left-shift: 40rem; /* Ajustez cette valeur pour déplacer logo/badges */
        --scroll-shift: 0px;
        transform: translateX(var(--left-shift)) translateY(var(--scroll-shift));
      }
      
      /* Groupe droite - ajuster position */
      .desktop-right {
        transform: translateX(-2rem);
        gap: 1.5rem;
      }
      
      /* Nav links - position indépendante à droite */
      .desktop-nav {
        gap: 1.5rem;
        margin-right: 2rem;
        --nav-shift: 23rem; /* Ajustez cette valeur pour déplacer vers la droite */
        --scroll-shift: 0px;
        transform: translateX(calc(-50% + var(--nav-shift))) translateY(var(--scroll-shift)) !important;
      }
      
      /* Assurer que le texte reste sur une ligne */
      .desktop-nav-item {
        white-space: nowrap;
        font-size: 1.2rem;
        cursor: pointer !important;
      }
      
      /* Garder les positions identiques au scroll: descendre de 2px seulement */
      .header.scrolled .desktop-badge-online,
      .header.scrolled .desktop-logo,
      .header.scrolled .desktop-badge-ia {
        --scroll-shift: 2px;
      }
      
      /* Nav: remonter un peu pour rester plus haut */
    .header.scrolled .desktop-nav {
      --scroll-shift: -0.2rem;
      --nav-scroll-offset: 1rem;
      transform: translateX(calc(-50% + var(--nav-shift))) translateY(var(--scroll-shift)) !important;
    }
    }

    /* Très grands écrans (>= 1801px) - largeur originale */
    @media (min-width: 1801px) {
      .header.scrolled::before {
        width: calc(75% - 6rem);
        height: 90%;
        top: 100%;
      }
      
      .desktop-nav-item {
        font-size: 1.2rem;
        cursor: pointer !important;
      }
    }
  </style>
</head>
<body>
  {% comment %} Détection de l'état de connexion {% endcomment %}
  {% assign user_is_logged_in = false %}
  {% if customer %}
    {% assign user_is_logged_in = true %}
  {% endif %}

  {% comment %} Détection des customer tags {% endcomment %}
  {% assign has_payment_failed = false %}
  {% assign has_subscription = false %}
  {% assign has_free_trial = false %}

  {% if customer and customer.tags.size > 0 %}
    {% for tag in customer.tags %}
      {% assign tag_lower = tag | downcase %}
      {% if tag_lower contains 'paiement échoué' or tag_lower contains 'paiement echoue' %}
        {% assign has_payment_failed = true %}
      {% elsif tag_lower contains 'abonnement' %}
        {% assign has_subscription = true %}
      {% elsif tag_lower contains 'free trials' or tag_lower contains 'free trial' %}
        {% assign has_free_trial = true %}
      {% endif %}
    {% endfor %}
  {% endif %}

  {% comment %} Déterminer le niveau d'accès {% endcomment %}
  {% assign access_level = 'full' %}
  {% if has_payment_failed %}
    {% assign access_level = 'payment_failed' %}
  {% elsif has_subscription %}
    {% assign access_level = 'full' %}
  {% elsif has_free_trial %}
    {% assign access_level = 'free_trial' %}
  {% endif %}

  {% comment %} CSS conditionnel: cacher sidebar si non connecté ou paiement échoué {% endcomment %}
  {% if access_level == 'payment_failed' or customer == nil %}
  <style>
    .sidebar {
      display: none !important;
    }
    .mobile-toggle {
      display: none !important;
    }
    .main-content {
      margin-left: 0 !important;
    }
    .overlay {
      display: none !important;
    }
  </style>
  {% endif %}

  <!-- SVG Definitions pour icônes réutilisables -->
  <svg style="display: none;">
    <defs>
      <!-- Icône atomique IA -->
      <symbol id="atomicIcon" viewBox="0 0 200 200">
        <defs>
          <filter id="aiIconGlow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
            <feMerge>
              <feMergeNode in="coloredBlur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
          <path id="aiOrbit0" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" pathLength="1000"/>
          <path id="aiOrbit1" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(55 100 100)" pathLength="1000"/>
          <path id="aiOrbit2" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(-55 100 100)" pathLength="1000"/>
        </defs>
        <g stroke="#68859e" stroke-width="1.5" fill="none">
          <use href="#aiOrbit0"/>
          <use href="#aiOrbit1"/>
          <use href="#aiOrbit2"/>
        </g>
        <g stroke-linecap="round" filter="url(#aiIconGlow)">
          <use href="#aiOrbit0" stroke="#ffffff" stroke-width="1.5" fill="none" stroke-dasharray="120 880" style="opacity:0.95;">
            <animate attributeName="stroke-dashoffset" values="0;-1000" dur="6s" repeatCount="indefinite"/>
          </use>
          <use href="#aiOrbit1" stroke="#ffffff" stroke-width="1.5" fill="none" stroke-dasharray="120 880" style="opacity:0.95;">
            <animate attributeName="stroke-dashoffset" values="500;-500" dur="6s" repeatCount="indefinite"/>
          </use>
          <use href="#aiOrbit2" stroke="#ffffff" stroke-width="1.5" fill="none" stroke-dasharray="120 880" style="opacity:0.95;">
            <animate attributeName="stroke-dashoffset" values="750;-250" dur="6s" repeatCount="indefinite"/>
          </use>
        </g>
        <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#ffffff" font-weight="700" font-size="43">IA</text>
      </symbol>
    </defs>
  </svg>

  <header class="header" style="background: transparent; position: fixed; height: 80px; width: 100%;">
    <!-- Mobile Toggle Button -->
    <button class="mobile-toggle" onclick="toggleSidebar()" aria-label="Toggle menu">
      <svg class="mobile-toggle-icon hamburger-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M4 6h16M4 12h16M4 18h16"/>
      </svg>
      <svg class="mobile-toggle-icon close-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M6 18L18 6M6 6l12 12"/>
      </svg>
    </button>
    
    <!-- Mobile: Online Badge -->
    <div id="online-badge-container" class="mobile-only" style="position: absolute; left: 23%; top: 0.15rem; transform: translateX(-50%);">
      <div id="online-badge" style="position: relative; display: flex; align-items: center; gap: 0.25rem; padding: 0.25rem 0.4rem; background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.35); border-radius: 9999px; z-index: 2;">
        <svg style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: calc(100% + 4px); height: calc(100% + 4px); pointer-events: none; z-index: -1;">
          <defs>
            <filter id="onlineGlowHeader" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="2" result="b"/>
              <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
          </defs>
          <rect x="2" y="2" width="calc(100% - 4px)" height="calc(100% - 4px)" rx="10" ry="10" fill="none" stroke="#68859e" stroke-width="1" opacity="0.3"/>
          <rect x="2" y="2" width="calc(100% - 4px)" height="calc(100% - 4px)" rx="10" ry="10" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="30 510" stroke-linecap="round" filter="url(#onlineGlowHeader)" opacity="0.9">
            <animate attributeName="stroke-dashoffset" values="0;-540" dur="8s" repeatCount="indefinite"/>
          </rect>
        </svg>
        <svg width="6" height="6" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
          <circle cx="10" cy="10" r="4" fill="rgba(255, 255, 255, 0.7)"/>
        </svg>
        <span style="color: rgba(255, 255, 255, 0.7); font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 0.75rem; white-space: nowrap;"><span id="header-member-count" class="member-count" style="color: rgba(255, 255, 255, 0.95); font-weight: 300;">{{ section.settings.members_base | default: 50 }}</span> online</span>
      </div>
    </div>
    
    <!-- Mobile: Logo centré -->
    <div class="logo mobile-only" style="font-family: 'Outfit', sans-serif; font-size: 3.5rem; letter-spacing: -0.02em; font-weight: 300; display: inline-flex; align-items: baseline; position: relative; top: 1rem;">
      <span style="color: #ffffff;">wina</span><span style="color: rgba(255, 255, 255, 0.35);">bet</span><span style="color: #ffffff; font-size: 1.4rem; margin-left: -0.15em;">.ai</span>
    </div>
    
    <!-- Mobile: Badge IA -->
    <div id="maj-badge-container" class="mobile-only" style="position: absolute; left: 83%; top: 1.25rem; transform: translateX(-50%);">
      <svg style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 86px; height: 32px; pointer-events: none; z-index: 1;">
        <defs>
          <filter id="badgeGlowHeader" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="2" result="b"/>
            <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>
        </defs>
         <rect x="2" y="2" width="82" height="28" rx="14" ry="14" fill="none" stroke="#68859e" stroke-width="1" opacity="0.3"/>
         <rect x="2" y="2" width="82" height="28" rx="14" ry="14" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="40 500" stroke-linecap="round" filter="url(#badgeGlowHeader)" opacity="0.9">
           <animate attributeName="stroke-dashoffset" values="0;-540" dur="8s" repeatCount="indefinite"/>
         </rect>
      </svg>
      <div style="position: relative; display: flex; align-items: center; gap: 0.3rem; padding: 0.25rem 0.5rem; background: rgba(16, 185, 129, 0.05); border: 1px solid rgba(255, 255, 255, 0.35); border-radius: 9999px; min-width: 80px; z-index: 2;">
        <svg id="atom-header" width="20" height="20" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
          <defs>
            <filter id="softGlowHeader" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="1.2" result="b"/>
              <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <path id="orbit0Header" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" pathLength="1000"/>
            <path id="orbit1Header" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(55 100 100)" pathLength="1000"/>
            <path id="orbit2Header" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(-55 100 100)" pathLength="1000"/>
          </defs>
          <g stroke="#68859e" stroke-width="2" fill="none">
            <use href="#orbit0Header"/>
            <use href="#orbit1Header"/>
            <use href="#orbit2Header"/>
          </g>
          <g stroke-linecap="round" filter="url(#softGlowHeader)">
            <use href="#orbit0Header" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
              <animate attributeName="stroke-dashoffset" values="0;-1000" dur="6s" repeatCount="indefinite" begin="0s"/>
            </use>
            <use href="#orbit1Header" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
              <animate attributeName="stroke-dashoffset" values="500;-500" dur="6s" repeatCount="indefinite" begin="0s"/>
            </use>
            <use href="#orbit2Header" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
              <animate attributeName="stroke-dashoffset" values="750;-250" dur="6s" repeatCount="indefinite" begin="0s"/>
            </use>
          </g>
          <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#ffffff" font-weight="700" font-size="54">IA</text>
        </svg>
          <span style="color: rgba(255, 255, 255, 0.7); font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 0.75rem; white-space: nowrap;">MAJ <span id="header-time" style="color: rgba(255, 255, 255, 0.95); font-weight: 300;">17:34</span></span>
      </div>
    </div>

    <!-- Desktop Menu -->
    <div class="desktop-menu">
      <!-- Left: Logo + Badges + Menu Items -->
      <div class="desktop-left">
        <!-- Online Badge -->
        <div class="desktop-badge-online">
          <div id="desktop-online-badge" style="position: relative; display: flex; align-items: center; gap: 0.64rem; padding: 0.6rem 0.92rem; background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.35); border-radius: 9999px; z-index: 2;">
            <svg style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: calc(100% + 10px); height: calc(100% + 10px); pointer-events: none; z-index: -1;">
              <defs>
                <filter id="onlineGlowDesktopClone" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="2" result="b"/>
                  <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
              </defs>
              <rect x="5" y="5" width="calc(100% - 10px)" height="calc(100% - 10px)" rx="16" ry="16" fill="none" stroke="#68859e" stroke-width="1" opacity="0.3"/>
              <rect x="5" y="5" width="calc(100% - 10px)" height="calc(100% - 10px)" rx="16" ry="16" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="70 1000" stroke-linecap="round" filter="url(#onlineGlowDesktopClone)" opacity="0.9">
                <animate attributeName="stroke-dashoffset" values="0;-540" dur="8s" repeatCount="indefinite"/>
              </rect>
            </svg>
            <svg width="14" height="14" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
              <circle cx="10" cy="10" r="4" fill="rgba(255, 255, 255, 0.7)"/>
            </svg>
            <span style="color: rgba(255, 255, 255, 0.7); font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 1.48rem; white-space: nowrap;"><span id="desktop-member-count" class="member-count" style="color: rgba(255, 255, 255, 0.95); font-weight: 300;">{{ section.settings.members_base | default: 50 }}</span> online</span>
          </div>
        </div>

        <!-- Logo -->
        <div class="desktop-logo" style="font-family: 'Outfit', sans-serif; font-weight: 300;">
          <span style="color: #ffffff;">wina</span><span style="color: rgba(255, 255, 255, 0.35);">bet</span><span style="color: #ffffff; font-size: 1.4rem; margin-left: -0.15em;">.ai</span>
        </div>

        <!-- IA Badge -->
        <div class="desktop-badge-ia">
          <div style="position: relative; display: flex; align-items: center; gap: 0.52rem; padding: 0.44rem 0.72rem; background: rgba(16, 185, 129, 0.05); border: 1px solid rgba(255, 255, 255, 0.35); border-radius: 40px; min-width: 140px; z-index: 2;">
            <svg style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: calc(100% + 10px); height: calc(100% + 10px); pointer-events: none; z-index: -1;">
              <defs>
                <filter id="iaGlowDesktop" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="2" result="b"/>
                  <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
              </defs>
              <rect x="5" y="5" width="calc(100% - 10px)" height="calc(100% - 10px)" rx="20" ry="20" fill="none" stroke="#68859e" stroke-width="1" opacity="0.3"/>
              <rect x="5" y="5" width="calc(100% - 10px)" height="calc(100% - 10px)" rx="20" ry="20" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="70 1000" stroke-linecap="round" filter="url(#iaGlowDesktop)" opacity="0.9">
                <animate attributeName="stroke-dashoffset" values="0;-540" dur="8s" repeatCount="indefinite"/>
              </rect>
            </svg>
            <svg id="atom-desktop" width="29" height="29" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
              <defs>
                <filter id="softGlowDesktopClone" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="1.2" result="b"/>
                  <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
                <path id="orbit0DesktopClone" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" pathLength="1000"/>
                <path id="orbit1DesktopClone" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(55 100 100)" pathLength="1000"/>
                <path id="orbit2DesktopClone" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(-55 100 100)" pathLength="1000"/>
              </defs>
              <g stroke="#68859e" stroke-width="2" fill="none">
                <use href="#orbit0DesktopClone"/>
                <use href="#orbit1DesktopClone"/>
                <use href="#orbit2DesktopClone"/>
              </g>
              <g stroke-linecap="round" filter="url(#softGlowDesktopClone)">
                <use href="#orbit0DesktopClone" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                  <animate attributeName="stroke-dashoffset" values="0;-1000" dur="6s" repeatCount="indefinite" begin="0s"/>
                </use>
                <use href="#orbit1DesktopClone" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                  <animate attributeName="stroke-dashoffset" values="500;-500" dur="6s" repeatCount="indefinite" begin="0s"/>
                </use>
                <use href="#orbit2DesktopClone" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                  <animate attributeName="stroke-dashoffset" values="750;-250" dur="6s" repeatCount="indefinite" begin="0s"/>
                </use>
              </g>
              <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#ffffff" font-weight="700" font-size="43">IA</text>
            </svg>
            <span style="color: rgba(255, 255, 255, 0.7); font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 1.04rem; white-space: nowrap;">MAJ <span id="desktop-time" style="color: rgba(255, 255, 255, 0.95); font-weight: 300;">17:34</span></span>
          </div>
        </div>

        <!-- Menu Items -->
        <nav class="desktop-nav" style="margin-right: 3rem;">
          <a class="desktop-nav-item" data-page="bet" onclick="navigateTo(event, 'bet')">Bet du jour</a>
          <a class="desktop-nav-item" data-page="parlay" onclick="navigateTo(event, 'parlay')">Parlay du jour</a>
          <a class="desktop-nav-item" data-page="historique-bet" onclick="navigateTo(event, 'historique-bet')">Historique bet du jour</a>
          <a class="desktop-nav-item" data-page="historique-parlay" onclick="navigateTo(event, 'historique-parlay')">Historique Parlay du jour</a>
          <a class="desktop-nav-item" data-page="strategy" onclick="navigateTo(event, 'strategy')">Notre stratégie</a>
          <a class="desktop-nav-item" href="https://shopify.com/78184907003/account/pages/5176fb69-acd0-47d9-a29c-3ad5668cf59d">Mon compte</a>
          <a class="desktop-nav-item" href="https://winabet.ai">Boutique</a>
          <a class="desktop-nav-item" data-page="support" onclick="navigateTo(event, 'support')">Support</a>
        </nav>
      </div>
    </div>
  </header>

  <!-- Overlay -->
  <div class="overlay" onclick="toggleSidebar()"></div>

  <!-- Sidebar -->
  <aside class="sidebar">
    <!-- Mobile Toggle X Button (inside sidebar) -->
    <button class="mobile-toggle active" onclick="toggleSidebar()" aria-label="Toggle menu" style="position: absolute; top: 1.25rem; left: 1.5rem; z-index: 100;">
      <svg class="mobile-toggle-icon close-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M6 18L18 6M6 6l12 12"/>
      </svg>
    </button>
    
    <div id="online-badge-container" class="mobile-only" style="position: absolute; left: 23%; top: 0.15rem; transform: translateX(-50%);">
      <div id="online-badge" style="position: relative; display: flex; align-items: center; gap: 0.25rem; padding: 0.25rem 0.4rem; background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.35); border-radius: 9999px; z-index: 2;">
        <svg style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: calc(100% + 4px); height: calc(100% + 4px); pointer-events: none; z-index: -1;">
          <defs>
            <filter id="onlineGlowHeader" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="2" result="b"/>
              <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
          </defs>
          <rect x="2" y="2" width="calc(100% - 4px)" height="calc(100% - 4px)" rx="10" ry="10" fill="none" stroke="#68859e" stroke-width="1" opacity="0.3"/>
          <rect x="2" y="2" width="calc(100% - 4px)" height="calc(100% - 4px)" rx="10" ry="10" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="30 510" stroke-linecap="round" filter="url(#onlineGlowHeader)" opacity="0.9">
            <animate attributeName="stroke-dashoffset" values="0;-540" dur="8s" repeatCount="indefinite"/>
          </rect>
        </svg>
        <svg width="6" height="6" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
          <circle cx="10" cy="10" r="4" fill="rgba(255, 255, 255, 0.7)"/>
        </svg>
        <span style="color: rgba(255, 255, 255, 0.7); font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 0.75rem; white-space: nowrap;"><span id="header-member-count" class="member-count" style="color: rgba(255, 255, 255, 0.95); font-weight: 300;">{{ section.settings.members_base | default: 50 }}</span> online</span>
      </div>
    </div>
    
    <!-- Mobile: Logo centré -->
    <div class="logo mobile-only" style="font-family: 'Outfit', sans-serif; font-size: 3.5rem; letter-spacing: -0.02em; font-weight: 300; display: inline-flex; align-items: baseline; position: absolute; left: 50%; transform: translateX(-50%); top: 1rem;">
      <span style="color: #ffffff;">wina</span><span style="color: rgba(255, 255, 255, 0.35);">bet</span><span style="color: #ffffff; font-size: 1.4rem; margin-left: -0.15em;">.ai</span>
    </div>
    
    <!-- Mobile: Badge IA -->
    <div id="maj-badge-container" class="mobile-only" style="position: absolute; left: 83%; top: 1.25rem; transform: translateX(-50%);">
      <svg style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 86px; height: 32px; pointer-events: none; z-index: 1;">
        <defs>
          <filter id="badgeGlowHeader" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="2" result="b"/>
            <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>
        </defs>
         <rect x="2" y="2" width="82" height="28" rx="14" ry="14" fill="none" stroke="#68859e" stroke-width="1" opacity="0.3"/>
         <rect x="2" y="2" width="82" height="28" rx="14" ry="14" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="40 500" stroke-linecap="round" filter="url(#badgeGlowHeader)" opacity="0.9">
           <animate attributeName="stroke-dashoffset" values="0;-540" dur="8s" repeatCount="indefinite"/>
         </rect>
      </svg>
      <div style="position: relative; display: flex; align-items: center; gap: 0.3rem; padding: 0.25rem 0.5rem; background: rgba(16, 185, 129, 0.05); border: 1px solid rgba(255, 255, 255, 0.35); border-radius: 9999px; min-width: 80px; z-index: 2;">
        <svg id="atom-header" width="20" height="20" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
          <defs>
            <filter id="softGlowHeader" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="1.2" result="b"/>
              <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <path id="orbit0Header" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" pathLength="1000"/>
            <path id="orbit1Header" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(55 100 100)" pathLength="1000"/>
            <path id="orbit2Header" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(-55 100 100)" pathLength="1000"/>
          </defs>
          <g stroke="#68859e" stroke-width="2" fill="none">
            <use href="#orbit0Header"/>
            <use href="#orbit1Header"/>
            <use href="#orbit2Header"/>
          </g>
          <g stroke-linecap="round" filter="url(#softGlowHeader)">
            <use href="#orbit0Header" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
              <animate attributeName="stroke-dashoffset" values="0;-1000" dur="6s" repeatCount="indefinite" begin="0s"/>
            </use>
            <use href="#orbit1Header" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
              <animate attributeName="stroke-dashoffset" values="500;-500" dur="6s" repeatCount="indefinite" begin="0s"/>
            </use>
            <use href="#orbit2Header" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
              <animate attributeName="stroke-dashoffset" values="750;-250" dur="6s" repeatCount="indefinite" begin="0s"/>
            </use>
          </g>
          <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#ffffff" font-weight="700" font-size="54">IA</text>
        </svg>
        <span style="color: rgba(255, 255, 255, 0.7); font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 0.75rem; white-space: nowrap;">MAJ <span id="header-time" style="color: rgba(255, 255, 255, 0.95); font-weight: 300;">17:34</span></span>
      </div>
    </div>
   

    <nav class="sidebar-nav">
      <a class="nav-item active" data-page="bet" onclick="navigateTo(event, 'bet')">
        <div class="nav-item-content">
          <span>Bet du jour</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" data-page="parlay" onclick="navigateTo(event, 'parlay')">
        <div class="nav-item-content">
          <span>Parlay du jour</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" data-page="historique-bet" onclick="navigateTo(event, 'historique-bet')">
        <div class="nav-item-content">
          <span>Historique bet du jour</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" data-page="historique-parlay" onclick="navigateTo(event, 'historique-parlay')">
        <div class="nav-item-content">
          <span>Historique Parlay du jour</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" data-page="strategy" onclick="navigateTo(event, 'strategy')">
        <div class="nav-item-content">
          <span>Notre stratégie</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" href="https://shopify.com/78184907003/account/pages/5176fb69-acd0-47d9-a29c-3ad5668cf59d">
        <div class="nav-item-content">
          <span>Mon compte</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" href="https://winabet.ai">
        <div class="nav-item-content">
          <span>Boutique</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" data-page="support" onclick="navigateTo(event, 'support')">
        <div class="nav-item-content">
          <span>Support</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>
    </nav>

    <div class="sidebar-footer">
      © 2024 WINABET.AI
    </div>
  </aside>

  

  <!-- Main Content -->
  <main class="main-content">
    <!-- PAGE 1: BET DU JOUR -->
    <div id="page-bet" class="page active">
      <div class="container">
        <h1>BET DU JOUR</h1>
        <p class="subtitle">Les bet avec la meilleur probabilité de réussite aujourd'hui. Nous affichons tous les bet avec minimum de 70% de chance de gagner selon notre IA.</p>

        {% assign bet_cards = section.blocks | where: 'type', 'bet_card' %}
        {% if bet_cards.size > 0 %}
          {% assign visible_bets = 0 %}
          <div class="cards-grid">
          {% for block in bet_cards %}
            {% if block.settings.show_card %}
              {% comment %} Limiter à 1 bet si free trial {% endcomment %}
              {% if access_level == 'free_trial' and visible_bets >= 1 %}
                {% comment %} Cacher les bets suivants {% endcomment %}
              {% else %}
                {% assign visible_bets = visible_bets | plus: 1 %}
              <div class="card-wrapper">

              <div class="bet-card" style="{% if block.settings.send_to_history == true %}display:none{% endif %}" 
                   {{ block.shopify_attributes }}
                   data-block-type="bet_card"
                   data-block-id="{{ block.id }}"
                   data-sport-type="{{ block.settings.sport_type | default: 'nhl' }}"
                   data-ai-data-count="{{ block.settings.ai_data_count | default: 2843 }}"
                   data-win-percentage="{{ block.settings.win_percentage | default: 92 }}"
                   data-bet-type="{{ block.settings.bet_type | default: 'moneyline' }}"
                   data-team1-name="{{ block.settings.team1_name }}"
                   data-team1-logo="{{ block.settings.team1_logo | image_url: width: 200 }}"
                   data-team2-name="{{ block.settings.team2_name }}"
                   data-team2-logo="{{ block.settings.team2_logo | image_url: width: 200 }}"
                   data-match-time="{{ block.settings.match_time }}"
                   data-match-date="{{ block.settings.match_date }}"
                   data-multiplier="{{ block.settings.multiplier }}"
                   data-bet-units="{{ block.settings.bet_units }}"
                   data-odds="{{ block.settings.odds }}"
                   data-best-bookmaker="{{ block.settings.best_bookmaker }}"
                   data-best-odds="{{ block.settings.best_odds }}"
                   data-result="{{ block.settings.result | default: 'pending' }}"
                   data-send-to-history="{{ block.settings.send_to_history }}"
                   data-spread-value="{{ block.settings.spread_value }}"
                   data-spread-team="{{ block.settings.spread_team }}"
                   data-over-under-type="{{ block.settings.over_under_type }}"
                   data-over-under-value="{{ block.settings.over_under_value }}"
                   data-over-under-stat-type="{{ block.settings.over_under_stat_type }}"
                   data-over-under-text-custom="{{ block.settings.over_under_text_custom }}"
                   data-moneyline-team="{{ block.settings.moneyline_team | default: 'team2' }}"
              >
                 <!-- AI Analysis Header - Nouveau Layout -->
             <div class="confidence-badge" style="display: flex; align-items: center; justify-content: flex-start; gap: 0.5rem; background: rgba(0, 0, 0, 0.6); margin-top: 0.75rem; margin-bottom: 0.125rem;">
                   <!-- Gauche: Icône IA + Pourcentage -->
                   <div style="display: flex; align-items: center; gap: 1rem;">
                     <!-- Icône IA atomique (50px) -->
                     <div style="position: relative; width: 50px; height: 50px; flex-shrink: 0;">
                       <svg width="50" height="50" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                         <defs>
                           <filter id="softGlowBetHeader{{ forloop.index }}" x="-50%" y="-50%" width="200%" height="200%">
                             <feGaussianBlur stdDeviation="1.2" result="b"/>
                             <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                           </filter>
                           <path id="orbit0BetHeader{{ forloop.index }}" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" pathLength="1000"/>
                           <path id="orbit1BetHeader{{ forloop.index }}" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(55 100 100)" pathLength="1000"/>
                           <path id="orbit2BetHeader{{ forloop.index }}" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(-55 100 100)" pathLength="1000"/>
                         </defs>
                         <g stroke="#68859e" stroke-width="2" fill="none">
                           <use href="#orbit0BetHeader{{ forloop.index }}"/><use href="#orbit1BetHeader{{ forloop.index }}"/><use href="#orbit2BetHeader{{ forloop.index }}"/>
                         </g>
                         <g stroke-linecap="round" filter="url(#softGlowBetHeader{{ forloop.index }})">
                           <use href="#orbit0BetHeader{{ forloop.index }}" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                             <animate attributeName="stroke-dashoffset" values="0;-1000" dur="6s" repeatCount="indefinite" begin="0s"/>
                           </use>
                           <use href="#orbit1BetHeader{{ forloop.index }}" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                             <animate attributeName="stroke-dashoffset" values="500;-500" dur="6s" repeatCount="indefinite" begin="0s"/>
                           </use>
                           <use href="#orbit2BetHeader{{ forloop.index }}" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                             <animate attributeName="stroke-dashoffset" values="750;-250" dur="6s" repeatCount="indefinite" begin="0s"/>
                           </use>
                         </g>
                         <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#ffffff" font-weight="700" font-size="54">IA</text>
                       </svg>
                     </div>
                     
                     <!-- Pourcentage -->
                <span style="font-family: 'outfit', sans-serif; font-weight: 300; font-size: 1.80rem; color: #ffffff; line-height: 1;">{{ block.settings.win_percentage | default: 92 }}%</span>
                   </div>
                   
                   <!-- Centre: Texte confiance ia -->
                   <span style="font-family: 'fustat', sans-serif; font-weight: 400; font-size: 1.25rem; color: rgba(255, 255, 255, 0.7); line-height: 1;  margin-left: 0.5rem;">Confiance ia pour ce bet</span>
                   
                   <!-- Droite: Bouton VOIR ANALYSE IA avec coins arrondis (8px) -->
                      <button 
                      style="padding: 0.5rem 1rem; background: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.7); border: 1px solid rgba(255, 255, 255, 0.15); border-radius: 0.5rem; font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 0.75rem; cursor: pointer; transition: all 0.2s; line-height: 1.2; white-space: nowrap; margin-left: auto;"
                     onclick="openAnalysisDialog(this)"
                     data-win-percentage="{{ block.settings.win_percentage | default: 92 }}"
                     data-ai-data-count="{{ block.settings.ai_data_count | default: 2843 }}"
                     data-sport-type="{{ block.settings.sport_type | default: 'nhl' }}"
                     data-team1="{{ block.settings.team1_name | default: 'ÉQUIPE DOMICILE' }}"
                     data-team2="{{ block.settings.team2_name | default: 'ÉQUIPE EXTÉRIEUR' }}"
                     data-auto-increment="{{ block.settings.auto_increment_enabled }}"
                     data-increment-interval="{{ block.settings.auto_increment_interval | default: 5 }}"
                     data-increment-amount="{{ block.settings.auto_increment_amount | default: 5 }}"
                   >
                     VOIR<br>ANALYSE<br>IA
                   </button>
                 </div>

                <div class="bet-card-content">
                  <button class="multiplier-button">x{{ block.settings.multiplier | default: '1.95' }}</button>
                  <div class="match-info-new">
                    {% assign bet_type = block.settings.bet_type | default: 'moneyline' %}
                    
                    {% if bet_type == 'moneyline' %}
                      <!-- MONEYLINE -->
                      {% assign moneyline_team = block.settings.moneyline_team | default: 'team2' %}
                      <div class="match-info-header">MONEYLINE</div>
                      <div class="match-info-content">
                        <div class="team-side {% if moneyline_team == 'team1' %}selected{% endif %}">
                          {% if block.settings.team1_logo %}
                            <img src="{{ block.settings.team1_logo | image_url: width: 200 }}" alt="{{ block.settings.team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team1_name | default: 'ST. LOUIS' }}</div>
                          {% if moneyline_team == 'team1' %}
                            <div class="team-bet-type">VICTOIRE</div>
                          {% endif %}
                        </div>

                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                        </div>

                        <div class="team-side {% if moneyline_team == 'team2' %}selected{% endif %}">
                          {% if block.settings.team2_logo %}
                            <img src="{{ block.settings.team2_logo | image_url: width: 200 }}" alt="{{ block.settings.team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team2_name | default: 'PITTSBURGH' }}</div>
                          {% if moneyline_team == 'team2' %}
                            <div class="team-bet-type">VICTOIRE</div>
                          {% endif %}
                        </div>
                      </div>
                    
                    {% elsif bet_type == 'spread' %}
                      <!-- SPREAD -->
                      <div class="match-info-header">SPREAD</div>
                      <div class="match-info-content">
                        <div class="team-side {% if block.settings.spread_team == 'team1' %}selected{% endif %}">
                          {% if block.settings.team1_logo %}
                            <img src="{{ block.settings.team1_logo | image_url: width: 200 }}" alt="{{ block.settings.team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team1_name | default: 'ST. LOUIS' }}</div>
                          {% if block.settings.spread_team == 'team1' %}
                            <div class="team-bet-type">{{ block.settings.spread_value | default: '-3.5' }}</div>
                          {% endif %}
                        </div>

                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                        </div>

                        <div class="team-side {% if block.settings.spread_team == 'team2' %}selected{% endif %}">
                          {% if block.settings.team2_logo %}
                            <img src="{{ block.settings.team2_logo | image_url: width: 200 }}" alt="{{ block.settings.team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team2_name | default: 'PITTSBURGH' }}</div>
                          {% if block.settings.spread_team == 'team2' %}
                            <div class="team-bet-type">{{ block.settings.spread_value | default: '-3.5' }}</div>
                          {% endif %}
                        </div>
                      </div>
                    
                     {% elsif bet_type == 'over_under' %}
                      <!-- OVER/UNDER -->
                      {% assign custom_text = block.settings.over_under_text_custom | default: '' %}
                      {% if custom_text != blank %}
                        <div class="match-info-header">{{ custom_text | upcase }}</div>
                      {% else %}
                        <div class="match-info-header">{{ block.settings.over_under_type | default: 'OVER' | upcase }}</div>
                      {% endif %}
                      <div class="match-info-content">
                        <div class="team-side">
                          {% if block.settings.team1_logo %}
                            <img src="{{ block.settings.team1_logo | image_url: width: 200 }}" alt="{{ block.settings.team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team1_name | default: 'ST. LOUIS' }}</div>
                        </div>

                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                          <div class="over-under-display">
                            {% if custom_text != blank %}
                              <div class="over-under-type">{{ custom_text | upcase }}</div>
                            {% else %}
                              <div class="over-under-type">{{ block.settings.over_under_type | default: 'OVER' | upcase }}</div>
                            {% endif %}
                            <div class="over-under-value">{{ block.settings.over_under_value | default: '225.5' }}</div>
                            {% if block.settings.over_under_stat_type != blank %}
                              <div class="over-under-stat">{{ block.settings.over_under_stat_type }}</div>
                            {% endif %}
                          </div>
                        </div>

                        <div class="team-side">
                          {% if block.settings.team2_logo %}
                            <img src="{{ block.settings.team2_logo | image_url: width: 200 }}" alt="{{ block.settings.team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team2_name | default: 'PITTSBURGH' }}</div>
                        </div>
                      </div>
                    {% endif %}
                  </div>

                  <button class="units-button">{{ block.settings.bet_units | default: '1' }} UNITS</button>

                  <div class="gain-section">
                    <div class="bet-modify-horizontal">
                      <div class="bet-info">
                        <span>VOTRE MISE - <span class="bet-amount-value-small">$100</span></span>
                      </div>
                      <button class="modify-btn" onclick="openBetDialog(this)" data-multiplier="{{ block.settings.multiplier | default: '1.95' }}">MODIFIER</button>
                    </div>
                    <div class="cashout-full-width">
                      <div class="cashout-label">CASHOUT</div>
                      <div class="cashout-amount">${{ 100 | times: block.settings.multiplier | default: 1.95 | round: 2 }}</div>
                      <div class="cashout-profit">+${{ 100 | times: block.settings.multiplier | default: 1.95 | minus: 100 | round: 2 }} bénéfice</div>
                    </div>
                  </div>
                </div>
              </div>
              </div> <!-- card-wrapper -->
              {% endif %}
            {% endif %}
          {% endfor %}
          
{% comment %} Message de restriction pour free trial {% endcomment %}
{% if access_level == 'free_trial' and bet_cards.size > 1 %}
  <div class="card text-center" style="padding: 2.5rem; background: rgba(255, 255, 255, 0.03); border: 2px solid rgba(255, 255, 255, 0.1);">
    <div style="font-size: 2.5rem; margin-bottom: 1rem;">🔒</div>
    <h3 style="color: rgba(255, 255, 255, 0.95); font-size: 1.6rem; margin-bottom: 0.8rem; font-weight: 600;">Débloquer tous les bets</h3>
    <p style="color: rgba(255, 255, 255, 0.7); font-size: 1.05rem; margin-bottom: 1.5rem; line-height: 1.5;">
      Essai gratuit : 1 bet visible. Abonnez-vous pour tout débloquer.
    </p>
    <a href="https://winabet.ai" style="display: inline-block; background: rgba(255, 255, 255, 0.1); color: #ffffff; padding: 0.9rem 2rem; border-radius: 0.5rem; text-decoration: none; font-size: 1rem; font-weight: 600; border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.2s;">
      Passer à un Abonnement
    </a>
  </div>
{% endif %}
          </div> <!-- cards-grid -->
        {% else %}
          <div class="card text-center" style="padding: 2rem;">
            <p style="color: rgba(255, 255, 255, 0.6);">
              Aucune carte de pari ajoutée. Utilisez l'éditeur Shopify pour ajouter vos premières recommandations de type "🎯 Carte Bet du Jour".
            </p>
          </div>
        {% endif %}
      </div>
    </div>

    <!-- PAGE 2: PARLAY DU JOUR -->
    <div id="page-parlay" class="page">
      <div class="container">
        <h1>PARLAY DU JOUR</h1>
        <p class="subtitle">Les parlay avec la meilleur probabilité de réussite aujourd'hui. Nous affichons tous les parlay avec minimum de 60% de chance de gagner selon notre IA.</p>

    {% if access_level == 'free_trial' %}
      <!-- Message de restriction pour free trial -->
      <div class="card text-center" style="padding: 3rem; margin-top: 2rem; background: rgba(255, 255, 255, 0.03); border: 2px solid rgba(255, 255, 255, 0.1);">
        <div style="font-size: 3rem; margin-bottom: 1.2rem;">🔒</div>
        <h2 style="color: rgba(255, 255, 255, 0.95); font-size: 2rem; margin-bottom: 1.2rem; font-weight: 600;">Parlays Réservés aux Abonnés</h2>
        <p style="color: rgba(255, 255, 255, 0.7); font-size: 1.15rem; margin-bottom: 2rem; line-height: 1.6; max-width: 600px; margin-left: auto; margin-right: auto;">
          Accédez aux parlays à haute probabilité en souscrivant à un abonnement.
        </p>
        <a href="https://winabet.ai" style="display: inline-block; background: rgba(255, 255, 255, 0.1); color: #ffffff; padding: 1.1rem 2.5rem; border-radius: 0.5rem; text-decoration: none; font-size: 1.1rem; font-weight: 600; border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.2s;">
          Passer à un Abonnement
        </a>
      </div>
        {% else %}
          <!-- Contenu normal des parlays pour les membres avec abonnement -->
          {% assign has_parlay = false %}
          <div class="cards-grid">
        {% for block in section.blocks %}
          {% if block.type == 'parlay_card' and block.settings.show_card %}
            {% assign has_parlay = true %}
              <div class="card-wrapper">

              {% capture legs_json %}[
                {% for i in (1..10) %}
                  {% case i %}
                    {% when 1 %}
                      {% assign leg_team1_name = block.settings.leg1_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg1_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg1_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg1_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg1_bet_type %}
                      {% assign leg_match_time = block.settings.leg1_match_time %}
                      {% assign leg_spread_value = block.settings.leg1_spread_value %}
                      {% assign leg_spread_team = block.settings.leg1_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg1_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg1_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg1_over_under_stat_type %}
                      {% assign leg_over_under_text_custom = block.settings.leg1_over_under_text_custom %}
                      {% assign leg_moneyline_team = block.settings.leg1_moneyline_team %}
                      {% assign leg_result = block.settings.leg1_result | default: 'pending' %}
                    {% when 2 %}
                      {% assign leg_team1_name = block.settings.leg2_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg2_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg2_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg2_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg2_bet_type %}
                      {% assign leg_match_time = block.settings.leg2_match_time %}
                      {% assign leg_spread_value = block.settings.leg2_spread_value %}
                      {% assign leg_spread_team = block.settings.leg2_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg2_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg2_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg2_over_under_stat_type %}
                      {% assign leg_over_under_text_custom = block.settings.leg2_over_under_text_custom %}
                      {% assign leg_result = block.settings.leg2_result | default: 'pending' %}
                    {% when 3 %}
                      {% assign leg_team1_name = block.settings.leg3_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg3_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg3_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg3_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg3_bet_type %}
                      {% assign leg_match_time = block.settings.leg3_match_time %}
                      {% assign leg_spread_value = block.settings.leg3_spread_value %}
                      {% assign leg_spread_team = block.settings.leg3_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg3_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg3_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg3_over_under_stat_type %}
                      {% assign leg_over_under_text_custom = block.settings.leg3_over_under_text_custom %}
                      {% assign leg_result = block.settings.leg3_result | default: 'pending' %}
                    {% when 4 %}
                      {% assign leg_team1_name = block.settings.leg4_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg4_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg4_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg4_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg4_bet_type %}
                      {% assign leg_match_time = block.settings.leg4_match_time %}
                      {% assign leg_spread_value = block.settings.leg4_spread_value %}
                      {% assign leg_spread_team = block.settings.leg4_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg4_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg4_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg4_over_under_stat_type %}
                      {% assign leg_over_under_text_custom = block.settings.leg4_over_under_text_custom %}
                      {% assign leg_result = block.settings.leg4_result | default: 'pending' %}
                    {% when 5 %}
                      {% assign leg_team1_name = block.settings.leg5_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg5_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg5_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg5_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg5_bet_type %}
                      {% assign leg_match_time = block.settings.leg5_match_time %}
                      {% assign leg_spread_value = block.settings.leg5_spread_value %}
                      {% assign leg_spread_team = block.settings.leg5_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg5_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg5_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg5_over_under_stat_type %}
                      {% assign leg_over_under_text_custom = block.settings.leg5_over_under_text_custom %}
                      {% assign leg_result = block.settings.leg5_result | default: 'pending' %}
                    {% when 6 %}
                      {% assign leg_team1_name = block.settings.leg6_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg6_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg6_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg6_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg6_bet_type %}
                      {% assign leg_match_time = block.settings.leg6_match_time %}
                      {% assign leg_spread_value = block.settings.leg6_spread_value %}
                      {% assign leg_spread_team = block.settings.leg6_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg6_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg6_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg6_over_under_stat_type %}
                      {% assign leg_over_under_text_custom = block.settings.leg6_over_under_text_custom %}
                      {% assign leg_result = block.settings.leg6_result | default: 'pending' %}
                    {% when 7 %}
                      {% assign leg_team1_name = block.settings.leg7_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg7_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg7_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg7_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg7_bet_type %}
                      {% assign leg_match_time = block.settings.leg7_match_time %}
                      {% assign leg_spread_value = block.settings.leg7_spread_value %}
                      {% assign leg_spread_team = block.settings.leg7_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg7_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg7_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg7_over_under_stat_type %}
                      {% assign leg_over_under_text_custom = block.settings.leg7_over_under_text_custom %}
                      {% assign leg_result = block.settings.leg7_result | default: 'pending' %}
                    {% when 8 %}
                      {% assign leg_team1_name = block.settings.leg8_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg8_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg8_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg8_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg8_bet_type %}
                      {% assign leg_match_time = block.settings.leg8_match_time %}
                      {% assign leg_spread_value = block.settings.leg8_spread_value %}
                      {% assign leg_spread_team = block.settings.leg8_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg8_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg8_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg8_over_under_stat_type %}
                      {% assign leg_over_under_text_custom = block.settings.leg8_over_under_text_custom %}
                      {% assign leg_result = block.settings.leg8_result | default: 'pending' %}
                    {% when 9 %}
                      {% assign leg_team1_name = block.settings.leg9_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg9_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg9_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg9_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg9_bet_type %}
                      {% assign leg_match_time = block.settings.leg9_match_time %}
                      {% assign leg_spread_value = block.settings.leg9_spread_value %}
                      {% assign leg_spread_team = block.settings.leg9_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg9_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg9_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg9_over_under_stat_type %}
                      {% assign leg_over_under_text_custom = block.settings.leg9_over_under_text_custom %}
                      {% assign leg_result = block.settings.leg9_result | default: 'pending' %}
                    {% when 10 %}
                      {% assign leg_team1_name = block.settings.leg10_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg10_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg10_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg10_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg10_bet_type %}
                      {% assign leg_match_time = block.settings.leg10_match_time %}
                      {% assign leg_spread_value = block.settings.leg10_spread_value %}
                      {% assign leg_spread_team = block.settings.leg10_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg10_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg10_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg10_over_under_stat_type %}
                      {% assign leg_over_under_text_custom = block.settings.leg10_over_under_text_custom %}
                      {% assign leg_result = block.settings.leg10_result | default: 'pending' %}
                  {% endcase %}
                  
                  {% if leg_team1_name != blank %}
                    {% unless forloop.first %},{% endunless %}
                    {
                      "team1_name": "{{ leg_team1_name }}",
                      "team1_logo": "{{ leg_team1_logo | image_url: width: 200 }}",
                      "team2_name": "{{ leg_team2_name }}",
                      "team2_logo": "{{ leg_team2_logo | image_url: width: 200 }}",
                      "bet_type": "{{ leg_bet_type }}",
                      "match_time": "{{ leg_match_time }}",
                      "spread_value": "{{ leg_spread_value }}",
                      "spread_team": "{{ leg_spread_team }}",
                      "over_under_type": "{{ leg_over_under_type }}",
                       "over_under_value": "{{ leg_over_under_value }}",
                       "over_under_stat_type": "{{ leg_over_under_stat_type }}",
                       "over_under_text_custom": "{{ leg_over_under_text_custom }}",
                       "moneyline_team": "{{ leg_moneyline_team | default: 'team2' }}",
                       "result": "{{ leg_result | default: 'pending' }}"
                     }
                  {% endif %}
                {% endfor %}
              ]{% endcapture %}

              <div class="bet-card" style="{% if block.settings.send_to_history == true %}display:none{% endif %}" 
                   {{ block.shopify_attributes }}
                   data-block-type="parlay_card"
                   data-block-id="{{ block.id }}"
                   data-sport-type="{{ block.settings.sport_type | default: 'nhl' }}"
                   data-ai-data-count="{{ block.settings.ai_data_count | default: 5214 }}"
                   data-win-percentage="{{ block.settings.win_percentage | default: 78 }}"
                   data-multiplier="{{ block.settings.multiplier }}"
                   data-bet-units="{{ block.settings.bet_units }}"
                   data-odds="{{ block.settings.odds }}"
                   data-best-bookmaker="{{ block.settings.best_bookmaker }}"
                   data-best-odds="{{ block.settings.best_odds }}"
                   data-match-date="{{ block.settings.match_date }}"
                   data-match-time="{{ block.settings.match_time }}"
                   data-result="{{ block.settings.result | default: 'pending' }}"
                   data-send-to-history="{{ block.settings.send_to_history }}"
                   data-legs='{{ legs_json | strip_newlines | strip }}'
              >
                 <!-- AI Analysis Header - Nouveau Layout -->
                 <div class="confidence-badge" style="display: flex; align-items: center; justify-content: flex-start; gap: 0.5rem; padding: 0.75rem 1.5rem; background: rgba(0, 0, 0, 0.6); margin-top: 0.75rem; margin-bottom: 0.125rem;">
                   <!-- Gauche: Icône IA + Pourcentage -->
                   <div style="display: flex; align-items: center; gap: 1rem;">
                     <!-- Icône IA atomique (50px) -->
                     <div style="position: relative; width: 50px; height: 50px; flex-shrink: 0;">
                       <svg width="50" height="50" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                         <defs>
                           <filter id="softGlowParlayHeader{{ forloop.index }}" x="-50%" y="-50%" width="200%" height="200%">
                             <feGaussianBlur stdDeviation="1.2" result="b"/>
                             <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                           </filter>
                           <path id="orbit0ParlayHeader{{ forloop.index }}" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" pathLength="1000"/>
                           <path id="orbit1ParlayHeader{{ forloop.index }}" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(55 100 100)" pathLength="1000"/>
                           <path id="orbit2ParlayHeader{{ forloop.index }}" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(-55 100 100)" pathLength="1000"/>
                         </defs>
                         <g stroke="#68859e" stroke-width="2" fill="none">
                           <use href="#orbit0ParlayHeader{{ forloop.index }}"/><use href="#orbit1ParlayHeader{{ forloop.index }}"/><use href="#orbit2ParlayHeader{{ forloop.index }}"/>
                         </g>
                         <g stroke-linecap="round" filter="url(#softGlowParlayHeader{{ forloop.index }})">
                           <use href="#orbit0ParlayHeader{{ forloop.index }}" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                             <animate attributeName="stroke-dashoffset" values="0;-1000" dur="6s" repeatCount="indefinite" begin="0s"/>
                           </use>
                           <use href="#orbit1ParlayHeader{{ forloop.index }}" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                             <animate attributeName="stroke-dashoffset" values="500;-500" dur="6s" repeatCount="indefinite" begin="0s"/>
                           </use>
                           <use href="#orbit2ParlayHeader{{ forloop.index }}" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                             <animate attributeName="stroke-dashoffset" values="750;-250" dur="6s" repeatCount="indefinite" begin="0s"/>
                           </use>
                         </g>
                         <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#ffffff" font-weight="700" font-size="54">IA</text>
                       </svg>
                     </div>
                     
                     <!-- Pourcentage -->
                     <span style="font-family: 'outift', sans-serif; font-weight: 300; font-size: 1.80rem; color: #ffffff; line-height: 1;">{{ block.settings.win_percentage | default: 92 }}%</span>
                   </div>
                   
                   <!-- Centre: Texte confiance ia -->
                   <span style="font-family: 'fustat', sans-serif; font-weight: 400; font-size: 1.25rem; color: rgba(255, 255, 255, 0.7); line-height: 1; margin-left: 0.5rem;">
                    Confiance ia pour ce parlay</span>
                   
                   <!-- Droite: Bouton VOIR ANALYSE IA avec coins arrondis (8px) -->
                     <button 
                      style="padding: 0.5rem 1rem; background: #000000; color: rgba(255, 255, 255, 0.7); border: 1px solid rgba(255, 255, 255, 0.15); border-radius: 0.5rem; font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 0.75rem; cursor: pointer; transition: all 0.2s; line-height: 1.2; white-space: nowrap; margin-left: auto;"
                     onclick="openAnalysisDialog(this)"
                     data-win-percentage="{{ block.settings.win_percentage | default: 92 }}"
                     data-ai-data-count="{{ block.settings.ai_data_count | default: 2843 }}"
                     data-sport-type="{{ block.settings.sport_type | default: 'nhl' }}"
                     data-team1="{{ block.settings.leg1_team1_name | default: 'ÉQUIPE DOMICILE' }}"
                     data-team2="{{ block.settings.leg1_team2_name | default: 'ÉQUIPE EXTÉRIEUR' }}"
                     data-auto-increment="{{ block.settings.auto_increment_enabled }}"
                     data-increment-interval="{{ block.settings.auto_increment_interval | default: 5 }}"
                     data-increment-amount="{{ block.settings.auto_increment_amount | default: 5 }}"
                   >
                     VOIR<br>ANALYSE<br>IA
                   </button>
                 </div>

                 <div class="bet-card-content">
                  <!-- Multiplicateur de Mise -->
                  <button class="multiplier-button">x{{ block.settings.multiplier | default: '1.95' }}</button>

                  <!-- Parier Sur -->
                  
                  <!-- LEG 1 -->
                  {% if block.settings.leg1_team1_name != blank %}
                    {% assign leg1_result = block.settings.leg1_result | default: 'pending' %}
                    {% assign leg_border_color = '#ffffff' %}
                    {% assign leg_border_width = '1px' %}
                    {% assign leg_badge = '' %}
                    
                    {% if leg1_result == 'win' %}
                      {% assign leg_border_color = 'rgba(255, 255, 255, 0.50)' %}
                      {% assign leg_border_width = '4px' %}
                      {% assign leg_badge = '<div style="position: absolute; top: 0.5rem; right: 0.5rem; background: rgba(255,255,255,0.20); color: #fff; padding: 0.5rem 1rem; border-radius: 0.5rem; font-weight: 700; font-size: 1rem; z-index: 10;">✓ GAGNÉ</div>' %}
                    {% elsif leg1_result == 'loose' %}
                      {% assign leg_border_color = 'rgba(255, 255, 255, 0.20)' %}
                      {% assign leg_border_width = '4px' %}
                      {% assign leg_badge = '<div style="position: absolute; top: 0.5rem; right: 0.5rem; background: rgba(255,255,255,0.10); color: #fff; padding: 0.5rem 1rem; border-radius: 0.5rem; font-weight: 700; font-size: 1rem; z-index: 10;">✗ PERDU</div>' %}
                    {% endif %}
                    
                  <div style="position: relative; border: {{ leg_border_width }} solid {{ leg_border_color }}; border-radius: 1rem; padding: 1.5rem; margin-bottom: 1rem; background: rgba(0, 0, 0, 0.3);">
                    {{ leg_badge }}
                  <div class="match-info-new">
                    {% assign leg_bet_type = block.settings.leg1_bet_type | default: 'moneyline' %}
                    
                    {% if leg_bet_type == 'moneyline' %}
                      {% assign moneyline_team = block.settings.leg1_moneyline_team | default: 'team2' %}
                      <div class="match-info-header">LEG 1 - MONEYLINE</div>
                      <div class="match-info-content">
                        <div class="team-side {% if moneyline_team == 'team1' %}selected{% endif %}">
                          {% if block.settings.leg1_team1_logo %}
                            <img src="{{ block.settings.leg1_team1_logo | image_url: width: 200 }}" alt="{{ block.settings.leg1_team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg1_team1_name }}</div>
                          {% if moneyline_team == 'team1' %}
                            <div class="team-bet-type">VICTOIRE</div>
                          {% endif %}
                        </div>
                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.leg1_match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                        </div>
                        <div class="team-side {% if moneyline_team == 'team2' %}selected{% endif %}">
                          {% if block.settings.leg1_team2_logo %}
                            <img src="{{ block.settings.leg1_team2_logo | image_url: width: 200 }}" alt="{{ block.settings.leg1_team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg1_team2_name }}</div>
                          {% if moneyline_team == 'team2' %}
                            <div class="team-bet-type">VICTOIRE</div>
                          {% endif %}
                        </div>
                      </div>
                    {% elsif leg_bet_type == 'spread' %}
                      <div class="match-info-header">LEG 1 - SPREAD</div>
                      <div class="match-info-content">
                        <div class="team-side {% if block.settings.leg1_spread_team == 'team1' %}selected{% endif %}">
                          {% if block.settings.leg1_team1_logo %}
                            <img src="{{ block.settings.leg1_team1_logo | image_url: width: 200 }}" alt="{{ block.settings.leg1_team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg1_team1_name }}</div>
                          {% if block.settings.leg1_spread_team == 'team1' %}
                            <div class="team-bet-type">{{ block.settings.leg1_spread_value | default: '-3.5' }}</div>
                          {% endif %}
                        </div>
                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.leg1_match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                        </div>
                        <div class="team-side {% if block.settings.leg1_spread_team == 'team2' %}selected{% endif %}">
                          {% if block.settings.leg1_team2_logo %}
                            <img src="{{ block.settings.leg1_team2_logo | image_url: width: 200 }}" alt="{{ block.settings.leg1_team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg1_team2_name }}</div>
                          {% if block.settings.leg1_spread_team == 'team2' %}
                            <div class="team-bet-type">{{ block.settings.leg1_spread_value | default: '-3.5' }}</div>
                          {% endif %}
                        </div>
                      </div>
                    {% elsif leg_bet_type == 'over_under' %}
                      {% assign custom_text = block.settings.leg1_over_under_text_custom | default: '' %}
                      {% if custom_text != blank %}
                        <div class="match-info-header">LEG 1 - {{ custom_text | upcase }}</div>
                      {% else %}
                        <div class="match-info-header">LEG 1 - {{ block.settings.leg1_over_under_type | default: 'OVER' | upcase }}</div>
                      {% endif %}
                      <div class="match-info-content">
                        <div class="team-side">
                          {% if block.settings.leg1_team1_logo %}
                            <img src="{{ block.settings.leg1_team1_logo | image_url: width: 200 }}" alt="{{ block.settings.leg1_team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg1_team1_name }}</div>
                        </div>
                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.leg1_match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                          <div class="over-under-display">
                            {% if custom_text != blank %}
                              <div class="over-under-type">{{ custom_text | upcase }}</div>
                            {% else %}
                              <div class="over-under-type">{{ block.settings.leg1_over_under_type | default: 'OVER' | upcase }}</div>
                            {% endif %}
                            <div class="over-under-value">{{ block.settings.leg1_over_under_value | default: '225.5' }}</div>
                            {% if block.settings.leg1_over_under_stat_type != blank %}
                              <div class="over-under-stat">{{ block.settings.leg1_over_under_stat_type }}</div>
                            {% endif %}
                          </div>
                        </div>
                        <div class="team-side">
                          {% if block.settings.leg1_team2_logo %}
                            <img src="{{ block.settings.leg1_team2_logo | image_url: width: 200 }}" alt="{{ block.settings.leg1_team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg1_team2_name }}</div>
                        </div>
                      </div>
                    {% endif %}
                  </div>
                  </div>
                  {% endif %}

                  <!-- LEG 2 -->
                  {% if block.settings.leg2_team1_name != blank %}
                    {% assign leg2_result = block.settings.leg2_result | default: 'pending' %}
                    {% assign leg_border_color = '#ffffff' %}
                    {% assign leg_border_width = '1px' %}
                    {% assign leg_badge = '' %}
                    
                    {% if leg2_result == 'win' %}
                      {% assign leg_border_color = 'rgba(255, 255, 255, 0.50)' %}
                      {% assign leg_border_width = '4px' %}
                      {% assign leg_badge = '<div style="position: absolute; top: 0.5rem; right: 0.5rem; background: rgba(255,255,255,0.20); color: #fff; padding: 0.5rem 1rem; border-radius: 0.5rem; font-weight: 700; font-size: 1rem; z-index: 10;">✓ GAGNÉ</div>' %}
                    {% elsif leg2_result == 'loose' %}
                      {% assign leg_border_color = 'rgba(255, 255, 255, 0.20)' %}
                      {% assign leg_border_width = '4px' %}
                      {% assign leg_badge = '<div style="position: absolute; top: 0.5rem; right: 0.5rem; background: rgba(255,255,255,0.10); color: #fff; padding: 0.5rem 1rem; border-radius: 0.5rem; font-weight: 700; font-size: 1rem; z-index: 10;">✗ PERDU</div>' %}
                    {% endif %}
                    
                  <div style="position: relative; border: {{ leg_border_width }} solid {{ leg_border_color }}; border-radius: 1rem; padding: 1.5rem; margin-bottom: 1rem; background: rgba(0, 0, 0, 0.3);">
                    {{ leg_badge }}
                  <div class="match-info-new">
                    {% assign leg_bet_type = block.settings.leg2_bet_type | default: 'moneyline' %}
                    
                    {% if leg_bet_type == 'moneyline' %}
                      <div class="match-info-header">LEG 2 - MONEYLINE</div>
                      <div class="match-info-content">
                        <div class="team-side">
                          {% if block.settings.leg2_team1_logo %}
                            <img src="{{ block.settings.leg2_team1_logo | image_url: width: 200 }}" alt="{{ block.settings.leg2_team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg2_team1_name }}</div>
                        </div>
                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.leg2_match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                        </div>
                        <div class="team-side selected">
                          {% if block.settings.leg2_team2_logo %}
                            <img src="{{ block.settings.leg2_team2_logo | image_url: width: 200 }}" alt="{{ block.settings.leg2_team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg2_team2_name }}</div>
                          <div class="team-bet-type">VICTOIRE</div>
                        </div>
                      </div>
                    {% elsif leg_bet_type == 'spread' %}
                      <div class="match-info-header">LEG 2 - SPREAD</div>
                      <div class="match-info-content">
                        <div class="team-side {% if block.settings.leg2_spread_team == 'team1' %}selected{% endif %}">
                          {% if block.settings.leg2_team1_logo %}
                            <img src="{{ block.settings.leg2_team1_logo | image_url: width: 200 }}" alt="{{ block.settings.leg2_team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg2_team1_name }}</div>
                          {% if block.settings.leg2_spread_team == 'team1' %}
                            <div class="team-bet-type">{{ block.settings.leg2_spread_value | default: '-3.5' }}</div>
                          {% endif %}
                        </div>
                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.leg2_match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                        </div>
                        <div class="team-side {% if block.settings.leg2_spread_team == 'team2' %}selected{% endif %}">
                          {% if block.settings.leg2_team2_logo %}
                            <img src="{{ block.settings.leg2_team2_logo | image_url: width: 200 }}" alt="{{ block.settings.leg2_team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg2_team2_name }}</div>
                          {% if block.settings.leg2_spread_team == 'team2' %}
                            <div class="team-bet-type">{{ block.settings.leg2_spread_value | default: '-3.5' }}</div>
                          {% endif %}
                        </div>
                      </div>
                    {% elsif leg_bet_type == 'over_under' %}
                      {% assign custom_text = block.settings.leg2_over_under_text_custom | default: '' %}
                      {% if custom_text != blank %}
                        <div class="match-info-header">LEG 2 - {{ custom_text | upcase }}</div>
                      {% else %}
                        <div class="match-info-header">LEG 2 - {{ block.settings.leg2_over_under_type | default: 'OVER' | upcase }}</div>
                      {% endif %}
                      <div class="match-info-content">
                        <div class="team-side">
                          {% if block.settings.leg2_team1_logo %}
                            <img src="{{ block.settings.leg2_team1_logo | image_url: width: 200 }}" alt="{{ block.settings.leg2_team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg2_team1_name }}</div>
                        </div>
                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.leg2_match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                          <div class="over-under-display">
                            {% if custom_text != blank %}
                              <div class="over-under-type">{{ custom_text | upcase }}</div>
                            {% else %}
                              <div class="over-under-type">{{ block.settings.leg2_over_under_type | default: 'OVER' | upcase }}</div>
                            {% endif %}
                            <div class="over-under-value">{{ block.settings.leg2_over_under_value | default: '225.5' }}</div>
                            {% if block.settings.leg2_over_under_stat_type != blank %}
                              <div class="over-under-stat">{{ block.settings.leg2_over_under_stat_type }}</div>
                            {% endif %}
                          </div>
                        </div>
                        <div class="team-side">
                          {% if block.settings.leg2_team2_logo %}
                            <img src="{{ block.settings.leg2_team2_logo | image_url: width: 200 }}" alt="{{ block.settings.leg2_team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg2_team2_name }}</div>
                        </div>
                      </div>
                    {% endif %}
                  </div>
                  </div>
                  {% endif %}

                  <!-- LEG 3 à LEG 10: Structure similaire mais trop longue, je vais créer une approche compacte ci-dessous -->
                  
                  {% for i in (3..10) %}
                    {% case i %}
                      {% when 3 %}
                        {% assign team1_name = block.settings.leg3_team1_name %}
                        {% assign team1_logo = block.settings.leg3_team1_logo %}
                        {% assign team2_name = block.settings.leg3_team2_name %}
                        {% assign team2_logo = block.settings.leg3_team2_logo %}
                        {% assign match_time = block.settings.leg3_match_time %}
                        {% assign leg_bet_type = block.settings.leg3_bet_type %}
                        {% assign spread_value = block.settings.leg3_spread_value %}
                        {% assign spread_team = block.settings.leg3_spread_team %}
                        {% assign over_under_type = block.settings.leg3_over_under_type %}
                        {% assign over_under_value = block.settings.leg3_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg3_over_under_stat_type %}
                        {% assign over_under_text_custom = block.settings.leg3_over_under_text_custom | default: '' %}
                        {% assign leg_result = block.settings.leg3_result | default: 'pending' %}
                      {% when 4 %}
                        {% assign team1_name = block.settings.leg4_team1_name %}
                        {% assign team1_logo = block.settings.leg4_team1_logo %}
                        {% assign team2_name = block.settings.leg4_team2_name %}
                        {% assign team2_logo = block.settings.leg4_team2_logo %}
                        {% assign match_time = block.settings.leg4_match_time %}
                        {% assign leg_bet_type = block.settings.leg4_bet_type %}
                        {% assign spread_value = block.settings.leg4_spread_value %}
                        {% assign spread_team = block.settings.leg4_spread_team %}
                        {% assign over_under_type = block.settings.leg4_over_under_type %}
                        {% assign over_under_value = block.settings.leg4_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg4_over_under_stat_type %}
                        {% assign over_under_text_custom = block.settings.leg4_over_under_text_custom | default: '' %}
                        {% assign leg_result = block.settings.leg4_result | default: 'pending' %}
                      {% when 5 %}
                        {% assign team1_name = block.settings.leg5_team1_name %}
                        {% assign team1_logo = block.settings.leg5_team1_logo %}
                        {% assign team2_name = block.settings.leg5_team2_name %}
                        {% assign team2_logo = block.settings.leg5_team2_logo %}
                        {% assign match_time = block.settings.leg5_match_time %}
                        {% assign leg_bet_type = block.settings.leg5_bet_type %}
                        {% assign spread_value = block.settings.leg5_spread_value %}
                        {% assign spread_team = block.settings.leg5_spread_team %}
                        {% assign over_under_type = block.settings.leg5_over_under_type %}
                        {% assign over_under_value = block.settings.leg5_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg5_over_under_stat_type %}
                        {% assign over_under_text_custom = block.settings.leg5_over_under_text_custom | default: '' %}
                        {% assign leg_result = block.settings.leg5_result | default: 'pending' %}
                      {% when 6 %}
                        {% assign team1_name = block.settings.leg6_team1_name %}
                        {% assign team1_logo = block.settings.leg6_team1_logo %}
                        {% assign team2_name = block.settings.leg6_team2_name %}
                        {% assign team2_logo = block.settings.leg6_team2_logo %}
                        {% assign match_time = block.settings.leg6_match_time %}
                        {% assign leg_bet_type = block.settings.leg6_bet_type %}
                        {% assign spread_value = block.settings.leg6_spread_value %}
                        {% assign spread_team = block.settings.leg6_spread_team %}
                        {% assign over_under_type = block.settings.leg6_over_under_type %}
                        {% assign over_under_value = block.settings.leg6_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg6_over_under_stat_type %}
                        {% assign over_under_text_custom = block.settings.leg6_over_under_text_custom | default: '' %}
                        {% assign leg_result = block.settings.leg6_result | default: 'pending' %}
                      {% when 7 %}
                        {% assign team1_name = block.settings.leg7_team1_name %}
                        {% assign team1_logo = block.settings.leg7_team1_logo %}
                        {% assign team2_name = block.settings.leg7_team2_name %}
                        {% assign team2_logo = block.settings.leg7_team2_logo %}
                        {% assign match_time = block.settings.leg7_match_time %}
                        {% assign leg_bet_type = block.settings.leg7_bet_type %}
                        {% assign spread_value = block.settings.leg7_spread_value %}
                        {% assign spread_team = block.settings.leg7_spread_team %}
                        {% assign over_under_type = block.settings.leg7_over_under_type %}
                        {% assign over_under_value = block.settings.leg7_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg7_over_under_stat_type %}
                        {% assign over_under_text_custom = block.settings.leg7_over_under_text_custom | default: '' %}
                        {% assign leg_result = block.settings.leg7_result | default: 'pending' %}
                      {% when 8 %}
                        {% assign team1_name = block.settings.leg8_team1_name %}
                        {% assign team1_logo = block.settings.leg8_team1_logo %}
                        {% assign team2_name = block.settings.leg8_team2_name %}
                        {% assign team2_logo = block.settings.leg8_team2_logo %}
                        {% assign match_time = block.settings.leg8_match_time %}
                        {% assign leg_bet_type = block.settings.leg8_bet_type %}
                        {% assign spread_value = block.settings.leg8_spread_value %}
                        {% assign spread_team = block.settings.leg8_spread_team %}
                        {% assign over_under_type = block.settings.leg8_over_under_type %}
                        {% assign over_under_value = block.settings.leg8_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg8_over_under_stat_type %}
                        {% assign over_under_text_custom = block.settings.leg8_over_under_text_custom | default: '' %}
                        {% assign leg_result = block.settings.leg8_result | default: 'pending' %}
                      {% when 9 %}
                        {% assign team1_name = block.settings.leg9_team1_name %}
                        {% assign team1_logo = block.settings.leg9_team1_logo %}
                        {% assign team2_name = block.settings.leg9_team2_name %}
                        {% assign team2_logo = block.settings.leg9_team2_logo %}
                        {% assign match_time = block.settings.leg9_match_time %}
                        {% assign leg_bet_type = block.settings.leg9_bet_type %}
                        {% assign spread_value = block.settings.leg9_spread_value %}
                        {% assign spread_team = block.settings.leg9_spread_team %}
                        {% assign over_under_type = block.settings.leg9_over_under_type %}
                        {% assign over_under_value = block.settings.leg9_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg9_over_under_stat_type %}
                        {% assign over_under_text_custom = block.settings.leg9_over_under_text_custom | default: '' %}
                        {% assign leg_result = block.settings.leg9_result | default: 'pending' %}
                      {% when 10 %}
                        {% assign team1_name = block.settings.leg10_team1_name %}
                        {% assign team1_logo = block.settings.leg10_team1_logo %}
                        {% assign team2_name = block.settings.leg10_team2_name %}
                        {% assign team2_logo = block.settings.leg10_team2_logo %}
                        {% assign match_time = block.settings.leg10_match_time %}
                        {% assign leg_bet_type = block.settings.leg10_bet_type %}
                        {% assign spread_value = block.settings.leg10_spread_value %}
                        {% assign spread_team = block.settings.leg10_spread_team %}
                        {% assign over_under_type = block.settings.leg10_over_under_type %}
                        {% assign over_under_value = block.settings.leg10_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg10_over_under_stat_type %}
                        {% assign over_under_text_custom = block.settings.leg10_over_under_text_custom | default: '' %}
                        {% assign leg_result = block.settings.leg10_result | default: 'pending' %}
                    {% endcase %}
                    
                    {% if team1_name != blank %}
                      {% assign leg_border_color = '#ffffff' %}
                      {% assign leg_border_width = '1px' %}
                      {% assign leg_badge = '' %}
                      
                      {% if leg_result == 'win' %}
                        {% assign leg_border_color = 'rgba(255, 255, 255, 0.50)' %}
                        {% assign leg_border_width = '4px' %}
                        {% assign leg_badge = '<div style="position: absolute; top: 0.5rem; right: 0.5rem; background: rgba(255,255,255,0.20); color: #fff; padding: 0.5rem 1rem; border-radius: 0.5rem; font-weight: 700; font-size: 1rem; z-index: 10;">✓ GAGNÉ</div>' %}
                      {% elsif leg_result == 'loose' %}
                        {% assign leg_border_color = 'rgba(255, 255, 255, 0.20)' %}
                        {% assign leg_border_width = '4px' %}
                        {% assign leg_badge = '<div style="position: absolute; top: 0.5rem; right: 0.5rem; background: rgba(255,255,255,0.10); color: #fff; padding: 0.5rem 1rem; border-radius: 0.5rem; font-weight: 700; font-size: 1rem; z-index: 10;">✗ PERDU</div>' %}
                      {% endif %}
                      
                    <div style="position: relative; border: {{ leg_border_width }} solid {{ leg_border_color }}; border-radius: 1rem; padding: 1.5rem; margin-bottom: 1rem; background: rgba(0, 0, 0, 0.3);">
                      {{ leg_badge }}
                    <div class="match-info-new">
                      {% assign current_leg_bet_type = leg_bet_type | default: 'moneyline' %}
                      
                      {% if current_leg_bet_type == 'moneyline' %}
                        <div class="match-info-header">LEG {{ i }} - MONEYLINE</div>
                        <div class="match-info-content">
                          <div class="team-side">
                            {% if team1_logo %}
                              <img src="{{ team1_logo | image_url: width: 200 }}" alt="{{ team1_name }}" class="team-logo">
                            {% endif %}
                            <div class="team-name-new">{{ team1_name }}</div>
                          </div>
                          <div class="match-center">
                            <div class="match-time-new">{{ match_time | default: '7:00 PM' }}</div>
                            <div class="match-vs-new">VS</div>
                          </div>
                          <div class="team-side selected">
                            {% if team2_logo %}
                              <img src="{{ team2_logo | image_url: width: 200 }}" alt="{{ team2_name }}" class="team-logo">
                            {% endif %}
                            <div class="team-name-new">{{ team2_name }}</div>
                            <div class="team-bet-type">VICTOIRE</div>
                          </div>
                        </div>
                      {% elsif current_leg_bet_type == 'spread' %}
                        <div class="match-info-header">LEG {{ i }} - SPREAD</div>
                        <div class="match-info-content">
                          <div class="team-side {% if spread_team == 'team1' %}selected{% endif %}">
                            {% if team1_logo %}
                              <img src="{{ team1_logo | image_url: width: 200 }}" alt="{{ team1_name }}" class="team-logo">
                            {% endif %}
                            <div class="team-name-new">{{ team1_name }}</div>
                            {% if spread_team == 'team1' %}
                              <div class="team-bet-type">{{ spread_value | default: '-3.5' }}</div>
                            {% endif %}
                          </div>
                          <div class="match-center">
                            <div class="match-time-new">{{ match_time | default: '7:00 PM' }}</div>
                            <div class="match-vs-new">VS</div>
                          </div>
                          <div class="team-side {% if spread_team == 'team2' %}selected{% endif %}">
                            {% if team2_logo %}
                              <img src="{{ team2_logo | image_url: width: 200 }}" alt="{{ team2_name }}" class="team-logo">
                            {% endif %}
                            <div class="team-name-new">{{ team2_name }}</div>
                            {% if spread_team == 'team2' %}
                              <div class="team-bet-type">{{ spread_value | default: '-3.5' }}</div>
                            {% endif %}
                          </div>
                        </div>
                      {% elsif current_leg_bet_type == 'over_under' %}
                        {% if over_under_text_custom != blank %}
                          <div class="match-info-header">LEG {{ i }} - {{ over_under_text_custom | upcase }}</div>
                        {% else %}
                          <div class="match-info-header">LEG {{ i }} - {{ over_under_type | default: 'OVER' | upcase }}</div>
                        {% endif %}
                        <div class="match-info-content">
                          <div class="team-side">
                            {% if team1_logo %}
                              <img src="{{ team1_logo | image_url: width: 200 }}" alt="{{ team1_name }}" class="team-logo">
                            {% endif %}
                            <div class="team-name-new">{{ team1_name }}</div>
                          </div>
                          <div class="match-center">
                            <div class="match-time-new">{{ match_time | default: '7:00 PM' }}</div>
                            <div class="match-vs-new">VS</div>
                            <div class="over-under-display">
                              {% if over_under_text_custom != blank %}
                                <div class="over-under-type">{{ over_under_text_custom | upcase }}</div>
                              {% else %}
                                <div class="over-under-type">{{ over_under_type | default: 'OVER' | upcase }}</div>
                              {% endif %}
                              <div class="over-under-value">{{ over_under_value | default: '225.5' }}</div>
                              {% if over_under_stat_type != blank %}
                                <div class="over-under-stat">{{ over_under_stat_type }}</div>
                              {% endif %}
                            </div>
                          </div>
                          <div class="team-side">
                            {% if team2_logo %}
                              <img src="{{ team2_logo | image_url: width: 200 }}" alt="{{ team2_name }}" class="team-logo">
                            {% endif %}
                            <div class="team-name-new">{{ team2_name }}</div>
                          </div>
                        </div>
                    {% endif %}
                  </div>
                  </div>
                  {% endif %}
                  {% endfor %}

                  <button class="units-button">{{ block.settings.bet_units | default: '1' }} UNITS</button>

                  <div class="gain-section">
                    <div class="bet-modify-horizontal">
                      <div class="bet-info">
                        <span>VOTRE MISE - <span class="bet-amount-value-small">$100</span></span>
                      </div>
                      <button class="modify-btn" onclick="openBetDialog(this)" data-multiplier="{{ block.settings.multiplier | default: '1.95' }}">MODIFIER</button>
                    </div>
                    <div class="cashout-full-width">
                      <div class="cashout-label">CASHOUT</div>
                      <div class="cashout-amount">${{ 100 | times: block.settings.multiplier | default: 1.95 | round: 2 }}</div>
                      <div class="cashout-profit">+${{ 100 | times: block.settings.multiplier | default: 1.95 | minus: 100 | round: 2 }} bénéfice</div>
                    </div>
                  </div>
                </div>
              </div>
              </div> <!-- card-wrapper -->
          {% endif %}
        {% endfor %}
        </div> <!-- cards-grid -->
        {% if has_parlay == false %}
          <div class="card text-center" style="padding: 2rem;">
            <p style="color: rgba(255, 255, 255, 0.6);">
              Aucune carte de parlay ajoutée. Utilisez l'éditeur Shopify pour ajouter vos premières recommandations de type "🎲 Carte Parlay".
            </p>
          </div>
        {% endif %}
        {% endif %}
      </div>
    </div>

    <!-- PAGE 3: HISTORIQUE BET DU JOUR -->
    {% render 'historique-bet-page' %}

    <!-- PAGE 4: HISTORIQUE PARLAY DU JOUR -->
    {% render 'historique-parlay-page' %}

    <style>
      /* Override snippets to show logos in history */
      #bet-history-container img,
      #parlay-history-container img {
        display: block !important;
      }
    </style>

    <!-- PAGE 5: NOTRE STRATÉGIE -->
    <div id="page-strategy" class="page">
      <div class="container" style="max-width: 1000px; margin: 0 auto;">
        <h1 style="font-size: 3.5rem; margin-bottom: 1rem;">Notre Stratégie</h1>
        <p class="subtitle" style="font-size: 1.3rem; margin-bottom: 3rem;">Découvrez notre approche gagnante</p>
        
        <div style="display: grid; gap: 2rem;">
          
          <!-- Carte Stratégie : Guide des paris sportifs -->
          <a href="#page-guide-paris" onclick="navigateTo(event, 'guide-paris')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Guide des paris sportifs</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">Comprends les bases du pari sportif — cotes, types de mises, logique du marché — et découvre comment Winabet.ai t'aide à parier plus intelligemment, sans effort.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Stratégie : Stratégies de paris -->
          <a href="#page-strategies-paris" onclick="navigateTo(event, 'strategies-paris')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Stratégies de paris</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">Découvre comment penser comme un parieur intelligent. Winabet.ai t'explique les principes qui influencent tes chances de succès — lignes, timing, gestion de mise et analyse des matchs — pendant que son IA fait tout le travail pour toi.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Stratégie : Point Spread -->
          <a href="#page-point-spread" onclick="navigateTo(event, 'point-spread')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Point Spread</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">Découvre comment fonctionnent les paris à l'écart, l'un des types de mises les plus populaires dans le sport. Winabet.ai t'explique comment lire les spreads, les comprendre et les utiliser pour miser plus intelligemment.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Stratégie : Moneyline -->
          <a href="#page-moneyline" onclick="navigateTo(event, 'moneyline')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer; margin-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Moneyline (Vainqueur du match)</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">Le pari le plus simple : tu choisis l'équipe qui gagne. Winabet.ai t'explique comment lire les cotes + / – et t'indique directement les meilleurs moneylines en NFL et NHL.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Stratégie : Over/Under -->
          <a href="#page-overunder" onclick="navigateTo(event, 'overunder')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer; margin-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Over/Under (Total de points)</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">Parie sur le rythme du match, pas sur le vainqueur. Winabet.ai t'explique comment fonctionnent les totaux de points et t'indique automatiquement quand miser sur le Over ou le Under selon ses analyses IA.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Stratégie : Prop Bets -->
          <a href="#page-propbets" onclick="navigateTo(event, 'propbets')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer; margin-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Prop Bets (Paris spéciaux)</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">Parie sur les performances des joueurs, pas seulement sur le score. Winabet.ai t'explique les différents types de prop bets et t'indique ceux qui ont le plus de valeur selon les données réelles des matchs en NFL et NHL.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Stratégie : Parlay Bets -->
          <a href="#page-parlaybets" onclick="navigateTo(event, 'parlaybets')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer; margin-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 4v3m0 3v3m-7-9v3m0 3v3"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Parlay Bets (Paris combinés)</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">Apprends à comprendre les paris combinés et pourquoi ils sont si populaires. Winabet.ai t'explique comment ils fonctionnent, leurs variantes (même-match, teaser, round-robin) et surtout, pourquoi ils sont risqués malgré leurs gains potentiels.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Stratégie : Lire les cotes -->
          <a href="#page-odds" onclick="navigateTo(event, 'odds')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer; margin-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Lire les cotes (Odds)</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">Comprends rapidement les cotes américaines (+/–), fractionnelles et décimales, la probabilité implicite et le juice. Winabet.ai traduit tout en pourcentages et te pointe directement les paris NFL et NHL avec valeur.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>
          
        </div>
      </div>
    </div>

    <!-- PAGE 6: MON COMPTE -->
    <div id="page-account" class="page">
      <div class="container">
        <h1>Mon compte</h1>
        <p class="subtitle">Gérez votre profil et vos préférences</p>
        
        <div class="card">
          <p class="text-center" style="color: rgba(255, 255, 255, 0.6);">
            Fonctionnalité à venir. Vous pourrez bientôt gérer votre profil, vos préférences et vos paramètres.
          </p>
        </div>
      </div>
    </div>

    <!-- PAGE 7: BOUTIQUE -->
    <div id="page-boutique" class="page">
      <div class="container">
        <h1>Boutique</h1>
        <p class="subtitle">Découvrez nos produits et services</p>
        
        <div class="card">
          <p class="text-center" style="color: rgba(255, 255, 255, 0.6);">
            Fonctionnalité à venir. Découvrez bientôt nos offres exclusives et nos services premium.
          </p>
        </div>
      </div>
    </div>

    <!-- PAGE 8: SUPPORT -->
    <div id="page-support" class="page">
      <div class="container" style="max-width: 800px; margin: 0 auto;">
        <h1 style="font-size: 3.5rem; margin-bottom: 1rem;">Contactez-nous</h1>
        <p class="subtitle" style="font-size: 1.3rem; margin-bottom: 4rem;">Notre équipe est là pour vous aider</p>
        
        <!-- Contact rapide WhatsApp -->
        <div style="background: linear-gradient(135deg, rgba(113, 113, 122, 0.1) 0%, rgba(113, 113, 122, 0.05) 100%); padding: 3rem 2rem; border-radius: 1rem; margin-bottom: 3rem; text-align: center;">
          <div style="font-size: 4rem; margin-bottom: 1.5rem;">📱</div>
          <h2 style="color: #71717a; font-size: 2rem; margin-bottom: 1rem; font-weight: 300;">Support sportif rapide</h2>
          <p style="color: #ffffff; font-size: 2.5rem; font-weight: 300; margin-bottom: 1rem; letter-spacing: 0.05em;">
            (+1) 438 223 4581
          </p>
          <p style="color: rgba(255, 255, 255, 0.8); font-size: 1.2rem; line-height: 1.8;">
            WhatsApp ou message texte uniquement<br>
            <span style="color: rgba(255, 255, 255, 0.6); font-size: 1rem;">(Ligne de message seulement, pas d'appel téléphonique)</span>
          </p>
        </div>
        
        <!-- Contact par email -->
        <div style="background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%); padding: 3rem 2rem; border-radius: 1rem; text-align: center;">
          <div style="font-size: 4rem; margin-bottom: 1.5rem;">✉️</div>
          <h2 style="color: #71717a; font-size: 2rem; margin-bottom: 1rem; font-weight: 300;">Contact par email</h2>
          <a href="mailto:info@winabet.ai.com" style="color: #ffffff; font-size: 1.8rem; font-weight: 300; text-decoration: none; transition: color 0.3s;">
            info@winabet.ai.com
          </a>
          <p style="color: rgba(255, 255, 255, 0.6); font-size: 1rem; margin-top: 1rem;">
            Nous répondons sous 24-48h
          </p>
        </div>
      </div>
    </div>

    <!-- PAGE 9: CONNEXION REQUISE -->
    <div id="page-auth-required" class="page">
      <div class="container" style="max-width: 800px; margin: 0 auto; text-align: center; padding-top: 8rem;">
        <div style="font-size: 8rem; margin-bottom: 2rem; opacity: 0.8;">🔒</div>
        <h1 style="font-size: 3.5rem; margin-bottom: 1.5rem; font-weight: 600; background: linear-gradient(135deg, #ffffff 0%, rgba(255, 255, 255, 0.7) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Accès Restreint</h1>
        <p class="subtitle" style="font-size: 1.5rem; margin-bottom: 4rem; color: rgba(255, 255, 255, 0.7); max-width: 600px; margin-left: auto; margin-right: auto; line-height: 1.6;">
          Vous devez être connecté et avoir un plan actif pour accéder au Dashboard
        </p>
        
        <!-- Boutons d'action -->
        <div style="display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap; margin-top: 3rem;">
          <a href="https://account.winabet.ai" style="background: linear-gradient(135deg, #ffffff 0%, #e4e4e7 100%); color: #000000; padding: 1.5rem 3.5rem; border-radius: 0.75rem; text-decoration: none; font-size: 1.3rem; font-weight: 600; transition: all 0.3s; box-shadow: 0 4px 20px rgba(255, 255, 255, 0.2); font-family: 'Outfit', sans-serif; display: inline-block;">
            Se Connecter
          </a>
          <a href="https://winabet.ai" style="background: linear-gradient(135deg, rgba(113, 113, 122, 0.3) 0%, rgba(113, 113, 122, 0.2) 100%); color: #ffffff; padding: 1.5rem 3.5rem; border-radius: 0.75rem; text-decoration: none; font-size: 1.3rem; font-weight: 600; border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.3s; font-family: 'Outfit', sans-serif; display: inline-block;">
            Commencer Gratuitement
          </a>
        </div>
        
        <!-- Message additionnel -->
        <p style="margin-top: 4rem; color: rgba(255, 255, 255, 0.5); font-size: 1.1rem;">
          Besoin d'aide? <a href="mailto:info@winabet.ai.com" style="color: rgba(255, 255, 255, 0.8); text-decoration: underline;">Contactez-nous</a>
        </p>
      </div>
    </div>

    <!-- PAGE 10: PAIEMENT ÉCHOUÉ -->
    <div id="page-payment-failed" class="page">
      <div class="container" style="max-width: 800px; margin: 0 auto; text-align: center;">
        <div style="font-size: 5rem; margin-bottom: 1.5rem;">⚠️</div>
        <h1 style="font-size: 3rem; margin-bottom: 1.2rem; font-weight: 600; color: rgba(255, 255, 255, 0.95);">Problème de Paiement</h1>
        <p class="subtitle" style="font-size: 1.4rem; margin-bottom: 2rem; color: rgba(255, 255, 255, 0.75); line-height: 1.5;">
          Votre dernier paiement n'a pas pu être traité.
        </p>
        
        <div style="background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(255, 255, 255, 0.15); border-radius: 1rem; padding: 2.5rem; margin-bottom: 2.5rem;">
          <h3 style="color: rgba(255, 255, 255, 0.9); font-size: 1.3rem; margin-bottom: 1rem; font-weight: 600;">🔄 Mise à Jour Requise</h3>
          <p style="color: rgba(255, 255, 255, 0.75); font-size: 1.1rem; line-height: 1.6; margin: 0;">
            Veuillez mettre à jour vos informations de paiement afin que le paiement s'effectue et retrouvez l'accès à toutes les fonctionnalités.
          </p>
        </div>
        
        <!-- Boutons d'action -->
        <div style="display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap;">
          <a href="https://account.winabet.ai" style="background: rgba(255, 255, 255, 0.1); color: #ffffff; padding: 1.1rem 2.5rem; border-radius: 0.5rem; text-decoration: none; font-size: 1.1rem; font-weight: 600; border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.2s;">
            Mettre à Jour le Paiement
          </a>
          <a href="https://winabet.ai" style="background: rgba(255, 255, 255, 0.05); color: rgba(255, 255, 255, 0.85); padding: 1.1rem 2.5rem; border-radius: 0.5rem; text-decoration: none; font-size: 1.1rem; font-weight: 600; border: 1px solid rgba(255, 255, 255, 0.1); transition: all 0.2s;">
            Retour à l'Accueil
          </a>
        </div>
      </div>
    </div>

    {% render 'strategy-detail-pages' %}
  </main>

  <!-- AI Loading Overlay -->
  <div id="ai-loading-overlay" class="ai-loading-overlay">
    <svg class="ai-loading-spinner" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <filter id="softGlowLoading" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="1.2" result="b"/>
          <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
        </filter>
        <path id="orbit0Loading" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" pathLength="1000"/>
        <path id="orbit1Loading" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(55 100 100)" pathLength="1000"/>
        <path id="orbit2Loading" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(-55 100 100)" pathLength="1000"/>
      </defs>
      <g stroke="rgba(255, 255, 255, 0.35)" stroke-width="2" fill="none">
        <use href="#orbit0Loading"/>
        <use href="#orbit1Loading"/>
        <use href="#orbit2Loading"/>
      </g>
      <g stroke-linecap="round" filter="url(#softGlowLoading)">
        <use href="#orbit0Loading" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
          <animate attributeName="stroke-dashoffset" values="0;-1000" dur="6s" repeatCount="indefinite" begin="0s"/>
        </use>
        <use href="#orbit1Loading" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
          <animate attributeName="stroke-dashoffset" values="500;-500" dur="6s" repeatCount="indefinite" begin="0s"/>
        </use>
        <use href="#orbit2Loading" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
          <animate attributeName="stroke-dashoffset" values="750;-250" dur="6s" repeatCount="indefinite" begin="0s"/>
        </use>
      </g>
      <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#ffffff" font-weight="700" font-size="54">IA</text>
    </svg>
    <div class="ai-loading-logo" style="font-family: 'Outfit', sans-serif; font-weight: 300;">
      <span style="color: #ffffff;">wina</span><span style="color: rgba(255, 255, 255, 0.35);">bet</span><span style="color: #ffffff; font-size: 1.4rem; margin-left: -0.15em;">.ai</span>
    </div>
    <p class="ai-loading-message">Chargement de notre IA</p>
  </div>

  <!-- Dialog: Modifier la mise -->
  <div id="bet-dialog" class="dialog-overlay">
    <div class="dialog">
      <div class="dialog-header">
        <h2 class="dialog-title">Modifier votre mise</h2>
        <button class="dialog-close" onclick="closeBetDialog()" aria-label="Fermer">
          <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="dialog-content">
        <div class="bet-buttons">
          <button class="bet-button" onclick="setBetAmount(10)">$10</button>
          <button class="bet-button" onclick="setBetAmount(20)">$20</button>
          <button class="bet-button" onclick="setBetAmount(50)">$50</button>
          <button class="bet-button" onclick="setBetAmount(100)">$100</button>
          <button class="bet-button" onclick="setBetAmount(150)">$150</button>
          <button class="bet-button" onclick="setBetAmount(200)">$200</button>
          <button class="bet-button" onclick="setBetAmount(500)">$500</button>
          <button class="bet-button" onclick="customBetAmount()">Autre</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Dialog: Analyse IA Complète -->
  <div id="analysis-dialog" class="dialog-overlay">
    <div class="dialog dialog-large">
      <div class="analysis-header">
        <button class="dialog-close" onclick="closeAnalysisDialog()" aria-label="Fermer" style="position: absolute; top: 1rem; right: 1rem;">
          <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>

        <div style="display: flex; align-items: center; justify-content: center; gap: 0.75rem; margin-bottom: 0.75rem;">
          <div class="ai-spinner" style="width: 2.4rem; height: 2.4rem;">
            <svg width="30" height="30" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <filter id="softGlowDialog" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="1.2" result="b"/>
                  <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
                <path id="orbit0Dialog" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" pathLength="1000"/>
                <path id="orbit1Dialog" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(55 100 100)" pathLength="1000"/>
                <path id="orbit2Dialog" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(-55 100 100)" pathLength="1000"/>
              </defs>
              <g stroke="#68859e" stroke-width="2" fill="none">
                <use href="#orbit0Dialog"/><use href="#orbit1Dialog"/><use href="#orbit2Dialog"/>
              </g>
              <g stroke-linecap="round" filter="url(#softGlowDialog)">
                <use href="#orbit0Dialog" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                  <animate attributeName="stroke-dashoffset" values="0;-1000" dur="6s" repeatCount="indefinite" begin="0s"/>
                </use>
                <use href="#orbit1Dialog" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                  <animate attributeName="stroke-dashoffset" values="500;-500" dur="6s" repeatCount="indefinite" begin="0s"/>
                </use>
                <use href="#orbit2Dialog" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                  <animate attributeName="stroke-dashoffset" values="750;-250" dur="6s" repeatCount="indefinite" begin="0s"/>
                </use>
              </g>
              <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#ffffff" font-weight="700" font-size="54">IA</text>
            </svg>
          </div>
          <span style="color: #ffffff; font-weight: 300; font-size: 1.125rem; letter-spacing: 0.03em;">
            ANALYSE IA DÉTAILLÉE
          </span>
        </div>

        <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: 1rem;">
          <div style="width: 10px; height: 10px; background: rgba(255, 255, 255, 0.6); border-radius: 50%;"></div>
          <span style="color: rgba(255, 255, 255, 0.9); font-size: 1rem; font-weight: 300;">Dernière mise à jour IA pour ce bet : <span id="analysis-time">19:42</span></span>
        </div>
      </div>

      <div class="dialog-content">
        <div id="loading-section" class="loading-container">
          <div class="loading-dots">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
          </div>
          <p style="color: rgba(255, 255, 255, 0.6);">Analyse en cours...</p>
        </div>

        <div id="analysis-content" style="display: none;">
          <!-- Chance de gagner -->
          <div class="confidence-section">
            <div class="confidence-label">CHANCE DE GAGNER</div>
            <div class="confidence-value"><span id="dialog-win-percentage">92</span>%</div>
            <div class="confidence-progress">
              <div id="dialog-progress-bar" class="confidence-progress-bar" style="width: 0%"></div>
            </div>
          </div>

          <!-- ========== TEMPLATE NHL ========== -->
          <div id="template-nhl">
          <h3 class="analysis-section-title">Analyse du marché & meilleures cotes</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Marché & pricing (Équipe domicile)</div>
              <div class="analysis-subsection-content">
                • Notre IA a analysé la probabilité implicite du marché pour Équipe domicile en convertissant les cotes en pourcentages réels afin d'évaluer la valeur perçue.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Marché & pricing (Équipe domicile)</div>
              <div class="analysis-subsection-content">
                • Notre IA a observé le mouvement de ligne (line movement) afin de déterminer si la valeur a évolué en faveur ou en défaveur de Équipe domicile.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Marché & pricing (Équipe domicile)</div>
              <div class="analysis-subsection-content">
                • Notre IA a identifié la présence d'un potentiel closing line value (CLV) et a mesuré l'impact du sharp money par rapport au public money.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Marché & pricing (Équipe extérieur)</div>
              <div class="analysis-subsection-content">
                • Notre IA a calculé la probabilité implicite du marché pour Équipe extérieur en convertissant les cotes en pourcentages réels afin d'évaluer la perception de valeur.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Marché & pricing (Équipe extérieur)</div>
              <div class="analysis-subsection-content">
                • Notre IA a analysé les variations de ligne concernant Équipe extérieur afin de savoir si le mouvement des mises soutenait ou affaiblissait la valeur de cette équipe.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Marché & pricing (Équipe extérieur)</div>
              <div class="analysis-subsection-content">
                • Notre IA a mesuré la valeur potentielle du closing line value et a identifié la proportion du sharp money influençant les cotes côté extérieur.
              </div>
            </div>
          </div>

          <!-- Historique des confrontations (H2H) -->
          <h3 class="analysis-section-title">Historique des confrontations (H2H)</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Historique des confrontations (H2H)</div>
              <div class="analysis-subsection-content">
                • Notre IA a analysé les précédents affrontements entre les deux équipes pour repérer les tendances récurrentes, les styles dominants et les schémas statistiques fréquents lors de leurs duels.
              </div>
            </div>
          </div>

          <!-- Lineup / alignement projeté du jour -->
          <h3 class="analysis-section-title">Lineup / alignement projeté du jour</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Lineup / Alignement projeté du jour</div>
              <div class="analysis-subsection-content">
                • Notre IA a examiné les alignements projetés des deux équipes, incluant les trios offensifs, les paires défensives, la présence des gardiens et les absences clés susceptibles d'influencer le rythme du match.
              </div>
            </div>
          </div>

          <!-- Analyse du jeu de puissance & discipline -->
          <h3 class="analysis-section-title">Analyse du jeu de puissance & discipline</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Power Play (Équipe domicile)</div>
              <div class="analysis-subsection-content">
                • Notre IA a évalué l'efficacité du power play de Équipe domicile à travers la structure tactique, la qualité des entrées de zone, les chances créées (HDCF) et la réussite globale en avantage numérique (xGoals/PP).
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Power Play (Équipe extérieur)</div>
              <div class="analysis-subsection-content">
                • Notre IA a mesuré la performance du power play de Équipe extérieur en observant la circulation du disque, la création de tirs dangereux et la cohésion tactique de l'unité spéciale.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Discipline & Pénalités (Équipe domicile)</div>
              <div class="analysis-subsection-content">
                • Notre IA a analysé la discipline de Équipe domicile selon la fréquence des pénalités concédées, le temps passé en infériorité et l'impact sur le momentum défensif.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Discipline & Pénalités (Équipe extérieur)</div>
              <div class="analysis-subsection-content">
                • Notre IA a étudié la discipline de Équipe extérieur en mesurant le volume et le moment des pénalités concédées ainsi que leur influence sur la performance du penalty kill.
              </div>
            </div>
          </div>

          <!-- Analyse du gardien & structure défensive -->
          <h3 class="analysis-section-title">Analyse du gardien & structure défensive</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Performance du gardien (Équipe domicile)</div>
              <div class="analysis-subsection-content">
                • Notre IA a évalué le gardien projeté de Équipe domicile selon son efficacité face aux tirs à haut danger, sa technique et ses indicateurs avancés comme le GSAA.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Performance du gardien (Équipe extérieur)</div>
              <div class="analysis-subsection-content">
                • Notre IA a analysé le rendement du gardien prévu pour Équipe extérieur en fonction de sa constance sous pression, de la qualité de ses arrêts et de ses statistiques ajustées.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Structure défensive (Équipe domicile)</div>
              <div class="analysis-subsection-content">
                • Notre IA a observé la structure défensive de Équipe domicile en évaluant la couverture du slot, la gestion des rebonds et la rapidité de transition vers l'attaque.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Structure défensive (Équipe extérieur)</div>
              <div class="analysis-subsection-content">
                • Notre IA a mesuré la solidité défensive de Équipe extérieur en observant la cohésion des paires, la protection du slot et la gestion des secondes chances adverses.
              </div>
            </div>
          </div>

          <!-- Analyse de la possession & qualité offensive -->
          <h3 class="analysis-section-title">Analyse de la possession & qualité offensive</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Expected Goals (Équipe domicile)</div>
              <div class="analysis-subsection-content">
                • Notre IA a évalué la production offensive de Équipe domicile à travers les expected goals, la qualité des tirs générés et la probabilité de conversion de leurs occasions.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Expected Goals (Équipe extérieur)</div>
              <div class="analysis-subsection-content">
                • Notre IA a mesuré les expected goals de Équipe extérieur afin d'estimer la fréquence et la dangerosité de leurs opportunités de tir.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Possession (Corsi/Fenwick) (Équipe domicile)</div>
              <div class="analysis-subsection-content">
                • Notre IA a analysé la possession de Équipe domicile selon les indicateurs Corsi et Fenwick, afin de déterminer la domination territoriale et la capacité à maintenir la zone offensive.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Possession (Corsi/Fenwick) (Équipe extérieur)</div>
              <div class="analysis-subsection-content">
                • Notre IA a évalué le contrôle du palet de Équipe extérieur à partir des mêmes métriques, en observant leur aptitude à dicter le rythme et à conserver la pression offensive.
              </div>
            </div>
          </div>

          <!-- Analyse de l'alignement & profondeur -->
          <h3 class="analysis-section-title">Analyse de l'alignement & profondeur</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Profondeur offensive (Équipe domicile)</div>
              <div class="analysis-subsection-content">
                • Notre IA a analysé la profondeur offensive de Équipe domicile en mesurant la contribution du top-6, l'apport du bottom-6 et la flexibilité tactique des trios.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Profondeur offensive (Équipe extérieur)</div>
              <div class="analysis-subsection-content">
                • Notre IA a évalué la profondeur de Équipe extérieur en considérant la régularité du top-6 et la productivité du bas de l'alignement.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Stabilité défensive (Équipe domicile)</div>
              <div class="analysis-subsection-content">
                • Notre IA a observé la stabilité défensive de Équipe domicile en examinant la solidité du top-4, la mobilité en relance et la gestion des transitions rapides.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Stabilité défensive (Équipe extérieur)</div>
              <div class="analysis-subsection-content">
                • Notre IA a mesuré la stabilité défensive de Équipe extérieur selon la cohésion de ses défenseurs, leur relance et leur contrôle des espaces dangereux.
              </div>
            </div>
          </div>

          <!-- Analyse du contexte & fatigue -->
          <h3 class="analysis-section-title">Analyse du contexte & fatigue</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Cadence & calendrier (Équipe domicile)</div>
              <div class="analysis-subsection-content">
                Analyse du contexte physique de Équipe domicile, incluant l'enchaînement des matchs, le repos disponible, la présence éventuelle d'un back-to-back et la charge de déplacement.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Cadence & calendrier (Équipe extérieur)</div>
              <div class="analysis-subsection-content">
                Analyse du contexte physique de Équipe extérieur, incluant l'enchaînement des matchs, le repos disponible, la présence éventuelle d'un back-to-back et la charge de déplacement.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Avantage domicile / extérieur (Équipe domicile)</div>
              <div class="analysis-subsection-content">
                • Notre IA a mesuré l'impact du facteur domicile pour Équipe domicile, en tenant compte du dernier changement de ligne et des performances à domicile.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Avantage domicile / extérieur (Équipe extérieur)</div>
              <div class="analysis-subsection-content">
                • Notre IA a observé la performance de Équipe extérieur à l'extérieur, notamment la constance de leurs entames de match et leur gestion tactique sans le dernier changement.
              </div>
            </div>
          </div>

          <!-- Autres analyses complémentaires -->
          <h3 class="analysis-section-title">Autres analyses complémentaires</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse — Facteurs additionnels</div>
              <div class="analysis-subsection-content">
                • Notre IA a pris en compte plusieurs éléments secondaires comme la confiance du groupe, la dynamique mentale, la qualité du coaching staff, le style de match attendu (haut ou bas événement) et la capacité d'adaptation tactique entre les périodes.
              </div>
            </div>
          </div>
          <!-- ========== FIN TEMPLATE NHL ========== -->
          </div>

          <!-- ========== TEMPLATE NFL ========== -->
          <div id="template-nfl" style="display:none;">
          
          <!-- Analyse du marché & meilleures cotes -->
          <h3 class="analysis-section-title">Analyse du marché & meilleures cotes</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Probabilité implicite - Équipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a analysé la probabilité implicite du marché pour Équipe domicile en convertissant les cotes en pourcentages réels afin d'évaluer la valeur perçue.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Comparaison bookmakers - Équipe domicile</div>
              <div class="analysis-subsection-content">
                Comparaison inter-bookmakers pour identifier la meilleure cote disponible ("best price") et mesurer l'efficience du marché.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Mouvement de ligne - Équipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a observé le mouvement de ligne (line movement) afin de déterminer si la valeur a évolué en faveur ou en défaveur de Équipe domicile.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Closing line value - Équipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a identifié la présence d'un potentiel closing line value (CLV) et a mesuré l'impact du sharp money par rapport au public money.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Probabilité implicite - Équipe extérieur</div>
              <div class="analysis-subsection-content">
                Notre IA a calculé la probabilité implicite du marché pour Équipe extérieur en convertissant les cotes en pourcentages réels afin d'évaluer la perception de valeur.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Comparaison bookmakers - Équipe extérieur</div>
              <div class="analysis-subsection-content">
                Comparaison inter-bookmakers pour identifier la meilleure cote disponible ("best price") et mesurer l'efficience du marché.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Mouvement de ligne - Équipe extérieur</div>
              <div class="analysis-subsection-content">
                Notre IA a analysé les variations de ligne concernant Équipe extérieur afin de savoir si le mouvement des mises soutenait ou affaiblissait la valeur de cette équipe.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Closing line value - Équipe extérieur</div>
              <div class="analysis-subsection-content">
                Notre IA a mesuré la valeur potentielle du closing line value et a identifié la proportion du sharp money influençant les cotes côté Équipe extérieur.
              </div>
            </div>
          </div>

          <!-- Historique des confrontations -->
          <h3 class="analysis-section-title">Historique des confrontations (H2H)</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse H2H</div>
              <div class="analysis-subsection-content">
                Notre IA a analysé les précédents affrontements entre les deux équipes pour repérer les tendances récurrentes, les styles dominants et les schémas statistiques fréquents lors de leurs duels.
              </div>
            </div>
          </div>

          <!-- Alignement offensif & défensif -->
          <h3 class="analysis-section-title">Alignement offensif & défensif projeté</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Starters offensifs - Équipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a examiné les alignements offensifs projetés de Équipe domicile, incluant le quart-arrière, les receveurs, le porteur de ballon et la ligne offensive, susceptibles d'influencer le rythme du match.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Starters défensifs - Équipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a analysé les alignements défensifs projetés de Équipe domicile, incluant le front-seven, les schémas de couverture et les absences clés.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Starters offensifs - Équipe extérieur</div>
              <div class="analysis-subsection-content">
                Notre IA a examiné les alignements offensifs projetés de Équipe extérieur, en lien avec la production attendue et les matchups défensifs.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Starters défensifs - Équipe extérieur</div>
              <div class="analysis-subsection-content">
                Notre IA a analysé les alignements défensifs projetés de Équipe extérieur, incluant le front-seven, les schémas de couverture et les absences clés.
              </div>
            </div>
          </div>

          <!-- Quarterback & efficacité aérienne -->
          <h3 class="analysis-section-title">Quarterback & efficacité aérienne</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">QB - Équipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a évalué la performance du quart-arrière de Équipe domicile en fonction de sa précision sous pression, son taux de complétion ajusté et sa capacité à éviter les revirements.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">QB - Équipe extérieur</div>
              <div class="analysis-subsection-content">
                Notre IA a mesuré la performance du quart-arrière de Équipe extérieur en analysant les mêmes indicateurs, en considérant sa mobilité et son expérience.
              </div>
            </div>
          </div>

          <!-- Jeu au sol & contrôle du tempo -->
          <h3 class="analysis-section-title">Jeu au sol & contrôle du tempo</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Jeu au sol - Équipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a évalué l'efficacité du jeu au sol de Équipe domicile en analysant les yards après contact, le success rate et la capacité à imposer un rythme physique.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Jeu au sol - Équipe extérieur</div>
              <div class="analysis-subsection-content">
                Notre IA a mesuré la performance au sol de Équipe extérieur selon les mêmes indicateurs, en tenant compte de la force défensive adverse.
              </div>
            </div>
          </div>

          <!-- Défense contre la passe & contre la course -->
          <h3 class="analysis-section-title">Défense contre la passe & contre la course</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Défense vs passe - Équipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a analysé la pression défensive générée par Équipe domicile selon le blitz rate, le taux de sacks et la capacité à perturber le timing adverse.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Défense vs course - Équipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a observé la défense contre la course de Équipe domicile en analysant les yards permis avant contact, le taux de stuffs et la capacité à contenir les porteurs adverses.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Défense vs passe - Équipe extérieur</div>
              <div class="analysis-subsection-content">
                Notre IA a observé la pression défensive de Équipe extérieur en mesurant la même agressivité, la qualité du pass-rush et l'efficacité des schémas de blitz.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Défense vs course - Équipe extérieur</div>
              <div class="analysis-subsection-content">
                Notre IA a analysé la défense contre la course de Équipe extérieur en mesurant la solidité défensive, la discipline des gaps et l'efficacité face aux différents schémas.
              </div>
            </div>
          </div>

          <!-- 3rd down / red zone / discipline -->
          <h3 class="analysis-section-title">3rd down / red zone / discipline</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">3rd down & red zone - Équipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a évalué l'efficacité de Équipe domicile sur les 3rd downs et en red zone, incluant le playcalling et la capacité à convertir en situations critiques.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Discipline - Équipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a analysé la discipline de Équipe domicile selon la fréquence des pénalités concédées, le temps perdu et l'impact sur le momentum offensif.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">3rd down & red zone - Équipe extérieur</div>
              <div class="analysis-subsection-content">
                Notre IA a évalué l'efficacité de Équipe extérieur sur les 3rd downs et en red zone, incluant le playcalling et la capacité à convertir en situations critiques.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Discipline - Équipe extérieur</div>
              <div class="analysis-subsection-content">
                Notre IA a étudié la discipline de Équipe extérieur en mesurant le volume et le moment des pénalités concédées ainsi que leur influence sur la performance globale.
              </div>
            </div>
          </div>

          <!-- Spécial teams & kicker -->
          <h3 class="analysis-section-title">Spécial teams & kicker</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Unités spéciales - Équipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a analysé les unités spéciales de Équipe domicile, incluant le punt coverage, kick return, la performance du kicker et le taux de réussite des field goals.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Unités spéciales - Équipe extérieur</div>
              <div class="analysis-subsection-content">
                Notre IA a analysé les unités spéciales de Équipe extérieur, incluant le punt coverage, kick return, la performance du kicker et le taux de réussite des field goals.
              </div>
            </div>
          </div>

          <!-- Coaching, stratégie & adaptabilité -->
          <h3 class="analysis-section-title">Coaching, stratégie & adaptabilité</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Coaching - Équipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a analysé le profil du coaching staff de Équipe domicile, incluant l'agressivité en 4th down, la prise de décision analytique et la gestion de l'horloge.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Coaching - Équipe extérieur</div>
              <div class="analysis-subsection-content">
                Notre IA a analysé le profil du coaching staff de Équipe extérieur, incluant l'agressivité en 4th down, la prise de décision analytique et la gestion de l'horloge.
              </div>
            </div>
          </div>

          <!-- Contexte physique & calendrier -->
          <h3 class="analysis-section-title">Contexte physique & calendrier</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Contexte physique - Équipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a analysé la charge de matchs de Équipe domicile, le niveau de repos et l'effet potentiel d'un calendrier condensé ou d'un déplacement prolongé.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Contexte physique - Équipe extérieur</div>
              <div class="analysis-subsection-content">
                Notre IA a évalué la cadence récente de Équipe extérieur, les jours de repos et la fatigue accumulée par les voyages récents.
              </div>
            </div>
          </div>

          <!-- Autres facteurs contextuels -->
          <h3 class="analysis-section-title">Autres facteurs contextuels</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Conditions météo</div>
              <div class="analysis-subsection-content">
                Notre IA a analysé les conditions météorologiques et leur impact potentiel sur le playcalling offensif, la performance des kickers et la stratégie de jeu.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Facteurs psychologiques</div>
              <div class="analysis-subsection-content">
                Notre IA a pris en compte plusieurs éléments secondaires comme la confiance du groupe, la dynamique mentale, la qualité du coaching staff, le style de match attendu et la capacité d'adaptation tactique entre les quarts.
              </div>
            </div>
          </div>

          </div>
          <!-- ========== FIN TEMPLATE NFL ========== -->
        </div>
      </div>
    </div>
  </div>

  <script>
    // State
    let currentBetAmount = 100;
    let currentMultiplier = 1.74;
    let currentCard = null;
    let currentPage = 'bet';
    let isMobileSidebarOpen = false;

    // ===========================
    // AUTO-RESIZE OVER/UNDER TEXT
    // ===========================
    function autoResizeOverUnderText() {
      // Sélectionner toutes les cartes qui ont un over/under
      document.querySelectorAll('.match-info-content').forEach(container => {
        const overUnderDisplay = container.querySelector('.over-under-display');
        if (!overUnderDisplay) return;
        
        const teamSides = container.querySelectorAll('.team-side');
        const matchCenter = container.querySelector('.match-center');
        if (!matchCenter || teamSides.length !== 2) return;
        
        const elements = overUnderDisplay.querySelectorAll('.over-under-type, .over-under-value, .over-under-stat');
        
        // Fonction pour calculer si le contenu déborde
        const checkOverflow = () => {
          const containerWidth = container.offsetWidth;
          const gap = 16; // 1rem = 16px (le gap CSS entre les éléments)
          
          // Calculer la largeur totale nécessaire
          const team1Width = teamSides[0].offsetWidth;
          const team2Width = teamSides[1].offsetWidth;
          const centerWidth = matchCenter.offsetWidth;
          const totalNeeded = team1Width + centerWidth + team2Width + (gap * 2);
          
          return totalNeeded > containerWidth;
        };
        
        // Permettre l'empilement vertical du texte
        elements.forEach(element => {
          // Activer le word wrap pour empiler le texte verticalement
          element.style.wordBreak = 'break-word';
          element.style.overflowWrap = 'break-word';
          element.style.hyphens = 'none';
          element.style.whiteSpace = 'normal';
          element.style.textAlign = 'center';
          element.style.lineHeight = '1.2';
          
          // Partir de la taille calculée actuelle
          const computed = getComputedStyle(element);
          let fontSize = parseFloat(computed.fontSize) || 12;
          let attempts = 0;
          
          // Forcer un recalcul initial
          container.offsetHeight;
          
          // Réduire seulement un peu si nécessaire (on privilégie l'empilement)
          while (checkOverflow() && fontSize > 10 && attempts < 20) {
            fontSize -= 0.5;
            element.style.fontSize = fontSize + 'px';
            // Forcer le navigateur à recalculer le layout
            container.offsetHeight;
            attempts++;
          }
        });
      });
    }

    // ===========================
    // AUTO-SHRINK TEAM LOGOS
    // ===========================
    function autoShrinkTeamLogos() {
      // Sélectionner toutes les cartes avec des logos d'équipe
      document.querySelectorAll('.match-info-content').forEach(container => {
        const teamSides = container.querySelectorAll('.team-side');
        const matchCenter = container.querySelector('.match-center');
        if (!matchCenter || teamSides.length !== 2) return;
        
        // Fonction pour calculer si le contenu déborde
        const checkOverflow = () => {
          const containerWidth = container.offsetWidth;
          const gap = 16; // 1rem = 16px
          
          const team1Width = teamSides[0].offsetWidth;
          const team2Width = teamSides[1].offsetWidth;
          const centerWidth = matchCenter.offsetWidth;
          const totalNeeded = team1Width + centerWidth + team2Width + (gap * 2);
          
          return totalNeeded > containerWidth;
        };
        
        // Trouver tous les logos
        const logos = container.querySelectorAll('.team-logo');
        if (logos.length === 0) return;
        
        // Obtenir la taille initiale des logos
        let logoSize = parseFloat(getComputedStyle(logos[0]).width) || 80;
        let attempts = 0;
        
        // Forcer un recalcul initial
        container.offsetHeight;
        
        // Réduire la taille des logos tant que ça déborde
        while (checkOverflow() && logoSize > 40 && attempts < 50) {
          logoSize -= 2;
          logos.forEach(logo => {
            logo.style.width = logoSize + 'px';
            logo.style.height = logoSize + 'px';
          });
          // Forcer le navigateur à recalculer le layout
          container.offsetHeight;
          attempts++;
        }
      });
    }

    // Observer pour détecter les changements de contenu
    function observeOverUnderChanges() {
      const observer = new MutationObserver(() => {
        setTimeout(autoResizeOverUnderText, 100);
      });
      
      document.querySelectorAll('.over-under-display').forEach(display => {
        observer.observe(display, { 
          childList: true, 
          subtree: true, 
          characterData: true 
        });
      });
    }

    // Démarrer l'auto-resize quand la page est chargée
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        autoResizeOverUnderText();
        autoShrinkTeamLogos();
        observeOverUnderChanges();
        // Ajuster aussi les cartes d'historique (vert) qui n'ont pas de classes
        const resizeHistory = () => {
          const boxes = document.querySelectorAll('.history-card div[style*="border: 2px solid"][style*="#22c55e"]');
          boxes.forEach(box => {
            const parts = Array.from(box.children);
            parts.forEach((el, idx) => {
              // Empêcher la coupure de mots
              el.style.wordBreak = 'keep-all';
              el.style.overflowWrap = 'normal';
              el.style.hyphens = 'none';
              el.style.whiteSpace = 'normal';

              // Partir de la taille calculée actuelle (ne jamais agrandir)
              const computed = getComputedStyle(el);
              let base = parseFloat(computed.fontSize) || 16;
              el.style.fontSize = base + 'px';
              let tries = 0;
              while ((el.scrollWidth > box.clientWidth || el.scrollHeight > box.clientHeight) && base > 8 && tries < 30) {
                base -= 1;
                el.style.fontSize = base + 'px';
                tries++;
              }
            });
          });
        };
        resizeHistory();
        // Observer l'arrivée de nouvelles cartes historiques
        const historyObserver = new MutationObserver(() => setTimeout(resizeHistory, 50));
        const betHist = document.getElementById('bet-history-container');
        const parlayHist = document.getElementById('parlay-history-container');
        if (betHist) historyObserver.observe(betHist, { childList: true, subtree: true });
        if (parlayHist) historyObserver.observe(parlayHist, { childList: true, subtree: true });
      }, 500);
    });

    // Redimensionner lors du redimensionnement de la fenêtre
    window.addEventListener('resize', () => {
      setTimeout(() => {
        autoResizeOverUnderText();
        autoShrinkTeamLogos();
      }, 100);
      // Redimensionner aussi l'historique
      const event = new Event('DOMContentLoaded');
      document.dispatchEvent(event);
    });

    // ===========================
    // SYSTÈME D'AUTO-INCRÉMENTATION AVEC LOCALSTORAGE
    // ===========================
    let autoIncrementInterval = null;
    let activeCardCounterEl = null;
    let currentDialogKey = null; // Clé localStorage pour le dialog actif
    
    // Sauvegarde dans localStorage
    function saveCountToStorage(key, count) {
      try {
        localStorage.setItem(key, JSON.stringify({
          count: count,
          timestamp: Date.now()
        }));
      } catch (e) {
        console.warn('Erreur sauvegarde localStorage:', e);
      }
    }
    
    // Charge depuis localStorage avec calcul du temps écoulé
    function loadCountFromStorage(key, initialCount, intervalMinutes, amount) {
      try {
        const stored = localStorage.getItem(key);
        if (!stored) return initialCount;
        
        const data = JSON.parse(stored);
        const timeElapsed = Date.now() - data.timestamp;
        const minutesElapsed = timeElapsed / (60 * 1000);
        const incrementsSinceLastSave = Math.floor(minutesElapsed / intervalMinutes);
        const additionalCount = incrementsSinceLastSave * amount;
        
        const newCount = data.count + additionalCount;
        console.log(`📦 Chargé depuis localStorage: ${data.count} + ${additionalCount} (${incrementsSinceLastSave} incréments) = ${newCount}`);
        
        return newCount;
      } catch (e) {
        console.warn('Erreur chargement localStorage:', e);
        return initialCount;
      }
    }
    
    function startAutoIncrement(initialCount, intervalMinutes, amount, storageKey) {
      // Arrêter l'intervalle précédent s'il existe
      if (autoIncrementInterval) {
        clearInterval(autoIncrementInterval);
      }
      
      // Nettoyer la valeur : enlever tous les espaces et caractères non numériques sauf les chiffres
      const cleanedCount = String(initialCount).replace(/\s/g, '').replace(/[^\d]/g, '');
      const baseCount = parseInt(cleanedCount) || 2843;
      
      // Charger la valeur depuis localStorage si disponible
      currentDialogKey = storageKey;
      let currentCount = loadCountFromStorage(storageKey, baseCount, intervalMinutes, amount);
      
      // Mettre à jour immédiatement l'affichage
      updateDataCount(currentCount);
      
      console.log(`🚀 Auto-incrémentation démarrée: ${currentCount} données (base: ${baseCount}), +${amount} toutes les ${intervalMinutes} min`);
      
      // Démarrer l'incrémentation automatique
      const intervalMs = intervalMinutes * 60 * 1000; // Convertir minutes en millisecondes
      console.log(`⏱️ Lancement setInterval avec`, { intervalMinutes, intervalMs, firstTickIn: `${intervalMs}ms` });
      
      autoIncrementInterval = setInterval(() => {
        currentCount += parseInt(amount);
        updateDataCount(currentCount);
        saveCountToStorage(storageKey, currentCount);
        console.log(`✅ Auto-incrémentation: ${currentCount} données IA (+${amount})`);
      }, intervalMs);
    }
    
    function stopAutoIncrement() {
      if (autoIncrementInterval) {
        clearInterval(autoIncrementInterval);
        autoIncrementInterval = null;
        console.log('🛑 Auto-incrémentation arrêtée');
      }
    }
    
    function updateDataCount(count) {
      const dialogDataCount = document.getElementById('dialog-data-count');
      if (dialogDataCount) {
        // Animation flash pour rendre le changement visible
        dialogDataCount.style.transition = 'color 0.3s ease';
        dialogDataCount.style.color = '#16a34a'; // Vert
        dialogDataCount.textContent = count.toLocaleString('fr-FR');
        
        setTimeout(() => {
          dialogDataCount.style.color = ''; // Revenir à la couleur normale
        }, 500);
      }
      
      // Mettre à jour le compteur au-dessus de la carte
      if (activeCardCounterEl) {
        activeCardCounterEl.textContent = count.toLocaleString('fr-FR');
      }
      
      console.log(`📊 Compteur mis à jour: ${count} (Dialog: ${!!dialogDataCount}, Card: ${!!activeCardCounterEl})`);
    }

    // ===========================
    // AUTO-INCRÉMENTATION GLOBALE (compteurs au-dessus des cartes)
    // ===========================
    const cardAutoIntervals = new Map(); // Map<Element, number>

    function updateCounterElement(el, count) {
      if (!el) return;
      el.textContent = Number(count).toLocaleString('fr-FR');
    }

    function startCardCounterAutoIncrement(counterEl, initialCount, intervalMinutes, amount, storageKey) {
      if (!counterEl) return;

      // Stopper interval précédent pour cet élément
      const previous = cardAutoIntervals.get(counterEl);
      if (previous) clearInterval(previous);

      // Nettoyage + parsing de la valeur initiale
      const cleaned = String(initialCount).replace(/\s/g, '').replace(/[^\d]/g, '');
      const baseCount = parseInt(cleaned) || 2843;
      const step = parseInt(String(amount)) || 5;

      // Charger la valeur depuis localStorage si disponible
      let current = loadCountFromStorage(storageKey, baseCount, intervalMinutes, step);

      // Mettre à jour immédiatement l'affichage
      updateCounterElement(counterEl, current);

      const intervalMs = Number(intervalMinutes) * 60 * 1000;
      if (!Number.isFinite(intervalMs) || intervalMs <= 0) return;

      console.log('🔁 Auto-incrément global activé', { current, step, intervalMinutes, intervalMs });
      const id = setInterval(() => {
        current += step;
        updateCounterElement(counterEl, current);
        saveCountToStorage(storageKey, current);
        console.log('↗️ Compteur carte mis à jour', { current, step });
      }, intervalMs);

      cardAutoIntervals.set(counterEl, id);
    }

    function initGlobalAutoIncrementCounters() {
      // Pour chaque carte, lire les paramètres sur le bouton "Voir analyse IA"
      const buttons = document.querySelectorAll('.bet-card .btn-analysis');
      buttons.forEach((btn, index) => {
        try {
          const card = btn.closest('.bet-card');
          if (!card) return;

          // Compteur au-dessus de la carte
          const counterAbove = card.previousElementSibling;
          if (!counterAbove || !counterAbove.classList.contains('ai-counter-above')) return;
          const countEl = counterAbove.querySelector('span span');
          if (!countEl) return;

          // Paramètres
          const autoIncRaw = btn.dataset.autoIncrement;
          const enabled = String(autoIncRaw).toLowerCase() === 'true';
          if (!enabled) return;

          const rawInterval = btn.dataset.incrementInterval;
          const intervalParsed = Number.parseFloat(rawInterval);
          const interval = Number.isFinite(intervalParsed) && intervalParsed > 0 ? intervalParsed : 5;
          const amount = parseInt(btn.dataset.incrementAmount || '5') || 5;

          // Valeur initiale
          const initial = countEl.textContent || btn.dataset.aiDataCount || '2843';

          // Créer une clé unique pour cette carte
          const blockId = card.dataset.blockId || `bet-card-${index}`;
          const storageKey = `ai-counter-${blockId}`;

          startCardCounterAutoIncrement(countEl, initial, interval, amount, storageKey);
        } catch (e) {
          console.warn('❗Erreur init auto-incrément carte', e);
        }
      });
    }

    // ===========================
    // FONCTIONS PRINCIPALES
    // ===========================

    // Calculate return
    function calculateReturn(amount) {
      return (amount * currentMultiplier).toFixed(2);
    }

    // Update display
    function updateDisplay() {
      if (!currentCard) return;
      
      // Mise (votre mise)
      const betAmountSmall = currentCard.querySelector('.bet-amount-value-small');
      if (betAmountSmall) {
        betAmountSmall.textContent = '$' + currentBetAmount;
      }
      
      // Cashout (montant total)
      const cashoutAmount = currentCard.querySelector('.cashout-amount');
      if (cashoutAmount) {
        cashoutAmount.textContent = '$' + calculateReturn(currentBetAmount);
      }
      
      // Bénéfice
      const cashoutProfit = currentCard.querySelector('.cashout-profit');
      if (cashoutProfit) {
        const profit = (currentBetAmount * currentMultiplier - currentBetAmount).toFixed(2);
        cashoutProfit.textContent = '+$' + profit + ' bénéfice';
      }
      
      // Anciens éléments (pour compatibilité)
      const betDisplay = currentCard.querySelector('.bet-amount-value');
      const gainDisplay = currentCard.querySelector('.gain-value');
      
      if (betDisplay) {
        betDisplay.textContent = '$' + currentBetAmount;
      }
      if (gainDisplay) {
        gainDisplay.textContent = '$' + calculateReturn(currentBetAmount);
      }
    }

    // Set bet amount
    function setBetAmount(amount) {
      currentBetAmount = amount;
      updateDisplay();
      closeBetDialog();
    }

    // Custom bet amount
    function customBetAmount() {
      const amount = prompt('Entrez le montant de votre mise:');
      if (amount && !isNaN(amount) && amount > 0) {
        setBetAmount(parseFloat(amount));
      }
    }

    // Toggle sidebar (mobile)
    function toggleSidebar() {
      const sidebar = document.querySelector('.sidebar');
      const overlay = document.querySelector('.overlay');
      const headerToggle = document.querySelector('header .mobile-toggle');
      isMobileSidebarOpen = !isMobileSidebarOpen;
      
      if (isMobileSidebarOpen) {
        sidebar.classList.add('active');
        overlay.classList.add('active');
        document.body.classList.add('body-no-scroll');
        document.body.classList.add('sidebar-open');
        if (headerToggle) headerToggle.classList.add('active');
      } else {
        sidebar.classList.remove('active');
        overlay.classList.remove('active');
        document.body.classList.remove('body-no-scroll');
        document.body.classList.remove('sidebar-open');
        if (headerToggle) headerToggle.classList.remove('active');
      }
    }

    // Navigate to page
    function navigateTo(event, pageName) {
      if (event) {
        event.preventDefault();
      }

      // Vérifier l'accès
      const isUserLoggedIn = {{ user_is_logged_in | json }};
      const accessLevel = '{{ access_level }}';
      
      // Si paiement échoué, forcer la page payment-failed
      if (accessLevel === 'payment_failed' && pageName !== 'payment-failed') {
        performNavigation('payment-failed');
        return;
      }
      
      // Si pas connecté, forcer la page auth-required
      if (!isUserLoggedIn && pageName !== 'auth-required' && pageName !== 'payment-failed') {
        performNavigation('auth-required');
        return;
      }

      // Ne rien faire si on est déjà sur cette page
      if (currentPage === pageName) {
        return;
      }

      // Afficher le chargement AI pour les pages bet et parlay (seulement si accès autorisé)
      if ((pageName === 'bet' || pageName === 'parlay') && accessLevel !== 'payment_failed') {
        const loadingOverlay = document.getElementById('ai-loading-overlay');
        loadingOverlay.classList.add('active');
        document.body.classList.add('body-no-scroll');
        
        // 75% du temps: 0.7s, 25% du temps: 3s
        const loadingDuration = Math.random() < 0.75 ? 700 : 3000;
        
        setTimeout(() => {
          loadingOverlay.classList.remove('active');
          document.body.classList.remove('body-no-scroll');
          performNavigation(pageName);
        }, loadingDuration);
      } else {
        performNavigation(pageName);
      }
    }

    // Perform the actual navigation
    function performNavigation(pageName) {
      // Hide all pages
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });

      // Show selected page
      const targetPage = document.getElementById('page-' + pageName);
      if (targetPage) {
        targetPage.classList.add('active');
      }

      // Update active nav item
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
      });
      const navItem = document.querySelector(`.nav-item[data-page="${pageName}"]`);
      if (navItem) {
        navItem.classList.add('active');
      }

      // Close mobile sidebar
      if (isMobileSidebarOpen) {
        toggleSidebar();
      }

      // Update current page
      currentPage = pageName;

      // Persist current page for editor reloads
      try { localStorage.setItem('dashboard_current_page', pageName); } catch {}

      // Charger l'historique Supabase si on navigue vers ces pages
      if (pageName === 'historique-bet' && typeof window.loadBetHistory === 'function') {
        window.loadBetHistory();
      } else if (pageName === 'historique-parlay' && typeof window.loadParlayHistory === 'function') {
        window.loadParlayHistory();
      }

      // Update URL hash
      window.location.hash = pageName;
    }

    // Open bet dialog
    function openBetDialog(element) {
      currentCard = element.closest('.bet-card');
      const multiplier = parseFloat(element.dataset.multiplier);
      
      if (!isNaN(multiplier)) {
        currentMultiplier = multiplier;
      }
      
      document.getElementById('bet-dialog').classList.add('active');
    }

    // Close bet dialog
    function closeBetDialog() {
      document.getElementById('bet-dialog').classList.remove('active');
    }

    // Open analysis dialog
    function openAnalysisDialog(trigger) {
      const dialogWinPercentage = document.getElementById('dialog-win-percentage');
      const dialogProgressBar = document.getElementById('dialog-progress-bar');
      const dialogDataCount = document.getElementById('dialog-data-count');

      // Récupérer les valeurs depuis le bouton cliqué
      let pctRaw = trigger?.dataset?.winPercentage;
      let dataCountRaw = trigger?.dataset?.aiDataCount;

      // Récupérer les infos de template et équipes
      const sportType = (trigger?.dataset?.sportType || 'nhl').toLowerCase();
      const team1 = trigger?.dataset?.team1 || 'ÉQUIPE DOMICILE';
      const team2 = trigger?.dataset?.team2 || 'ÉQUIPE EXTÉRIEUR';
      
      // Récupérer les paramètres d'auto-incrémentation
      const autoIncrement = trigger?.dataset?.autoIncrement === 'true' || trigger?.dataset?.autoIncrement === true;
      const rawInterval = trigger?.dataset?.incrementInterval;
      const parsedInterval = Number.parseFloat(rawInterval);
      const incrementInterval = Number.isFinite(parsedInterval) && parsedInterval > 0 ? parsedInterval : 5;
      const incrementAmount = parseInt(trigger?.dataset?.incrementAmount) || 5;

      // Afficher le bon template
      const nhlEl = document.getElementById('template-nhl');
      const nflEl = document.getElementById('template-nfl');
      if (nhlEl && nflEl) {
        if (sportType === 'nfl') {
          nhlEl.style.display = 'none';
          nflEl.style.display = 'block';
        } else {
          nhlEl.style.display = 'block';
          nflEl.style.display = 'none';
        }
      }

      // Remplacer les placeholders d'équipes dans tout le contenu
      const contentRoot = document.getElementById('analysis-content');
      if (contentRoot) {
        const targets = contentRoot.querySelectorAll('.analysis-subsection-title, .analysis-subsection-content');
        targets.forEach((el) => {
          if (!el.dataset.template) {
            el.dataset.template = el.innerHTML;
          }
          el.innerHTML = el.dataset.template
            .replace(/Équipe domicile/g, team1)
            .replace(/Équipe extérieur/g, team2);
        });
      }

      // Fallback: chercher dans la carte parente si les data-attributes ne sont pas présents
      if (!pctRaw && trigger) {
        const card = trigger.closest('.bet-card');
        const confidenceEl = card?.querySelector('.confidence-percentage');
        if (confidenceEl) {
          pctRaw = confidenceEl.textContent;
        }
      }

      if (!dataCountRaw && trigger) {
        const card = trigger.closest('.bet-card');
        const counterAbove = card?.previousElementSibling;
        if (counterAbove?.classList?.contains('ai-counter-above')) {
          const countEl = counterAbove.querySelector('span span');
          if (countEl) {
            dataCountRaw = countEl.textContent;
            activeCardCounterEl = countEl; // Mémoriser l'élément à mettre à jour
          }
        }
      }

      // Normaliser et appliquer le pourcentage
      if (dialogWinPercentage && dialogProgressBar && pctRaw) {
        const pct = Math.max(0, Math.min(100, parseFloat(String(pctRaw).replace('%', '').replace(',', '.').trim())));
        if (!Number.isNaN(pct)) {
          dialogWinPercentage.textContent = String(pct).replace(/\.0+$/, '');
          dialogProgressBar.style.width = pct + '%';
        }
      }

      // Appliquer le data count
      if (dialogDataCount && dataCountRaw) {
        dialogDataCount.textContent = String(dataCountRaw).trim();
      }
      
      // Afficher l'overlay de chargement AI
      const loadingOverlay = document.getElementById('ai-loading-overlay');
      loadingOverlay.classList.add('active');
      document.body.classList.add('body-no-scroll');
      
      // Durée aléatoire entre 2 et 3 secondes (2000-3000ms)
      const randomDuration = Math.floor(Math.random() * 1000) + 2000;
      
      setTimeout(() => {
        // Cacher l'overlay de chargement
        loadingOverlay.classList.remove('active');
        document.body.classList.remove('body-no-scroll');
        
        // Mettre à jour l'heure actuelle
        const now = new Date();
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const timeElement = document.getElementById('analysis-time');
        if (timeElement) {
          timeElement.textContent = `${hours}:${minutes}`;
        }
        
        // Ouvrir le dialog d'analyse directement avec le contenu
        const dialog = document.getElementById('analysis-dialog');
        const loading = document.getElementById('loading-section');
        const content = document.getElementById('analysis-content');
        
        dialog.classList.add('active');
        loading.style.display = 'none';
        content.style.display = 'block';
        
        // Démarrer l'auto-incrémentation APRÈS l'ouverture du dialog
        if (autoIncrement) {
          console.log(`🎯 Paramètres auto-incrémentation:`, {
            enabled: autoIncrement,
            interval: `${incrementInterval} minutes`,
            intervalMs: incrementInterval * 60 * 1000,
            amount: incrementAmount,
            initialCount: dataCountRaw,
            cleanedCount: String(dataCountRaw).replace(/\s/g, '')
          });
          
          // Créer une clé unique pour cette carte
          const card = trigger?.closest('.bet-card');
          const blockId = card?.dataset?.blockId || `dialog-${dataCountRaw}`;
          const storageKey = `ai-dialog-${blockId}`;
          
          startAutoIncrement(dataCountRaw, incrementInterval, incrementAmount, storageKey);
        } else {
          console.log('⚠️ Auto-incrémentation désactivée');
        }
      }, randomDuration);
    }

    // Close analysis dialog
    function closeAnalysisDialog() {
      document.getElementById('analysis-dialog').classList.remove('active');
      // Arrêter l'auto-incrémentation lors de la fermeture
      stopAutoIncrement();
      activeCardCounterEl = null; // Réinitialiser la référence
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      updateDisplay();

      // Initialiser l'auto-incrémentation globale des compteurs au-dessus des cartes
      initGlobalAutoIncrementCounters();

      // Vérifier l'accès utilisateur
      const isUserLoggedIn = {{ user_is_logged_in | json }};
      const accessLevel = '{{ access_level }}';

      // Si paiement échoué, forcer la page payment-failed
      if (accessLevel === 'payment_failed') {
        performNavigation('payment-failed');
        // Désactiver tous les liens de navigation
        document.querySelectorAll('.nav-item, .desktop-nav-item').forEach(item => {
          item.style.pointerEvents = 'none';
          item.style.opacity = '0.5';
        });
        return;
      }

      // Si pas connecté, forcer l'affichage de la page de connexion requise
      if (!isUserLoggedIn) {
        performNavigation('auth-required');
        
        // Désactiver tous les liens de navigation
        document.querySelectorAll('.nav-item, .desktop-nav-item').forEach(item => {
          if (!item.dataset.page || item.dataset.page !== 'auth-required') {
            item.style.pointerEvents = 'none';
            item.style.opacity = '0.5';
          }
        });
        
        return; // Arrêter l'exécution normale
      }

      // Handle hash navigation with persistence (utilisateurs connectés uniquement)
      const hash = window.location.hash.substring(1);
      let savedPage = '';
      try { savedPage = localStorage.getItem('dashboard_current_page') || ''; } catch {}
      let targetPage = hash || savedPage || 'bet';

      // Si connecté mais que la page cible est 'auth-required' ou 'payment-failed', rediriger vers bet
      if (targetPage === 'auth-required' || targetPage === 'payment-failed') {
        targetPage = 'bet';
        // Nettoyer le localStorage et le hash
        try { localStorage.setItem('dashboard_current_page', 'bet'); } catch {}
        window.location.hash = '';
      }

      navigateTo(null, targetPage);

      // Update time display
      updateTime();
      setInterval(updateTime, 1000);

      // In Shopify editor, preserve the current page across partial reloads
      document.addEventListener('shopify:section:load', () => {
        try {
          const p = localStorage.getItem('dashboard_current_page');
          if (p && typeof performNavigation === 'function') {
            performNavigation(p);
          }
        } catch {}
      });
      document.addEventListener('shopify:section:select', () => {
        try {
          const p = localStorage.getItem('dashboard_current_page');
          if (p && typeof performNavigation === 'function') {
            performNavigation(p);
          }
        } catch {}
      });
    });

    // Update time display
    function updateTime() {
      const now = new Date();
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const timeString = `${hours}:${minutes}`;
      
      const sidebarTime = document.getElementById('sidebar-time');
      const headerTime = document.getElementById('header-time');
      const desktopTime = document.getElementById('desktop-time');
      
      if (sidebarTime) sidebarTime.textContent = timeString;
      if (headerTime) headerTime.textContent = timeString;
      if (desktopTime) desktopTime.textContent = timeString;
    }

    // Handle browser back/forward
    window.addEventListener('hashchange', () => {
      const hash = window.location.hash.substring(1);
      if (hash) {
        navigateTo(null, hash);
      }
    });

    // ===== GESTION DES MEMBRES CONNECTÉS LIVE =====
    const membersConfig = {
      base: {{ section.settings.members_base | default: 50 }},
      minIncrease: {{ section.settings.min_increase_per_change | default: 1 }},
      maxIncrease: {{ section.settings.max_increase_per_change | default: 5 }},
      minDecrease: {{ section.settings.min_decrease_per_change | default: 1 }},
      maxDecrease: {{ section.settings.max_decrease_per_change | default: 5 }},
      minUpdateInterval: {{ section.settings.min_update_interval_sec | default: 30 }},
      maxUpdateInterval: {{ section.settings.max_update_interval_sec | default: 90 }},
      transitionStep: {{ section.settings.transition_step | default: 3 }},
      // Heures de pointe
      peakStartHour: {{ section.settings.peak_start_hour | default: 18 }},
      peakEndHour: {{ section.settings.peak_end_hour | default: 23 }},
      peakTarget: {{ section.settings.peak_target_members | default: 100 }},
      // Heures creuses
      lowStartHour: {{ section.settings.low_start_hour | default: 2 }},
      lowEndHour: {{ section.settings.low_end_hour | default: 8 }},
      lowTarget: {{ section.settings.low_target_members | default: 25 }}
    };

    // Récupération des valeurs sauvegardées ou initialisation
    let currentMembers = membersConfig.base;
    let currentTarget = membersConfig.base;
    
    try {
      const savedMembers = localStorage.getItem('winabet_current_members');
      const savedTarget = localStorage.getItem('winabet_current_target');
      
      // Restauration indépendante de chaque valeur
      if (savedMembers !== null) {
        currentMembers = parseInt(savedMembers, 10);
        console.log('🔄 Compteur restauré:', currentMembers);
      } else {
        console.log('🎯 Nombre initial:', currentMembers);
      }
      
      if (savedTarget !== null) {
        currentTarget = parseInt(savedTarget, 10);
      } else {
        currentTarget = currentMembers; // Si pas de cible sauvegardée, utiliser le compteur actuel
      }
      
      // Écrire immédiatement les deux valeurs pour garantir leur présence
      localStorage.setItem('winabet_current_members', currentMembers.toString());
      localStorage.setItem('winabet_current_target', currentTarget.toString());
      
      // Mise à jour immédiate de l'affichage pour éviter le flash à 50
      const sidebarCount = document.getElementById('sidebar-member-count');
      const headerCount = document.getElementById('header-member-count');
      if (sidebarCount) sidebarCount.textContent = currentMembers;
      if (headerCount) headerCount.textContent = currentMembers;
      
    } catch (e) {
      console.log('⚠️ Impossible de restaurer le compteur:', e);
    }
    
    console.log('🎯 Membres Connectés Config:', membersConfig);

    function isInTimeRange(startHour, endHour) {
      const now = new Date();
      const currentHour = now.getHours();
      
      if (startHour <= endHour) {
        return currentHour >= startHour && currentHour <= endHour;
      } else {
        // Cas où la période traverse minuit (ex: 22h à 2h)
        return currentHour >= startHour || currentHour <= endHour;
      }
    }

    function isPeakHours() {
      return isInTimeRange(membersConfig.peakStartHour, membersConfig.peakEndHour);
    }

    function isLowHours() {
      return isInTimeRange(membersConfig.lowStartHour, membersConfig.lowEndHour);
    }

    function updateMemberCount(newCount) {
      const sidebarCount = document.getElementById('sidebar-member-count');
      const headerCount = document.getElementById('header-member-count');
      
      console.log('📊 Mise à jour membres:', currentMembers, '→', newCount);
      
      // Sauvegarder dans localStorage
      try {
        localStorage.setItem('winabet_current_members', newCount.toString());
      } catch (e) {
        console.log('⚠️ Impossible de sauvegarder le compteur:', e);
      }
      
      // Animation flip
      [sidebarCount, headerCount].forEach(element => {
        if (element) {
          element.style.animation = 'flip 0.6s ease-in-out';
          
          setTimeout(() => {
            element.textContent = newCount;
            element.style.animation = '';
            console.log('✅ Animation terminée pour:', element.id);
          }, 300);
        }
      });
    }

    function calculateNewMemberCount() {
      // Détermine la base cible selon l'heure
      let targetBase = membersConfig.base;
      let periodName = 'Normal';
      
      if (isPeakHours()) {
        targetBase = membersConfig.peakTarget;
        periodName = `Pointe (${targetBase} membres)`;
      } else if (isLowHours()) {
        targetBase = membersConfig.lowTarget;
        periodName = `Creuse (${targetBase} membres)`;
      }
      
      console.log(`🎯 Période ${periodName} | Target base: ${targetBase}`);
      
      // Fait évoluer graduellement currentTarget vers targetBase
      const targetDiff = targetBase - currentTarget;
      if (Math.abs(targetDiff) > 0) {
        const step = Math.min(membersConfig.transitionStep, Math.abs(targetDiff));
        currentTarget += targetDiff > 0 ? step : -step;
        console.log(`🎯 Transition: ${currentTarget} → ${targetBase} (step: ${step})`);
        
        // Sauvegarder la nouvelle cible
        try {
          localStorage.setItem('winabet_current_target', currentTarget.toString());
        } catch (e) {
          console.log('⚠️ Impossible de sauvegarder la cible:', e);
        }
      }
      
      // Décide aléatoirement si ça monte ou descend (50/50)
      const goingUp = Math.random() > 0.5;
      
      let variation;
      if (goingUp) {
        // Monte entre minIncrease et maxIncrease
        const range = membersConfig.maxIncrease - membersConfig.minIncrease;
        variation = membersConfig.minIncrease + Math.floor(Math.random() * (range + 1));
        console.log('⬆️ Montée de:', variation, `(entre ${membersConfig.minIncrease} et ${membersConfig.maxIncrease})`);
      } else {
        // Descend entre minDecrease et maxDecrease
        const range = membersConfig.maxDecrease - membersConfig.minDecrease;
        variation = -(membersConfig.minDecrease + Math.floor(Math.random() * (range + 1)));
        console.log('⬇️ Descente de:', Math.abs(variation), `(entre ${membersConfig.minDecrease} et ${membersConfig.maxDecrease})`);
      }
      
      let newCount = currentMembers + variation;
      
      // Garde le nombre proche de la cible actuelle avec une marge
      const minCount = Math.max(10, currentTarget - membersConfig.maxDecrease * 10);
      const maxCount = currentTarget + membersConfig.maxIncrease * 10;
      
      newCount = Math.max(minCount, Math.min(maxCount, newCount));
      
      return Math.floor(newCount);
    }

    // Fonction pour obtenir un intervalle aléatoire
    function getRandomInterval() {
      const min = membersConfig.minUpdateInterval;
      const max = membersConfig.maxUpdateInterval;
      const interval = Math.floor(Math.random() * (max - min + 1) + min) * 1000;
      console.log(`⏱️ Prochain changement dans ${interval / 1000} secondes`);
      return interval;
    }

    let updateTimer;
    
    // Fonction pour démarrer le prochain update
    function scheduleNextUpdate() {
      const newCount = calculateNewMemberCount();
      currentMembers = newCount;
      updateMemberCount(newCount);
      
      // Programme le prochain update avec un intervalle aléatoire
      const nextInterval = getRandomInterval();
      updateTimer = setTimeout(scheduleNextUpdate, nextInterval);
    }
    
    // Initial display
    updateMemberCount(currentMembers);
    
    // Démarrer le premier update après un intervalle aléatoire
    updateTimer = setTimeout(scheduleNextUpdate, getRandomInterval());

    // Système de scroll pour le header
    let lastScrollTop = 0;
    const header = document.querySelector('.header');
    
    window.addEventListener('scroll', function() {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      
      // Ajoute la classe 'scrolled' quand on scroll vers le bas (plus de 50px)
      if (scrollTop > 50) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
      
      lastScrollTop = scrollTop;
    });
  </script>

  <!-- CSS pour l'animation flip -->
  <style>
    @keyframes flip {
      0% {
        transform: rotateX(0deg);
        opacity: 1;
      }
      50% {
        transform: rotateX(90deg);
        opacity: 0;
      }
      100% {
        transform: rotateX(0deg);
        opacity: 1;
      }
    }

    .member-count {
      display: inline-block;
      min-width: 2ch;
      text-align: center;
    }
  </style>

  <!-- Configuration Supabase -->
  <script>
    window.SUPABASE_CONFIG = {
      url: 'https://ycvfyorgkhuxcosfrsxs.functions.supabase.co',
      shopDomain: '{{ shop.permanent_domain }}'
    };
  </script>

  <!-- Inclure le fichier JS d'historique Supabase -->
  <script src="{{ 'historique-supabase.js' | asset_url | append: '?v=' | append: 'now' | date: '%s' }}" defer></script>

</body>
</html>

{% schema %}
{
  "name": "Dashboard WINABET.AI",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Titre du Dashboard",
      "default": "WINABET.AI"
    },
    {
      "type": "header",
      "content": "👥 Membres Connectés Live"
    },
    {
      "type": "number",
      "id": "members_base",
      "label": "Nombre de base de membres",
      "default": 50,
      "info": "Nombre initial de membres connectés"
    },
    {
      "type": "number",
      "id": "min_increase_per_change",
      "label": "⬆️ Montée minimum par changement",
      "default": 1,
      "info": "Minimum que le nombre peut monter à chaque fois"
    },
    {
      "type": "number",
      "id": "max_increase_per_change",
      "label": "⬆️ Montée maximum par changement",
      "default": 5,
      "info": "Maximum que le nombre peut monter à chaque fois (aléatoire entre min et max)"
    },
    {
      "type": "number",
      "id": "min_decrease_per_change",
      "label": "⬇️ Descente minimum par changement",
      "default": 1,
      "info": "Minimum que le nombre peut descendre à chaque fois"
    },
    {
      "type": "number",
      "id": "max_decrease_per_change",
      "label": "⬇️ Descente maximum par changement",
      "default": 5,
      "info": "Maximum que le nombre peut descendre à chaque fois (aléatoire entre min et max)"
    },
    {
      "type": "number",
      "id": "min_update_interval_sec",
      "label": "⏱️ Intervalle minimum entre changements (sec)",
      "default": 30,
      "info": "Temps minimum en secondes entre chaque changement de nombre"
    },
    {
      "type": "number",
      "id": "max_update_interval_sec",
      "label": "⏱️ Intervalle maximum entre changements (sec)",
      "default": 90,
      "info": "Temps maximum en secondes entre chaque changement de nombre (l'intervalle sera aléatoire entre min et max)"
    },
    {
      "type": "number",
      "id": "transition_step",
      "label": "📊 Taille des tranches de transition",
      "default": 3,
      "info": "Nombre d'utilisateurs ajoutés/retirés par étape lors du passage d'une période à une autre (ex: 3 = transition graduelle par tranches de 3)"
    },
    {
      "type": "header",
      "content": "🔥 Heures de Pointe (Nombre Élevé)"
    },
    {
      "type": "number",
      "id": "peak_start_hour",
      "label": "Heure de début",
      "default": 18,
      "info": "Début des heures de pointe (format 24h, entre 0 et 23)"
    },
    {
      "type": "number",
      "id": "peak_end_hour",
      "label": "Heure de fin",
      "default": 23,
      "info": "Fin des heures de pointe (format 24h, entre 0 et 23)"
    },
    {
      "type": "number",
      "id": "peak_target_members",
      "label": "Nombre cible de membres",
      "default": 100,
      "info": "Nombre de membres connectés cible pendant les heures de pointe"
    },
    {
      "type": "header",
      "content": "💤 Heures Creuses (Nombre Bas)"
    },
    {
      "type": "number",
      "id": "low_start_hour",
      "label": "Heure de début",
      "default": 2,
      "info": "Début des heures creuses (format 24h, entre 0 et 23)"
    },
    {
      "type": "number",
      "id": "low_end_hour",
      "label": "Heure de fin",
      "default": 8,
      "info": "Fin des heures creuses (format 24h, entre 0 et 23)"
    },
    {
      "type": "number",
      "id": "low_target_members",
      "label": "Nombre cible de membres",
      "default": 25,
      "info": "Nombre de membres connectés cible pendant les heures creuses"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Sous-titre",
      "default": "Paris Sportifs Professionnels"
    }
  ],
  "blocks": [
    {
      "type": "bet_card",
      "name": "Carte de Pari",
      "settings": [
            {
              "type": "select",
              "id": "sport_type",
              "label": "🏒🏈 Type de sport pour l'analyse IA",
              "options": [
                {
                  "value": "nhl",
                  "label": "🏒 NHL (Hockey)"
                },
                {
                  "value": "nfl",
                  "label": "🏈 NFL (Football américain)"
                }
              ],
              "default": "nhl",
              "info": "Sélectionnez le template d'analyse à afficher"
            },
            {
              "type": "checkbox",
              "id": "auto_increment_enabled",
              "label": "🔄 Activer l'auto-incrémentation des données IA",
              "default": false,
              "info": "Les données IA analysées augmenteront automatiquement"
            },
            {
              "type": "select",
              "id": "auto_increment_interval",
              "label": "⏱️ Intervalle d'incrémentation",
              "options": [
                {
                  "value": "0.1",
                  "label": "⚡ Test: Toutes les 6 secondes"
                },
                {
                  "value": "0.5",
                  "label": "⚡ Test: Toutes les 30 secondes"
                },
                {
                  "value": "1",
                  "label": "Toutes les 1 minute"
                },
                {
                  "value": "2",
                  "label": "Toutes les 2 minutes"
                },
                {
                  "value": "5",
                  "label": "Toutes les 5 minutes"
                },
                {
                  "value": "10",
                  "label": "Toutes les 10 minutes"
                }
              ],
              "default": "5",
              "info": "Fréquence d'ajout automatique de données"
            },
            {
              "type": "select",
              "id": "auto_increment_amount",
              "label": "📊 Quantité à ajouter",
              "options": [
                {
                  "value": "1",
                  "label": "1 donnée"
                },
                {
                  "value": "5",
                  "label": "5 données"
                },
                {
                  "value": "10",
                  "label": "10 données"
                },
                {
                  "value": "25",
                  "label": "25 données"
                },
                {
                  "value": "50",
                  "label": "50 données"
                }
              ],
              "default": "5",
              "info": "Combien de données ajouter à chaque intervalle"
            },
        {
          "type": "number",
          "id": "ai_data_count",
          "label": "Nombre de données IA analysées",
          "default": 2857
        },
        {
          "type": "select",
          "id": "bet_type",
          "label": "📊 Type de pari",
          "options": [
            {
              "value": "moneyline",
              "label": "💰 Moneyline"
            },
            {
              "value": "spread",
              "label": "📏 Spread"
            },
            {
              "value": "over_under",
              "label": "🔢 Over/Under"
            }
          ],
          "default": "moneyline",
          "info": "Sélectionnez le type de pari à afficher"
        },
        {
          "type": "text",
          "id": "spread_value",
          "label": "📏 Valeur du Spread",
          "default": "-3.5",
          "info": "Ex: -3.5, +7.5, -10.5 (utilisé uniquement pour le type Spread)"
        },
        {
          "type": "select",
          "id": "spread_team",
          "label": "🎯 Équipe avec le Spread",
          "options": [
            {
              "value": "team1",
              "label": "Équipe 1"
            },
            {
              "value": "team2",
              "label": "Équipe 2"
            }
          ],
          "default": "team2",
          "info": "Quelle équipe a le spread (utilisé uniquement pour le type Spread)"
        },
        {
          "type": "select",
          "id": "over_under_type",
          "label": "🔼🔽 Over ou Under",
          "options": [
            {
              "value": "over",
              "label": "OVER"
            },
            {
              "value": "under",
              "label": "UNDER"
            }
          ],
          "default": "over",
          "info": "Sélectionnez OVER ou UNDER (utilisé uniquement pour le type Over/Under)"
        },
        {
          "type": "text",
          "id": "over_under_text_custom",
          "label": "✏️ Texte personnalisé Over/Under",
          "info": "Personnalisez le texte affiché (laissez vide pour utiliser OVER/UNDER par défaut)"
        },
        {
          "type": "text",
          "id": "over_under_value",
          "label": "🔢 Valeur Over/Under",
          "default": "225.5",
          "info": "Ex: 225.5, 45.5, 310.5 (utilisé uniquement pour le type Over/Under)"
        },
        {
          "type": "text",
          "id": "over_under_stat_type",
          "label": "📊 Type de statistique (optionnel)",
          "default": "points totaux",
          "info": "Ex: 'points totaux', 'yards de Patrick Mahomes' (utilisé uniquement pour le type Over/Under)"
        },
        {
          "type": "range",
          "id": "win_percentage",
          "label": "Pourcentage de chance de gagner (%)",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 92
        },
        {
          "type": "text",
          "id": "team1_name",
          "label": "Équipe 1 (à domicile)",
          "default": "VEGAS"
        },
        {
          "type": "image_picker",
          "id": "team1_logo",
          "label": "Logo Équipe 1"
        },
        {
          "type": "text",
          "id": "team1_bet_type",
          "label": "Type de pari Équipe 1",
          "default": "MONEYLINE",
          "info": "Ex: MONEYLINE, SPREAD, TOTAL"
        },
        {
          "type": "text",
          "id": "team2_name",
          "label": "Équipe 2 (à l'extérieur)",
          "default": "TAMPA BAY"
        },
        {
          "type": "image_picker",
          "id": "team2_logo",
          "label": "Logo Équipe 2"
        },
        {
          "type": "text",
          "id": "team2_bet_type",
          "label": "Type de pari Équipe 2",
          "default": "VICTOIRE",
          "info": "Ex: VICTOIRE, SPREAD, TOTAL"
        },
        {
          "type": "text",
          "id": "bet_units",
          "label": "Nombre d'unités",
          "default": "1",
          "info": "Nombre d'unités à parier"
        },
        {
          "type": "text",
          "id": "match_time",
          "label": "Heure du match",
          "default": "5:00 PM"
        },
        {
          "type": "text",
          "id": "match_date",
          "label": "Date du match",
          "default": "Aujourd'hui",
          "info": "Ex: Aujourd'hui, Demain, 28 Octobre"
        },
        {
          "type": "text",
          "id": "multiplier",
          "label": "Multiplicateur (cote)",
          "default": "1.74",
          "info": "Ex: 1.74, 2.50, 3.25"
        },
        {
          "type": "number",
          "id": "odds",
          "label": "Cote principale",
          "default": -136,
          "info": "Format américain (ex: -136, +150)"
        },
        {
          "type": "text",
          "id": "best_bookmaker",
          "label": "Meilleur bookmaker",
          "default": "DRAFTKINGS"
        },
        {
          "type": "number",
          "id": "best_odds",
          "label": "Meilleures cotes",
          "default": -135,
          "info": "Format américain"
        },
        {
          "type": "textarea",
          "id": "ai_explanation",
          "label": "Explication de l'IA",
          "default": "Notre IA a analysé plus de 2857 variables incluant les performances récentes, les statistiques head-to-head, les conditions de jeu, et les tendances du marché pour vous proposer ce pari avec une confiance élevée."
        },
        {
          "type": "checkbox",
          "id": "send_to_history",
          "label": "📋 Envoyer à l'historique",
          "default": false,
          "info": "Cochez pour déplacer cette carte vers l'historique"
        },
        {
          "type": "select",
          "id": "result",
          "label": "🎯 Résultat du pari",
          "options": [
            {
              "value": "pending",
              "label": "En attente"
            },
            {
              "value": "win",
              "label": "✅ Gagné (Win)"
            },
            {
              "value": "loose",
              "label": "❌ Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "Sélectionnez le résultat du pari"
        },
        {
          "type": "checkbox",
          "id": "show_card",
          "label": "Afficher cette carte",
          "default": true
        }
      ]
    },
    {
      "type": "parlay_card",
      "name": "🎲 Carte Parlay Avancée",
      "settings": [
            {
              "type": "select",
              "id": "sport_type",
              "label": "🏒🏈 Type de sport pour l'analyse IA",
              "options": [
                {
                  "value": "nhl",
                  "label": "🏒 NHL (Hockey)"
                },
                {
                  "value": "nfl",
                  "label": "🏈 NFL (Football américain)"
                }
              ],
              "default": "nhl",
              "info": "Sélectionnez le template d'analyse à afficher"
            },
            {
              "type": "checkbox",
              "id": "auto_increment_enabled",
              "label": "🔄 Activer l'auto-incrémentation des données IA",
              "default": false,
              "info": "Les données IA analysées augmenteront automatiquement"
            },
            {
              "type": "select",
              "id": "auto_increment_interval",
              "label": "⏱️ Intervalle d'incrémentation",
              "options": [
                {
                  "value": "0.1",
                  "label": "⚡ Test: Toutes les 6 secondes"
                },
                {
                  "value": "0.5",
                  "label": "⚡ Test: Toutes les 30 secondes"
                },
                {
                  "value": "1",
                  "label": "Toutes les 1 minute"
                },
                {
                  "value": "2",
                  "label": "Toutes les 2 minutes"
                },
                {
                  "value": "5",
                  "label": "Toutes les 5 minutes"
                },
                {
                  "value": "10",
                  "label": "Toutes les 10 minutes"
                }
              ],
              "default": "5",
              "info": "Fréquence d'ajout automatique de données"
            },
            {
              "type": "select",
              "id": "auto_increment_amount",
              "label": "📊 Quantité à ajouter",
              "options": [
                {
                  "value": "1",
                  "label": "1 donnée"
                },
                {
                  "value": "5",
                  "label": "5 données"
                },
                {
                  "value": "10",
                  "label": "10 données"
                },
                {
                  "value": "25",
                  "label": "25 données"
                },
                {
                  "value": "50",
                  "label": "50 données"
                }
              ],
              "default": "5",
              "info": "Combien de données ajouter à chaque intervalle"
            },
        {
          "type": "number",
          "id": "ai_data_count",
          "label": "Nombre de données IA analysées",
          "default": 2857
        },
        {
          "type": "select",
          "id": "bet_type",
          "label": "📊 Type de pari",
          "options": [
            {
              "value": "moneyline",
              "label": "💰 Moneyline"
            },
            {
              "value": "spread",
              "label": "📏 Spread"
            },
            {
              "value": "over_under",
              "label": "🔢 Over/Under"
            }
          ],
          "default": "moneyline",
          "info": "Sélectionnez le type de pari à afficher"
        },
        {
          "type": "text",
          "id": "spread_value",
          "label": "📏 Valeur du Spread",
          "default": "-3.5",
          "info": "Ex: -3.5, +7.5, -10.5 (utilisé uniquement pour le type Spread)"
        },
        {
          "type": "select",
          "id": "spread_team",
          "label": "🎯 Équipe avec le Spread",
          "options": [
            {
              "value": "team1",
              "label": "Équipe 1"
            },
            {
              "value": "team2",
              "label": "Équipe 2"
            }
          ],
          "default": "team2",
          "info": "Quelle équipe a le spread (utilisé uniquement pour le type Spread)"
        },
        {
          "type": "select",
          "id": "over_under_type",
          "label": "🔼🔽 Over ou Under",
          "options": [
            {
              "value": "over",
              "label": "OVER"
            },
            {
              "value": "under",
              "label": "UNDER"
            }
          ],
          "default": "over",
          "info": "Sélectionnez OVER ou UNDER (utilisé uniquement pour le type Over/Under)"
        },
        {
          "type": "text",
          "id": "over_under_value",
          "label": "🔢 Valeur Over/Under",
          "default": "225.5",
          "info": "Ex: 225.5, 45.5, 310.5 (utilisé uniquement pour le type Over/Under)"
        },
        {
          "type": "text",
          "id": "over_under_stat_type",
          "label": "📊 Type de statistique (optionnel)",
          "default": "points totaux",
          "info": "Ex: 'points totaux', 'yards de Patrick Mahomes' (utilisé uniquement pour le type Over/Under)"
        },
        {
          "type": "range",
          "id": "win_percentage",
          "label": "Pourcentage de chance de gagner (%)",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 92
        },
        {
          "type": "header",
          "content": "🎯 LEG 1"
        },
        {
          "type": "text",
          "id": "leg1_team1_name",
          "label": "Équipe 1 (à domicile)",
          "default": "VEGAS"
        },
        {
          "type": "image_picker",
          "id": "leg1_team1_logo",
          "label": "Logo Équipe 1"
        },
        {
          "type": "text",
          "id": "leg1_team2_name",
          "label": "Équipe 2 (à l'extérieur)",
          "default": "TAMPA BAY"
        },
        {
          "type": "image_picker",
          "id": "leg1_team2_logo",
          "label": "Logo Équipe 2"
        },
        {
          "type": "text",
          "id": "leg1_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg1_bet_type",
          "label": "📊 Type de pari",
          "options": [
            {"value": "moneyline", "label": "💰 Moneyline"},
            {"value": "spread", "label": "📏 Spread"},
            {"value": "over_under", "label": "🔢 Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg1_spread_value",
          "label": "📏 Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg1_spread_team",
          "label": "🎯 Équipe avec le Spread",
          "options": [
            {"value": "team1", "label": "Équipe 1"},
            {"value": "team2", "label": "Équipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg1_over_under_type",
          "label": "🔼🔽 Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg1_over_under_text_custom",
          "label": "✏️ Texte personnalisé Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par défaut)"
        },
        {
          "type": "text",
          "id": "leg1_over_under_value",
          "label": "🔢 Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg1_over_under_stat_type",
          "label": "📊 Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg1_result",
          "label": "✅❌ Résultat de la Leg 1",
          "options": [
            {
              "value": "pending",
              "label": "⏳ En attente"
            },
            {
              "value": "win",
              "label": "✅ Gagné (Win)"
            },
            {
              "value": "loose",
              "label": "❌ Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "Sélectionnez le résultat de cette leg"
        },
        {
          "type": "header",
          "content": "🎯 LEG 2"
        },
        {
          "type": "text",
          "id": "leg2_team1_name",
          "label": "Équipe 1 (à domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg2_team1_logo",
          "label": "Logo Équipe 1"
        },
        {
          "type": "text",
          "id": "leg2_team2_name",
          "label": "Équipe 2 (à l'extérieur)"
        },
        {
          "type": "image_picker",
          "id": "leg2_team2_logo",
          "label": "Logo Équipe 2"
        },
        {
          "type": "text",
          "id": "leg2_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg2_bet_type",
          "label": "📊 Type de pari",
          "options": [
            {"value": "moneyline", "label": "💰 Moneyline"},
            {"value": "spread", "label": "📏 Spread"},
            {"value": "over_under", "label": "🔢 Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg2_spread_value",
          "label": "📏 Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg2_spread_team",
          "label": "🎯 Équipe avec le Spread",
          "options": [
            {"value": "team1", "label": "Équipe 1"},
            {"value": "team2", "label": "Équipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg2_over_under_type",
          "label": "🔼🔽 Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg2_over_under_text_custom",
          "label": "✏️ Texte personnalisé Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par défaut)"
        },
        {
          "type": "text",
          "id": "leg2_over_under_value",
          "label": "🔢 Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg2_over_under_stat_type",
          "label": "📊 Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg2_result",
          "label": "✅❌ Résultat de la Leg 2",
          "options": [
            {
              "value": "pending",
              "label": "⏳ En attente"
            },
            {
              "value": "win",
              "label": "✅ Gagné (Win)"
            },
            {
              "value": "loose",
              "label": "❌ Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "Sélectionnez le résultat de cette leg"
        },
        {
          "type": "header",
          "content": "🎯 LEG 3"
        },
        {
          "type": "text",
          "id": "leg3_team1_name",
          "label": "Équipe 1 (à domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg3_team1_logo",
          "label": "Logo Équipe 1"
        },
        {
          "type": "text",
          "id": "leg3_team2_name",
          "label": "Équipe 2 (à l'extérieur)"
        },
        {
          "type": "image_picker",
          "id": "leg3_team2_logo",
          "label": "Logo Équipe 2"
        },
        {
          "type": "text",
          "id": "leg3_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg3_bet_type",
          "label": "📊 Type de pari",
          "options": [
            {"value": "moneyline", "label": "💰 Moneyline"},
            {"value": "spread", "label": "📏 Spread"},
            {"value": "over_under", "label": "🔢 Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg3_spread_value",
          "label": "📏 Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg3_spread_team",
          "label": "🎯 Équipe avec le Spread",
          "options": [
            {"value": "team1", "label": "Équipe 1"},
            {"value": "team2", "label": "Équipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg3_over_under_type",
          "label": "🔼🔽 Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg3_over_under_text_custom",
          "label": "✏️ Texte personnalisé Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par défaut)"
        },
        {
          "type": "text",
          "id": "leg3_over_under_value",
          "label": "🔢 Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg3_over_under_stat_type",
          "label": "📊 Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg3_result",
          "label": "✅❌ Résultat de la Leg 3",
          "options": [
            {
              "value": "pending",
              "label": "⏳ En attente"
            },
            {
              "value": "win",
              "label": "✅ Gagné (Win)"
            },
            {
              "value": "loose",
              "label": "❌ Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "Sélectionnez le résultat de cette leg"
        },
        {
          "type": "header",
          "content": "🎯 LEG 4"
        },
        {
          "type": "text",
          "id": "leg4_team1_name",
          "label": "Équipe 1 (à domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg4_team1_logo",
          "label": "Logo Équipe 1"
        },
        {
          "type": "text",
          "id": "leg4_team2_name",
          "label": "Équipe 2 (à l'extérieur)"
        },
        {
          "type": "image_picker",
          "id": "leg4_team2_logo",
          "label": "Logo Équipe 2"
        },
        {
          "type": "text",
          "id": "leg4_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg4_bet_type",
          "label": "📊 Type de pari",
          "options": [
            {"value": "moneyline", "label": "💰 Moneyline"},
            {"value": "spread", "label": "📏 Spread"},
            {"value": "over_under", "label": "🔢 Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg4_spread_value",
          "label": "📏 Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg4_spread_team",
          "label": "🎯 Équipe avec le Spread",
          "options": [
            {"value": "team1", "label": "Équipe 1"},
            {"value": "team2", "label": "Équipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg4_over_under_type",
          "label": "🔼🔽 Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg4_over_under_text_custom",
          "label": "✏️ Texte personnalisé Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par défaut)"
        },
        {
          "type": "text",
          "id": "leg4_over_under_value",
          "label": "🔢 Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg4_over_under_stat_type",
          "label": "📊 Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg4_result",
          "label": "✅❌ Résultat de la Leg 4",
          "options": [
            {
              "value": "pending",
              "label": "⏳ En attente"
            },
            {
              "value": "win",
              "label": "✅ Gagné (Win)"
            },
            {
              "value": "loose",
              "label": "❌ Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "Sélectionnez le résultat de cette leg"
        },
        {
          "type": "header",
          "content": "🎯 LEG 5"
        },
        {
          "type": "text",
          "id": "leg5_team1_name",
          "label": "Équipe 1 (à domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg5_team1_logo",
          "label": "Logo Équipe 1"
        },
        {
          "type": "text",
          "id": "leg5_team2_name",
          "label": "Équipe 2 (à l'extérieur)"
        },
        {
          "type": "image_picker",
          "id": "leg5_team2_logo",
          "label": "Logo Équipe 2"
        },
        {
          "type": "text",
          "id": "leg5_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg5_bet_type",
          "label": "📊 Type de pari",
          "options": [
            {"value": "moneyline", "label": "💰 Moneyline"},
            {"value": "spread", "label": "📏 Spread"},
            {"value": "over_under", "label": "🔢 Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg5_spread_value",
          "label": "📏 Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg5_spread_team",
          "label": "🎯 Équipe avec le Spread",
          "options": [
            {"value": "team1", "label": "Équipe 1"},
            {"value": "team2", "label": "Équipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg5_over_under_type",
          "label": "🔼🔽 Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg5_over_under_text_custom",
          "label": "✏️ Texte personnalisé Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par défaut)"
        },
        {
          "type": "text",
          "id": "leg5_over_under_value",
          "label": "🔢 Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg5_over_under_stat_type",
          "label": "📊 Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg5_result",
          "label": "✅❌ Résultat de la Leg 5",
          "options": [
            {
              "value": "pending",
              "label": "⏳ En attente"
            },
            {
              "value": "win",
              "label": "✅ Gagné (Win)"
            },
            {
              "value": "loose",
              "label": "❌ Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "Sélectionnez le résultat de cette leg"
        },
        {
          "type": "header",
          "content": "🎯 LEG 6"
        },
        {
          "type": "text",
          "id": "leg6_team1_name",
          "label": "Équipe 1 (à domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg6_team1_logo",
          "label": "Logo Équipe 1"
        },
        {
          "type": "text",
          "id": "leg6_team2_name",
          "label": "Équipe 2 (à l'extérieur)"
        },
        {
          "type": "image_picker",
          "id": "leg6_team2_logo",
          "label": "Logo Équipe 2"
        },
        {
          "type": "text",
          "id": "leg6_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg6_bet_type",
          "label": "📊 Type de pari",
          "options": [
            {"value": "moneyline", "label": "💰 Moneyline"},
            {"value": "spread", "label": "📏 Spread"},
            {"value": "over_under", "label": "🔢 Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg6_spread_value",
          "label": "📏 Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg6_spread_team",
          "label": "🎯 Équipe avec le Spread",
          "options": [
            {"value": "team1", "label": "Équipe 1"},
            {"value": "team2", "label": "Équipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg6_over_under_type",
          "label": "🔼🔽 Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg6_over_under_text_custom",
          "label": "✏️ Texte personnalisé Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par défaut)"
        },
        {
          "type": "text",
          "id": "leg6_over_under_value",
          "label": "🔢 Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg6_over_under_stat_type",
          "label": "📊 Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg6_result",
          "label": "✅❌ Résultat de la Leg 6",
          "options": [
            {
              "value": "pending",
              "label": "⏳ En attente"
            },
            {
              "value": "win",
              "label": "✅ Gagné (Win)"
            },
            {
              "value": "loose",
              "label": "❌ Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "Sélectionnez le résultat de cette leg"
        },
        {
          "type": "header",
          "content": "🎯 LEG 7"
        },
        {
          "type": "text",
          "id": "leg7_team1_name",
          "label": "Équipe 1 (à domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg7_team1_logo",
          "label": "Logo Équipe 1"
        },
        {
          "type": "text",
          "id": "leg7_team2_name",
          "label": "Équipe 2 (à l'extérieur)"
        },
        {
          "type": "image_picker",
          "id": "leg7_team2_logo",
          "label": "Logo Équipe 2"
        },
        {
          "type": "text",
          "id": "leg7_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg7_bet_type",
          "label": "📊 Type de pari",
          "options": [
            {"value": "moneyline", "label": "💰 Moneyline"},
            {"value": "spread", "label": "📏 Spread"},
            {"value": "over_under", "label": "🔢 Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg7_spread_value",
          "label": "📏 Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg7_spread_team",
          "label": "🎯 Équipe avec le Spread",
          "options": [
            {"value": "team1", "label": "Équipe 1"},
            {"value": "team2", "label": "Équipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg7_over_under_type",
          "label": "🔼🔽 Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg7_over_under_text_custom",
          "label": "✏️ Texte personnalisé Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par défaut)"
        },
        {
          "type": "text",
          "id": "leg7_over_under_value",
          "label": "🔢 Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg7_over_under_stat_type",
          "label": "📊 Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg7_result",
          "label": "✅❌ Résultat de la Leg 7",
          "options": [
            {
              "value": "pending",
              "label": "⏳ En attente"
            },
            {
              "value": "win",
              "label": "✅ Gagné (Win)"
            },
            {
              "value": "loose",
              "label": "❌ Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "Sélectionnez le résultat de cette leg"
        },
        {
          "type": "header",
          "content": "🎯 LEG 8"
        },
        {
          "type": "text",
          "id": "leg8_team1_name",
          "label": "Équipe 1 (à domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg8_team1_logo",
          "label": "Logo Équipe 1"
        },
        {
          "type": "text",
          "id": "leg8_team2_name",
          "label": "Équipe 2 (à l'extérieur)"
        },
        {
          "type": "image_picker",
          "id": "leg8_team2_logo",
          "label": "Logo Équipe 2"
        },
        {
          "type": "text",
          "id": "leg8_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg8_bet_type",
          "label": "📊 Type de pari",
          "options": [
            {"value": "moneyline", "label": "💰 Moneyline"},
            {"value": "spread", "label": "📏 Spread"},
            {"value": "over_under", "label": "🔢 Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg8_spread_value",
          "label": "📏 Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg8_spread_team",
          "label": "🎯 Équipe avec le Spread",
          "options": [
            {"value": "team1", "label": "Équipe 1"},
            {"value": "team2", "label": "Équipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg8_over_under_type",
          "label": "🔼🔽 Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg8_over_under_text_custom",
          "label": "✏️ Texte personnalisé Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par défaut)"
        },
        {
          "type": "text",
          "id": "leg8_over_under_value",
          "label": "🔢 Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg8_over_under_stat_type",
          "label": "📊 Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg8_result",
          "label": "✅❌ Résultat de la Leg 8",
          "options": [
            {
              "value": "pending",
              "label": "⏳ En attente"
            },
            {
              "value": "win",
              "label": "✅ Gagné (Win)"
            },
            {
              "value": "loose",
              "label": "❌ Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "Sélectionnez le résultat de cette leg"
        },
        {
          "type": "header",
          "content": "🎯 LEG 9"
        },
        {
          "type": "text",
          "id": "leg9_team1_name",
          "label": "Équipe 1 (à domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg9_team1_logo",
          "label": "Logo Équipe 1"
        },
        {
          "type": "text",
          "id": "leg9_team2_name",
          "label": "Équipe 2 (à l'extérieur)"
        },
        {
          "type": "image_picker",
          "id": "leg9_team2_logo",
          "label": "Logo Équipe 2"
        },
        {
          "type": "text",
          "id": "leg9_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg9_bet_type",
          "label": "📊 Type de pari",
          "options": [
            {"value": "moneyline", "label": "💰 Moneyline"},
            {"value": "spread", "label": "📏 Spread"},
            {"value": "over_under", "label": "🔢 Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg9_spread_value",
          "label": "📏 Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg9_spread_team",
          "label": "🎯 Équipe avec le Spread",
          "options": [
            {"value": "team1", "label": "Équipe 1"},
            {"value": "team2", "label": "Équipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg9_over_under_type",
          "label": "🔼🔽 Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg9_over_under_text_custom",
          "label": "✏️ Texte personnalisé Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par défaut)"
        },
        {
          "type": "text",
          "id": "leg9_over_under_value",
          "label": "🔢 Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg9_over_under_stat_type",
          "label": "📊 Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg9_result",
          "label": "✅❌ Résultat de la Leg 9",
          "options": [
            {
              "value": "pending",
              "label": "⏳ En attente"
            },
            {
              "value": "win",
              "label": "✅ Gagné (Win)"
            },
            {
              "value": "loose",
              "label": "❌ Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "Sélectionnez le résultat de cette leg"
        },
        {
          "type": "header",
          "content": "🎯 LEG 10"
        },
        {
          "type": "text",
          "id": "leg10_team1_name",
          "label": "Équipe 1 (à domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg10_team1_logo",
          "label": "Logo Équipe 1"
        },
        {
          "type": "text",
          "id": "leg10_team2_name",
          "label": "Équipe 2 (à l'extérieur)"
        },
        {
          "type": "image_picker",
          "id": "leg10_team2_logo",
          "label": "Logo Équipe 2"
        },
        {
          "type": "text",
          "id": "leg10_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg10_bet_type",
          "label": "📊 Type de pari",
          "options": [
            {"value": "moneyline", "label": "💰 Moneyline"},
            {"value": "spread", "label": "📏 Spread"},
            {"value": "over_under", "label": "🔢 Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg10_spread_value",
          "label": "📏 Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg10_spread_team",
          "label": "🎯 Équipe avec le Spread",
          "options": [
            {"value": "team1", "label": "Équipe 1"},
            {"value": "team2", "label": "Équipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg10_over_under_type",
          "label": "🔼🔽 Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg10_over_under_text_custom",
          "label": "✏️ Texte personnalisé Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par défaut)"
        },
        {
          "type": "text",
          "id": "leg10_over_under_value",
          "label": "🔢 Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg10_over_under_stat_type",
          "label": "📊 Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg10_result",
          "label": "✅❌ Résultat de la Leg 10",
          "options": [
            {
              "value": "pending",
              "label": "⏳ En attente"
            },
            {
              "value": "win",
              "label": "✅ Gagné (Win)"
            },
            {
              "value": "loose",
              "label": "❌ Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "Sélectionnez le résultat de cette leg"
        },
        {
          "type": "text",
          "id": "bet_units",
          "label": "Nombre d'unités",
          "default": "1",
          "info": "Nombre d'unités à parier"
        },
        {
          "type": "text",
          "id": "match_time",
          "label": "Heure du match",
          "default": "5:00 PM"
        },
        {
          "type": "text",
          "id": "match_date",
          "label": "Date du match",
          "default": "Aujourd'hui",
          "info": "Ex: Aujourd'hui, Demain, 28 Octobre"
        },
        {
          "type": "text",
          "id": "multiplier",
          "label": "Multiplicateur (cote)",
          "default": "1.74",
          "info": "Ex: 1.74, 2.50, 3.25"
        },
        {
          "type": "number",
          "id": "odds",
          "label": "Cote principale",
          "default": -136,
          "info": "Format américain (ex: -136, +150)"
        },
        {
          "type": "text",
          "id": "best_bookmaker",
          "label": "Meilleur bookmaker",
          "default": "DRAFTKINGS"
        },
        {
          "type": "number",
          "id": "best_odds",
          "label": "Meilleures cotes",
          "default": -135,
          "info": "Format américain"
        },
        {
          "type": "textarea",
          "id": "ai_explanation",
          "label": "Explication de l'IA",
          "default": "Notre IA a analysé plus de 2857 variables incluant les performances récentes, les statistiques head-to-head, les conditions de jeu, et les tendances du marché pour vous proposer ce pari avec une confiance élevée."
        },
        {
          "type": "checkbox",
          "id": "send_to_history",
          "label": "📋 Envoyer à l'historique",
          "default": false,
          "info": "Cochez pour déplacer cette carte vers l'historique"
        },
        {
          "type": "select",
          "id": "result",
          "label": "🎯 Résultat du pari",
          "options": [
            {
              "value": "pending",
              "label": "En attente"
            },
            {
              "value": "win",
              "label": "✅ Gagné (Win)"
            },
            {
              "value": "loose",
              "label": "❌ Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "Sélectionnez le résultat du pari"
        },
        {
          "type": "checkbox",
          "id": "show_card",
          "label": "Afficher cette carte",
          "default": true
        }
      ]
    }
  ],
  "max_blocks": 20,
  "presets": [
    {
      "name": "Dashboard WINABET.AI",
      "blocks": [
        {
          "type": "bet_card",
          "settings": {
            "ai_data_count": 2843,
            "win_percentage": 92,
            "team1_name": "ST. LOUIS",
            "team1_bet_type": "MONEYLINE",
            "team2_name": "PITTSBURGH",
            "team2_bet_type": "VICTOIRE",
            "match_time": "7:00 PM",
            "match_date": "Aujourd'hui",
            "multiplier": "1.95",
            "bet_units": "1",
            "odds": -105,
            "best_bookmaker": "DRAFTKINGS",
            "best_odds": -105,
            "show_card": true
          }
        },
        {
          "type": "parlay_card",
          "settings": {
            "ai_data_count": 5214,
            "win_percentage": 78,
            "leg1_team1_name": "VEGAS",
            "leg1_team2_name": "TAMPA BAY",
            "leg1_bet_type": "moneyline",
            "leg1_match_time": "7:00 PM",
            "multiplier": "5.24",
            "bet_units": "1",
            "odds": 495,
            "best_bookmaker": "DRAFTKINGS",
            "best_odds": 495,
            "show_card": true
          }
        }
      ]
    }
  ]
}
{% endschema %}