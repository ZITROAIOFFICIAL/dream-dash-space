<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WINABET.AI - Dashboard Paris Sportifs</title>
  {% render 'dashboard-styles' %}
</head>
<body>
  <!-- Mobile Toggle Button -->
  <button class="mobile-toggle" onclick="toggleSidebar()" aria-label="Toggle menu">
    <svg class="mobile-toggle-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h16"/>
    </svg>
  </button>

  <!-- Overlay -->
  <div class="overlay" onclick="toggleSidebar()"></div>

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <span class="text-foreground">WIN</span><span class="text-primary">A</span><span class="text-foreground">BET</span><span class="text-primary text-sm">.AI</span>
      </div>
    </div>

    <!-- AI Update Indicator in Sidebar -->
    <div class="header-ai-update" style="display: flex; width: 100%; justify-content: flex-start; align-items: center; padding: 1rem 0 1rem 1rem; margin: 0; text-align: left; gap: 1rem; border-bottom: 1px solid #16a34a;">
      <div class="ai-spinner">
        <span class="ai-badge">IA</span>
      </div>
      <span class="ai-update-text" style="color: #ffffff; font-weight: 600; font-size: 0.75rem;">Derni√®re mise √† jour IA : <span id="sidebar-time">17:34</span></span>
      
      <!-- S√©parateur visible via bordure -->
      <!-- Membre connect√© -->
      <div style="display: flex; align-items: center; gap: 0.5rem; border-left: 2px solid #16a34a; padding-left: 0.75rem; margin-left: 0.75rem;">
        <span class="member-connected-text" style="color: rgba(255, 255, 255, 0.95); font-size: 0.75rem; font-weight: 600;">Membre connect√© live : <span id="sidebar-member-count" class="member-count">{{ section.settings.members_base | default: 50 }}</span></span>
        <div class="member-indicator-dot" style="width: 8px; height: 8px; min-width: 8px; min-height: 8px; border-radius: 50%; background-color: #16a34a; flex-shrink: 0; display: block; box-shadow: 0 0 4px rgba(22,163,74,0.8);"></div>
      </div>
    </div>

    <nav class="sidebar-nav">
      <a class="nav-item active" data-page="bet" onclick="navigateTo(event, 'bet')">
        <div class="nav-item-content">
          <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
            <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
            <path d="M4 22h16"></path>
            <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
            <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
            <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
          </svg>
          <span>BET DU JOUR</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" data-page="parlay" onclick="navigateTo(event, 'parlay')">
        <div class="nav-item-content">
          <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"></path>
            <path d="m6.08 9.5-3.5 1.6a1 1 0 0 0 0 1.81l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9a1 1 0 0 0 0-1.83l-3.5-1.59"></path>
            <path d="m6.08 14.5-3.5 1.6a1 1 0 0 0 0 1.81l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9a1 1 0 0 0 0-1.83l-3.5-1.59"></path>
          </svg>
          <span>PARLAY DU JOUR</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" data-page="historique-bet" onclick="navigateTo(event, 'historique-bet')">
        <div class="nav-item-content">
          <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
            <path d="M3 3v5h5"></path>
            <path d="M12 7v5l4 2"></path>
          </svg>
          <span>HISTORIQUE BET DU JOUR</span>
          <svg class="nav-icon-small" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
            <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
            <path d="M4 22h16"></path>
            <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
            <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
            <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
          </svg>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" data-page="historique-parlay" onclick="navigateTo(event, 'historique-parlay')">
        <div class="nav-item-content">
          <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          <span>HISTORIQUE PARLAY DU JOUR</span>
          <svg class="nav-icon-small" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"></path>
            <path d="m6.08 9.5-3.5 1.6a1 1 0 0 0 0 1.81l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9a1 1 0 0 0 0-1.83l-3.5-1.59"></path>
            <path d="m6.08 14.5-3.5 1.6a1 1 0 0 0 0 1.81l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9a1 1 0 0 0 0-1.83l-3.5-1.59"></path>
          </svg>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" data-page="strategy" onclick="navigateTo(event, 'strategy')">
        <div class="nav-item-content">
          <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
            <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
            <path d="M4 22h16"></path>
            <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
            <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
            <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
          </svg>
          <span>NOTRE STRAT√âGIE</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" href="https://winabet.ai/apps/memberships">
        <div class="nav-item-content">
          <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          <span>MON COMPTE</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" href="https://winabet.ai">
        <div class="nav-item-content">
          <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <path d="M16 10a4 4 0 0 1-8 0"></path>
          </svg>
          <span>BOUTIQUE</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" data-page="support" onclick="navigateTo(event, 'support')">
        <div class="nav-item-content">
          <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path>
          </svg>
          <span>SUPPORT</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>
    </nav>

    <div class="sidebar-footer">
      ¬© 2024 WINABET.AI
    </div>
  </aside>

  <!-- Header -->
  <header class="header" style="border-bottom: 1px solid #16a34a; align-items: stretch;">
    <div class="header-logo">
      <div class="logo">
        <span class="text-foreground">WIN</span><span class="text-primary">A</span><span class="text-foreground">BET</span><span class="text-primary text-sm">.AI</span>
      </div>
    </div>
    <div class="header-ai-update" style="display: flex; width: 100%; justify-content: center; align-items: center; padding: 0.5rem 0; margin: 0; text-align: center; gap: 1rem;">
      <div class="ai-spinner">
        <span class="ai-badge">IA</span>
      </div>
      <span class="ai-update-text" style="color: #ffffff; font-weight: 600; font-size: 0.75rem;">Derni√®re mise √† jour IA : <span id="header-time">17:34</span></span>
      
      <!-- S√©parateur visible via bordure -->
      <!-- Membre connect√© -->
      <div style="display: flex; align-items: center; gap: 0.5rem; border-left: 2px solid #16a34a; padding-left: 0.75rem; margin-left: 0.75rem;">
        <span style="color: rgba(255, 255, 255, 0.95); font-size: 0.75rem; font-weight: 600;">Membre connect√© live : <span id="header-member-count" class="member-count">{{ section.settings.members_base | default: 50 }}</span></span>
        <div style="width: 8px; height: 8px; min-width: 8px; min-height: 8px; border-radius: 50%; background-color: #16a34a; flex-shrink: 0; display: block; box-shadow: 0 0 4px rgba(22,163,74,0.8);"></div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- PAGE 1: BET DU JOUR -->
    <div id="page-bet" class="page active">
      <div class="container">
        <h1>BET DU JOUR</h1>
        <p class="subtitle">Les bet avec la meilleur probabilit√© de r√©ussite aujourd'hui. Nous affichons tous les bet avec minimum de 70% de chance de gagner selon notre IA.</p>

        {% assign bet_cards = section.blocks | where: 'type', 'bet_card' %}
        {% if bet_cards.size > 0 %}
          {% for block in bet_cards %}
            <!-- Wrapper toujours pr√©sent m√™me si show_card est false -->
            <!-- AI Data Counter Above Card -->
            {% if block.settings.show_card and block.settings.send_to_history != true %}
              <div class="ai-counter-above">
                <div class="ai-spinner">
                  <span class="ai-badge">IA</span>
                </div>
                <span><span>{{ block.settings.ai_data_count | default: 2843 }}</span> DONN√âES ANALYS√âES PAR NOTRE IA POUR CE BET</span>
              </div>
            {% endif %}

            <div class="bet-card" style="{% if block.settings.send_to_history == true or block.settings.show_card != true %}display:none{% endif %}"
                   {{ block.shopify_attributes }}
                   data-block-type="bet_card"
                   data-block-id="{{ block.id }}"
                   data-sport-type="{{ block.settings.sport_type | default: 'nhl' }}"
                   data-ai-data-count="{{ block.settings.ai_data_count | default: 2843 }}"
                   data-win-percentage="{{ block.settings.win_percentage | default: 92 }}"
                   data-bet-type="{{ block.settings.bet_type | default: 'moneyline' }}"
                   data-team1-name="{{ block.settings.team1_name }}"
                   data-team1-logo="{{ block.settings.team1_logo | image_url: width: 200 }}"
                   data-team2-name="{{ block.settings.team2_name }}"
                   data-team2-logo="{{ block.settings.team2_logo | image_url: width: 200 }}"
                   data-match-time="{{ block.settings.match_time }}"
                   data-match-date="{{ block.settings.match_date }}"
                   data-multiplier="{{ block.settings.multiplier }}"
                   data-bet-units="{{ block.settings.bet_units }}"
                   data-odds="{{ block.settings.odds }}"
                   data-best-bookmaker="{{ block.settings.best_bookmaker }}"
                   data-best-odds="{{ block.settings.best_odds }}"
                   data-result="{{ block.settings.result | default: 'pending' }}"
                   data-send-to-history="{{ block.settings.send_to_history }}"
                   data-spread-value="{{ block.settings.spread_value }}"
                   data-spread-team="{{ block.settings.spread_team }}"
                   data-over-under-type="{{ block.settings.over_under_type }}"
                   data-over-under-value="{{ block.settings.over_under_value }}"
                   data-over-under-stat-type="{{ block.settings.over_under_stat_type }}"
              >
                {% if block.settings.show_card and block.settings.send_to_history != true %}
                <!-- Confidence Badge - Bande verte 92% -->
                <div class="confidence-badge">
                  <span class="confidence-percentage">{{ block.settings.win_percentage | default: 92 }}%</span>
                  <span class="confidence-text">DE CHANCE DE GAGNER SELON NOTRE IA</span>
                  <button 
                    class="btn-analysis" 
                    onclick="openAnalysisDialog(this)"
                    data-win-percentage="{{ block.settings.win_percentage | default: 92 }}"
                    data-ai-data-count="{{ block.settings.ai_data_count | default: 2843 }}"
                    data-sport-type="{{ block.settings.sport_type | default: 'nhl' }}"
                    data-team1="{{ block.settings.team1_name | default: '√âQUIPE DOMICILE' }}"
                    data-team2="{{ block.settings.team2_name | default: '√âQUIPE EXT√âRIEUR' }}"
                    data-auto-increment="{{ block.settings.auto_increment_enabled }}"
                    data-increment-interval="{{ block.settings.auto_increment_interval | default: 5 }}"
                    data-increment-amount="{{ block.settings.auto_increment_amount | default: 5 }}"
                  >
                    VOIR<br>ANALYSE<br>IA
                  </button>
                </div>

                <div class="bet-card-content">
                  <!-- Multiplicateur de Mise -->
                  <div class="multiplier-section-label">MULTIPLICATEUR DE MISE</div>
                  <button class="multiplier-button">x{{ block.settings.multiplier | default: '1.95' }}</button>

                  <!-- Parier Sur -->
                  <div class="bet-section-label" style="margin-top: 1.5rem;">PARIER SUR</div>
                  <div class="match-info-new">
                    {% assign bet_type = block.settings.bet_type | default: 'moneyline' %}
                    
                    {% if bet_type == 'moneyline' %}
                      <!-- MONEYLINE -->
                      <div class="match-info-header">MONEYLINE</div>
                      <div class="match-info-content">
                        <div class="team-side">
                          {% if block.settings.team1_logo %}
                            <img src="{{ block.settings.team1_logo | image_url: width: 200 }}" alt="{{ block.settings.team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team1_name | default: 'ST. LOUIS' }}</div>
                        </div>

                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                        </div>

                        <div class="team-side selected">
                          {% if block.settings.team2_logo %}
                            <img src="{{ block.settings.team2_logo | image_url: width: 200 }}" alt="{{ block.settings.team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team2_name | default: 'PITTSBURGH' }}</div>
                          <div class="team-bet-type">VICTOIRE</div>
                        </div>
                      </div>
                    
                    {% elsif bet_type == 'spread' %}
                      <!-- SPREAD -->
                      <div class="match-info-header">SPREAD</div>
                      <div class="match-info-content">
                        <div class="team-side {% if block.settings.spread_team == 'team1' %}selected{% endif %}">
                          {% if block.settings.team1_logo %}
                            <img src="{{ block.settings.team1_logo | image_url: width: 200 }}" alt="{{ block.settings.team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team1_name | default: 'ST. LOUIS' }}</div>
                          {% if block.settings.spread_team == 'team1' %}
                            <div class="team-bet-type">{{ block.settings.spread_value | default: '-3.5' }}</div>
                          {% endif %}
                        </div>

                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                        </div>

                        <div class="team-side {% if block.settings.spread_team == 'team2' %}selected{% endif %}">
                          {% if block.settings.team2_logo %}
                            <img src="{{ block.settings.team2_logo | image_url: width: 200 }}" alt="{{ block.settings.team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team2_name | default: 'PITTSBURGH' }}</div>
                          {% if block.settings.spread_team == 'team2' %}
                            <div class="team-bet-type">{{ block.settings.spread_value | default: '-3.5' }}</div>
                          {% endif %}
                        </div>
                      </div>
                    
                    {% elsif bet_type == 'over_under' %}
                      <!-- OVER/UNDER -->
                      <div class="match-info-header">{{ block.settings.over_under_type | default: 'OVER' | upcase }}</div>
                      <div class="match-info-content">
                        <div class="team-side">
                          {% if block.settings.team1_logo %}
                            <img src="{{ block.settings.team1_logo | image_url: width: 200 }}" alt="{{ block.settings.team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team1_name | default: 'ST. LOUIS' }}</div>
                        </div>

                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                          <div class="over-under-display">
                            <div class="over-under-type">{{ block.settings.over_under_type | default: 'OVER' | upcase }}</div>
                            <div class="over-under-value">{{ block.settings.over_under_value | default: '225.5' }}</div>
                            {% if block.settings.over_under_stat_type != blank %}
                              <div class="over-under-stat">{{ block.settings.over_under_stat_type }}</div>
                            {% endif %}
                          </div>
                        </div>

                        <div class="team-side">
                          {% if block.settings.team2_logo %}
                            <img src="{{ block.settings.team2_logo | image_url: width: 200 }}" alt="{{ block.settings.team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team2_name | default: 'PITTSBURGH' }}</div>
                        </div>
                      </div>
                    {% endif %}
                  </div>

                  <!-- Mise -->
                  <div class="bet-section-label">MISE</div>
                  <button class="units-button">{{ block.settings.bet_units | default: '1' }} UNITS</button>

                  <!-- Votre Gain -->
                  <div class="gain-section">
                    <div class="gain-section-label">VOTRE GAIN</div>
                    <div class="gain-grid">
                      <div class="bet-modify-box">
                        <button class="modify-btn" onclick="openBetDialog(this)" data-multiplier="{{ block.settings.multiplier | default: '1.95' }}">Modifier</button>
                        <div class="bet-amount-small">Votre mise</div>
                        <div class="bet-amount-value-small">$100</div>
                      </div>
                      <div class="cashout-box-large">
                        <div class="cashout-label">CASHOUT</div>
                        <div class="cashout-amount">${{ 100 | times: block.settings.multiplier | default: 1.95 | round: 2 }}</div>
                        <div class="cashout-profit">+${{ 100 | times: block.settings.multiplier | default: 1.95 | minus: 100 | round: 2 }} b√©n√©fice</div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Best Odds Footer -->
                <div class="best-odds-footer">
                  <div class="best-odds-label">MEILLEUR ODDS</div>
                  <div class="bookmaker-badge">{{ block.settings.best_bookmaker | default: 'DRAFTKINGS' }}</div>
                  <div class="odds-value">{{ block.settings.best_odds | default: '-105' }}</div>
                </div>
                {% endif %}
              </div>
          {% endfor %}
        {% else %}
          <div class="card text-center" style="padding: 2rem;">
            <p style="color: rgba(255, 255, 255, 0.6);">
              Aucune carte de pari ajout√©e. Utilisez l'√©diteur Shopify pour ajouter vos premi√®res recommandations de type "üéØ Carte Bet du Jour".
            </p>
          </div>
        {% endif %}
      </div>
    </div>

    <!-- PAGE 2: PARLAY DU JOUR -->
    <div id="page-parlay" class="page">
      <div class="container">
        <h1>PARLAY DU JOUR</h1>
        <p class="subtitle">Les parlay avec la meilleur probabilit√© de r√©ussite aujourd'hui. Nous affichons tous les parlay avec minimum de 60% de chance de gagner selon notre IA.</p>

        {% assign has_parlay = false %}
        {% for block in section.blocks %}
          {% if block.type == 'parlay_card' %}
            {% if block.settings.show_card %}
              {% assign has_parlay = true %}
            {% endif %}
              <!-- AI Data Counter Above Card -->
              {% if block.settings.show_card and block.settings.send_to_history != true %}
                <div class="ai-counter-above">
                  <div class="ai-spinner">
                    <span class="ai-badge">IA</span>
                  </div>
                  <span><span>{{ block.settings.ai_data_count | default: 2843 }}</span> DONN√âES ANALYS√âES PAR NOTRE IA POUR CE BET</span>
                </div>
              {% endif %}

              {% capture legs_json %}[
                {% for i in (1..10) %}
                  {% case i %}
                    {% when 1 %}
                      {% assign leg_team1_name = block.settings.leg1_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg1_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg1_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg1_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg1_bet_type %}
                      {% assign leg_match_time = block.settings.leg1_match_time %}
                      {% assign leg_spread_value = block.settings.leg1_spread_value %}
                      {% assign leg_spread_team = block.settings.leg1_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg1_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg1_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg1_over_under_stat_type %}
                    {% when 2 %}
                      {% assign leg_team1_name = block.settings.leg2_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg2_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg2_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg2_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg2_bet_type %}
                      {% assign leg_match_time = block.settings.leg2_match_time %}
                      {% assign leg_spread_value = block.settings.leg2_spread_value %}
                      {% assign leg_spread_team = block.settings.leg2_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg2_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg2_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg2_over_under_stat_type %}
                    {% when 3 %}
                      {% assign leg_team1_name = block.settings.leg3_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg3_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg3_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg3_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg3_bet_type %}
                      {% assign leg_match_time = block.settings.leg3_match_time %}
                      {% assign leg_spread_value = block.settings.leg3_spread_value %}
                      {% assign leg_spread_team = block.settings.leg3_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg3_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg3_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg3_over_under_stat_type %}
                    {% when 4 %}
                      {% assign leg_team1_name = block.settings.leg4_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg4_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg4_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg4_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg4_bet_type %}
                      {% assign leg_match_time = block.settings.leg4_match_time %}
                      {% assign leg_spread_value = block.settings.leg4_spread_value %}
                      {% assign leg_spread_team = block.settings.leg4_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg4_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg4_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg4_over_under_stat_type %}
                    {% when 5 %}
                      {% assign leg_team1_name = block.settings.leg5_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg5_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg5_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg5_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg5_bet_type %}
                      {% assign leg_match_time = block.settings.leg5_match_time %}
                      {% assign leg_spread_value = block.settings.leg5_spread_value %}
                      {% assign leg_spread_team = block.settings.leg5_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg5_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg5_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg5_over_under_stat_type %}
                    {% when 6 %}
                      {% assign leg_team1_name = block.settings.leg6_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg6_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg6_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg6_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg6_bet_type %}
                      {% assign leg_match_time = block.settings.leg6_match_time %}
                      {% assign leg_spread_value = block.settings.leg6_spread_value %}
                      {% assign leg_spread_team = block.settings.leg6_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg6_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg6_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg6_over_under_stat_type %}
                    {% when 7 %}
                      {% assign leg_team1_name = block.settings.leg7_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg7_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg7_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg7_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg7_bet_type %}
                      {% assign leg_match_time = block.settings.leg7_match_time %}
                      {% assign leg_spread_value = block.settings.leg7_spread_value %}
                      {% assign leg_spread_team = block.settings.leg7_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg7_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg7_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg7_over_under_stat_type %}
                    {% when 8 %}
                      {% assign leg_team1_name = block.settings.leg8_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg8_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg8_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg8_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg8_bet_type %}
                      {% assign leg_match_time = block.settings.leg8_match_time %}
                      {% assign leg_spread_value = block.settings.leg8_spread_value %}
                      {% assign leg_spread_team = block.settings.leg8_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg8_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg8_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg8_over_under_stat_type %}
                    {% when 9 %}
                      {% assign leg_team1_name = block.settings.leg9_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg9_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg9_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg9_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg9_bet_type %}
                      {% assign leg_match_time = block.settings.leg9_match_time %}
                      {% assign leg_spread_value = block.settings.leg9_spread_value %}
                      {% assign leg_spread_team = block.settings.leg9_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg9_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg9_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg9_over_under_stat_type %}
                    {% when 10 %}
                      {% assign leg_team1_name = block.settings.leg10_team1_name %}
                      {% assign leg_team1_logo = block.settings.leg10_team1_logo %}
                      {% assign leg_team2_name = block.settings.leg10_team2_name %}
                      {% assign leg_team2_logo = block.settings.leg10_team2_logo %}
                      {% assign leg_bet_type = block.settings.leg10_bet_type %}
                      {% assign leg_match_time = block.settings.leg10_match_time %}
                      {% assign leg_spread_value = block.settings.leg10_spread_value %}
                      {% assign leg_spread_team = block.settings.leg10_spread_team %}
                      {% assign leg_over_under_type = block.settings.leg10_over_under_type %}
                      {% assign leg_over_under_value = block.settings.leg10_over_under_value %}
                      {% assign leg_over_under_stat_type = block.settings.leg10_over_under_stat_type %}
                  {% endcase %}
                  
                  {% if leg_team1_name != blank %}
                    {% unless forloop.first %},{% endunless %}
                    {
                      "team1_name": "{{ leg_team1_name }}",
                      "team1_logo": "{{ leg_team1_logo | image_url: width: 200 }}",
                      "team2_name": "{{ leg_team2_name }}",
                      "team2_logo": "{{ leg_team2_logo | image_url: width: 200 }}",
                      "bet_type": "{{ leg_bet_type }}",
                      "match_time": "{{ leg_match_time }}",
                      "spread_value": "{{ leg_spread_value }}",
                      "spread_team": "{{ leg_spread_team }}",
                      "over_under_type": "{{ leg_over_under_type }}",
                      "over_under_value": "{{ leg_over_under_value }}",
                      "over_under_stat_type": "{{ leg_over_under_stat_type }}"
                    }
                  {% endif %}
                {% endfor %}
              ]{% endcapture %}

              <div class="bet-card" style="{% if block.settings.send_to_history == true or block.settings.show_card != true %}display:none{% endif %}" 
                   {{ block.shopify_attributes }}
                   data-block-type="parlay_card"
                   data-block-id="{{ block.id }}"
                   data-sport-type="{{ block.settings.sport_type | default: 'nhl' }}"
                   data-ai-data-count="{{ block.settings.ai_data_count | default: 5214 }}"
                   data-win-percentage="{{ block.settings.win_percentage | default: 78 }}"
                   data-multiplier="{{ block.settings.multiplier }}"
                   data-bet-units="{{ block.settings.bet_units }}"
                   data-odds="{{ block.settings.odds }}"
                   data-best-bookmaker="{{ block.settings.best_bookmaker }}"
                   data-best-odds="{{ block.settings.best_odds }}"
                   data-match-date="{{ block.settings.match_date }}"
                   data-match-time="{{ block.settings.match_time }}"
                   data-result="{{ block.settings.result | default: 'pending' }}"
                   data-send-to-history="{{ block.settings.send_to_history }}"
                   data-legs='{{ legs_json | strip_newlines | strip }}'
              >
                {% if block.settings.show_card and block.settings.send_to_history != true %}
                <!-- Confidence Badge - Bande verte 92% -->
                <div class="confidence-badge">
                  <span class="confidence-percentage">{{ block.settings.win_percentage | default: 92 }}%</span>
                  <span class="confidence-text">DE CHANCE DE GAGNER SELON NOTRE IA</span>
                  <button 
                    class="btn-analysis" 
                    onclick="openAnalysisDialog(this)"
                    data-win-percentage="{{ block.settings.win_percentage | default: 92 }}"
                    data-ai-data-count="{{ block.settings.ai_data_count | default: 2843 }}"
                    data-sport-type="{{ block.settings.sport_type | default: 'nhl' }}"
                    data-team1="{{ block.settings.leg1_team1_name | default: '√âQUIPE DOMICILE' }}"
                    data-team2="{{ block.settings.leg1_team2_name | default: '√âQUIPE EXT√âRIEUR' }}"
                    data-auto-increment="{{ block.settings.auto_increment_enabled }}"
                    data-increment-interval="{{ block.settings.auto_increment_interval | default: 5 }}"
                    data-increment-amount="{{ block.settings.auto_increment_amount | default: 5 }}"
                  >
                    VOIR<br>ANALYSE<br>IA
                  </button>
                </div>

                <div class="bet-card-content">
                  <!-- Multiplicateur de Mise -->
                  <div class="multiplier-section-label">MULTIPLICATEUR DE MISE</div>
                  <button class="multiplier-button">x{{ block.settings.multiplier | default: '1.95' }}</button>

                  <!-- Parier Sur -->
                  <div class="bet-section-label" style="margin-top: 1.5rem;">PARIER SUR</div>
                  
                  <!-- LEG 1 -->
                  {% if block.settings.leg1_team1_name != blank %}
                  <div class="match-info-new" style="margin-bottom: 1rem;">
                    {% assign leg_bet_type = block.settings.leg1_bet_type | default: 'moneyline' %}
                    
                    {% if leg_bet_type == 'moneyline' %}
                      <div class="match-info-header">LEG 1 - MONEYLINE</div>
                      <div class="match-info-content">
                        <div class="team-side">
                          {% if block.settings.leg1_team1_logo %}
                            <img src="{{ block.settings.leg1_team1_logo | image_url: width: 200 }}" alt="{{ block.settings.leg1_team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg1_team1_name }}</div>
                        </div>
                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.leg1_match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                        </div>
                        <div class="team-side selected">
                          {% if block.settings.leg1_team2_logo %}
                            <img src="{{ block.settings.leg1_team2_logo | image_url: width: 200 }}" alt="{{ block.settings.leg1_team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg1_team2_name }}</div>
                          <div class="team-bet-type">VICTOIRE</div>
                        </div>
                      </div>
                    {% elsif leg_bet_type == 'spread' %}
                      <div class="match-info-header">LEG 1 - SPREAD</div>
                      <div class="match-info-content">
                        <div class="team-side {% if block.settings.leg1_spread_team == 'team1' %}selected{% endif %}">
                          {% if block.settings.leg1_team1_logo %}
                            <img src="{{ block.settings.leg1_team1_logo | image_url: width: 200 }}" alt="{{ block.settings.leg1_team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg1_team1_name }}</div>
                          {% if block.settings.leg1_spread_team == 'team1' %}
                            <div class="team-bet-type">{{ block.settings.leg1_spread_value | default: '-3.5' }}</div>
                          {% endif %}
                        </div>
                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.leg1_match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                        </div>
                        <div class="team-side {% if block.settings.leg1_spread_team == 'team2' %}selected{% endif %}">
                          {% if block.settings.leg1_team2_logo %}
                            <img src="{{ block.settings.leg1_team2_logo | image_url: width: 200 }}" alt="{{ block.settings.leg1_team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg1_team2_name }}</div>
                          {% if block.settings.leg1_spread_team == 'team2' %}
                            <div class="team-bet-type">{{ block.settings.leg1_spread_value | default: '-3.5' }}</div>
                          {% endif %}
                        </div>
                      </div>
                    {% elsif leg_bet_type == 'over_under' %}
                      <div class="match-info-header">LEG 1 - {{ block.settings.leg1_over_under_type | default: 'OVER' | upcase }}</div>
                      <div class="match-info-content">
                        <div class="team-side">
                          {% if block.settings.leg1_team1_logo %}
                            <img src="{{ block.settings.leg1_team1_logo | image_url: width: 200 }}" alt="{{ block.settings.leg1_team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg1_team1_name }}</div>
                        </div>
                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.leg1_match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                          <div class="over-under-display">
                            <div class="over-under-type">{{ block.settings.leg1_over_under_type | default: 'OVER' | upcase }}</div>
                            <div class="over-under-value">{{ block.settings.leg1_over_under_value | default: '225.5' }}</div>
                            {% if block.settings.leg1_over_under_stat_type != blank %}
                              <div class="over-under-stat">{{ block.settings.leg1_over_under_stat_type }}</div>
                            {% endif %}
                          </div>
                        </div>
                        <div class="team-side">
                          {% if block.settings.leg1_team2_logo %}
                            <img src="{{ block.settings.leg1_team2_logo | image_url: width: 200 }}" alt="{{ block.settings.leg1_team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg1_team2_name }}</div>
                        </div>
                      </div>
                    {% endif %}
                  </div>
                  {% endif %}

                  <!-- LEG 2 -->
                  {% if block.settings.leg2_team1_name != blank %}
                  <div class="match-info-new" style="margin-bottom: 1rem;">
                    {% assign leg_bet_type = block.settings.leg2_bet_type | default: 'moneyline' %}
                    
                    {% if leg_bet_type == 'moneyline' %}
                      <div class="match-info-header">LEG 2 - MONEYLINE</div>
                      <div class="match-info-content">
                        <div class="team-side">
                          {% if block.settings.leg2_team1_logo %}
                            <img src="{{ block.settings.leg2_team1_logo | image_url: width: 200 }}" alt="{{ block.settings.leg2_team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg2_team1_name }}</div>
                        </div>
                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.leg2_match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                        </div>
                        <div class="team-side selected">
                          {% if block.settings.leg2_team2_logo %}
                            <img src="{{ block.settings.leg2_team2_logo | image_url: width: 200 }}" alt="{{ block.settings.leg2_team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg2_team2_name }}</div>
                          <div class="team-bet-type">VICTOIRE</div>
                        </div>
                      </div>
                    {% elsif leg_bet_type == 'spread' %}
                      <div class="match-info-header">LEG 2 - SPREAD</div>
                      <div class="match-info-content">
                        <div class="team-side {% if block.settings.leg2_spread_team == 'team1' %}selected{% endif %}">
                          {% if block.settings.leg2_team1_logo %}
                            <img src="{{ block.settings.leg2_team1_logo | image_url: width: 200 }}" alt="{{ block.settings.leg2_team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg2_team1_name }}</div>
                          {% if block.settings.leg2_spread_team == 'team1' %}
                            <div class="team-bet-type">{{ block.settings.leg2_spread_value | default: '-3.5' }}</div>
                          {% endif %}
                        </div>
                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.leg2_match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                        </div>
                        <div class="team-side {% if block.settings.leg2_spread_team == 'team2' %}selected{% endif %}">
                          {% if block.settings.leg2_team2_logo %}
                            <img src="{{ block.settings.leg2_team2_logo | image_url: width: 200 }}" alt="{{ block.settings.leg2_team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg2_team2_name }}</div>
                          {% if block.settings.leg2_spread_team == 'team2' %}
                            <div class="team-bet-type">{{ block.settings.leg2_spread_value | default: '-3.5' }}</div>
                          {% endif %}
                        </div>
                      </div>
                    {% elsif leg_bet_type == 'over_under' %}
                      <div class="match-info-header">LEG 2 - {{ block.settings.leg2_over_under_type | default: 'OVER' | upcase }}</div>
                      <div class="match-info-content">
                        <div class="team-side">
                          {% if block.settings.leg2_team1_logo %}
                            <img src="{{ block.settings.leg2_team1_logo | image_url: width: 200 }}" alt="{{ block.settings.leg2_team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg2_team1_name }}</div>
                        </div>
                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.leg2_match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                          <div class="over-under-display">
                            <div class="over-under-type">{{ block.settings.leg2_over_under_type | default: 'OVER' | upcase }}</div>
                            <div class="over-under-value">{{ block.settings.leg2_over_under_value | default: '225.5' }}</div>
                            {% if block.settings.leg2_over_under_stat_type != blank %}
                              <div class="over-under-stat">{{ block.settings.leg2_over_under_stat_type }}</div>
                            {% endif %}
                          </div>
                        </div>
                        <div class="team-side">
                          {% if block.settings.leg2_team2_logo %}
                            <img src="{{ block.settings.leg2_team2_logo | image_url: width: 200 }}" alt="{{ block.settings.leg2_team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.leg2_team2_name }}</div>
                        </div>
                      </div>
                    {% endif %}
                  </div>
                  {% endif %}

                  <!-- LEG 3 √† LEG 10: Structure similaire mais trop longue, je vais cr√©er une approche compacte ci-dessous -->
                  
                  {% for i in (3..10) %}
                    {% case i %}
                      {% when 3 %}
                        {% assign team1_name = block.settings.leg3_team1_name %}
                        {% assign team1_logo = block.settings.leg3_team1_logo %}
                        {% assign team2_name = block.settings.leg3_team2_name %}
                        {% assign team2_logo = block.settings.leg3_team2_logo %}
                        {% assign match_time = block.settings.leg3_match_time %}
                        {% assign leg_bet_type = block.settings.leg3_bet_type %}
                        {% assign spread_value = block.settings.leg3_spread_value %}
                        {% assign spread_team = block.settings.leg3_spread_team %}
                        {% assign over_under_type = block.settings.leg3_over_under_type %}
                        {% assign over_under_value = block.settings.leg3_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg3_over_under_stat_type %}
                      {% when 4 %}
                        {% assign team1_name = block.settings.leg4_team1_name %}
                        {% assign team1_logo = block.settings.leg4_team1_logo %}
                        {% assign team2_name = block.settings.leg4_team2_name %}
                        {% assign team2_logo = block.settings.leg4_team2_logo %}
                        {% assign match_time = block.settings.leg4_match_time %}
                        {% assign leg_bet_type = block.settings.leg4_bet_type %}
                        {% assign spread_value = block.settings.leg4_spread_value %}
                        {% assign spread_team = block.settings.leg4_spread_team %}
                        {% assign over_under_type = block.settings.leg4_over_under_type %}
                        {% assign over_under_value = block.settings.leg4_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg4_over_under_stat_type %}
                      {% when 5 %}
                        {% assign team1_name = block.settings.leg5_team1_name %}
                        {% assign team1_logo = block.settings.leg5_team1_logo %}
                        {% assign team2_name = block.settings.leg5_team2_name %}
                        {% assign team2_logo = block.settings.leg5_team2_logo %}
                        {% assign match_time = block.settings.leg5_match_time %}
                        {% assign leg_bet_type = block.settings.leg5_bet_type %}
                        {% assign spread_value = block.settings.leg5_spread_value %}
                        {% assign spread_team = block.settings.leg5_spread_team %}
                        {% assign over_under_type = block.settings.leg5_over_under_type %}
                        {% assign over_under_value = block.settings.leg5_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg5_over_under_stat_type %}
                      {% when 6 %}
                        {% assign team1_name = block.settings.leg6_team1_name %}
                        {% assign team1_logo = block.settings.leg6_team1_logo %}
                        {% assign team2_name = block.settings.leg6_team2_name %}
                        {% assign team2_logo = block.settings.leg6_team2_logo %}
                        {% assign match_time = block.settings.leg6_match_time %}
                        {% assign leg_bet_type = block.settings.leg6_bet_type %}
                        {% assign spread_value = block.settings.leg6_spread_value %}
                        {% assign spread_team = block.settings.leg6_spread_team %}
                        {% assign over_under_type = block.settings.leg6_over_under_type %}
                        {% assign over_under_value = block.settings.leg6_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg6_over_under_stat_type %}
                      {% when 7 %}
                        {% assign team1_name = block.settings.leg7_team1_name %}
                        {% assign team1_logo = block.settings.leg7_team1_logo %}
                        {% assign team2_name = block.settings.leg7_team2_name %}
                        {% assign team2_logo = block.settings.leg7_team2_logo %}
                        {% assign match_time = block.settings.leg7_match_time %}
                        {% assign leg_bet_type = block.settings.leg7_bet_type %}
                        {% assign spread_value = block.settings.leg7_spread_value %}
                        {% assign spread_team = block.settings.leg7_spread_team %}
                        {% assign over_under_type = block.settings.leg7_over_under_type %}
                        {% assign over_under_value = block.settings.leg7_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg7_over_under_stat_type %}
                      {% when 8 %}
                        {% assign team1_name = block.settings.leg8_team1_name %}
                        {% assign team1_logo = block.settings.leg8_team1_logo %}
                        {% assign team2_name = block.settings.leg8_team2_name %}
                        {% assign team2_logo = block.settings.leg8_team2_logo %}
                        {% assign match_time = block.settings.leg8_match_time %}
                        {% assign leg_bet_type = block.settings.leg8_bet_type %}
                        {% assign spread_value = block.settings.leg8_spread_value %}
                        {% assign spread_team = block.settings.leg8_spread_team %}
                        {% assign over_under_type = block.settings.leg8_over_under_type %}
                        {% assign over_under_value = block.settings.leg8_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg8_over_under_stat_type %}
                      {% when 9 %}
                        {% assign team1_name = block.settings.leg9_team1_name %}
                        {% assign team1_logo = block.settings.leg9_team1_logo %}
                        {% assign team2_name = block.settings.leg9_team2_name %}
                        {% assign team2_logo = block.settings.leg9_team2_logo %}
                        {% assign match_time = block.settings.leg9_match_time %}
                        {% assign leg_bet_type = block.settings.leg9_bet_type %}
                        {% assign spread_value = block.settings.leg9_spread_value %}
                        {% assign spread_team = block.settings.leg9_spread_team %}
                        {% assign over_under_type = block.settings.leg9_over_under_type %}
                        {% assign over_under_value = block.settings.leg9_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg9_over_under_stat_type %}
                      {% when 10 %}
                        {% assign team1_name = block.settings.leg10_team1_name %}
                        {% assign team1_logo = block.settings.leg10_team1_logo %}
                        {% assign team2_name = block.settings.leg10_team2_name %}
                        {% assign team2_logo = block.settings.leg10_team2_logo %}
                        {% assign match_time = block.settings.leg10_match_time %}
                        {% assign leg_bet_type = block.settings.leg10_bet_type %}
                        {% assign spread_value = block.settings.leg10_spread_value %}
                        {% assign spread_team = block.settings.leg10_spread_team %}
                        {% assign over_under_type = block.settings.leg10_over_under_type %}
                        {% assign over_under_value = block.settings.leg10_over_under_value %}
                        {% assign over_under_stat_type = block.settings.leg10_over_under_stat_type %}
                    {% endcase %}
                    
                    {% if team1_name != blank %}
                    <div class="match-info-new" style="margin-bottom: 1rem;">
                      {% assign current_leg_bet_type = leg_bet_type | default: 'moneyline' %}
                      
                      {% if current_leg_bet_type == 'moneyline' %}
                        <div class="match-info-header">LEG {{ i }} - MONEYLINE</div>
                        <div class="match-info-content">
                          <div class="team-side">
                            {% if team1_logo %}
                              <img src="{{ team1_logo | image_url: width: 200 }}" alt="{{ team1_name }}" class="team-logo">
                            {% endif %}
                            <div class="team-name-new">{{ team1_name }}</div>
                          </div>
                          <div class="match-center">
                            <div class="match-time-new">{{ match_time | default: '7:00 PM' }}</div>
                            <div class="match-vs-new">VS</div>
                          </div>
                          <div class="team-side selected">
                            {% if team2_logo %}
                              <img src="{{ team2_logo | image_url: width: 200 }}" alt="{{ team2_name }}" class="team-logo">
                            {% endif %}
                            <div class="team-name-new">{{ team2_name }}</div>
                            <div class="team-bet-type">VICTOIRE</div>
                          </div>
                        </div>
                      {% elsif current_leg_bet_type == 'spread' %}
                        <div class="match-info-header">LEG {{ i }} - SPREAD</div>
                        <div class="match-info-content">
                          <div class="team-side {% if spread_team == 'team1' %}selected{% endif %}">
                            {% if team1_logo %}
                              <img src="{{ team1_logo | image_url: width: 200 }}" alt="{{ team1_name }}" class="team-logo">
                            {% endif %}
                            <div class="team-name-new">{{ team1_name }}</div>
                            {% if spread_team == 'team1' %}
                              <div class="team-bet-type">{{ spread_value | default: '-3.5' }}</div>
                            {% endif %}
                          </div>
                          <div class="match-center">
                            <div class="match-time-new">{{ match_time | default: '7:00 PM' }}</div>
                            <div class="match-vs-new">VS</div>
                          </div>
                          <div class="team-side {% if spread_team == 'team2' %}selected{% endif %}">
                            {% if team2_logo %}
                              <img src="{{ team2_logo | image_url: width: 200 }}" alt="{{ team2_name }}" class="team-logo">
                            {% endif %}
                            <div class="team-name-new">{{ team2_name }}</div>
                            {% if spread_team == 'team2' %}
                              <div class="team-bet-type">{{ spread_value | default: '-3.5' }}</div>
                            {% endif %}
                          </div>
                        </div>
                      {% elsif current_leg_bet_type == 'over_under' %}
                        <div class="match-info-header">LEG {{ i }} - {{ over_under_type | default: 'OVER' | upcase }}</div>
                        <div class="match-info-content">
                          <div class="team-side">
                            {% if team1_logo %}
                              <img src="{{ team1_logo | image_url: width: 200 }}" alt="{{ team1_name }}" class="team-logo">
                            {% endif %}
                            <div class="team-name-new">{{ team1_name }}</div>
                          </div>
                          <div class="match-center">
                            <div class="match-time-new">{{ match_time | default: '7:00 PM' }}</div>
                            <div class="match-vs-new">VS</div>
                            <div class="over-under-display">
                              <div class="over-under-type">{{ over_under_type | default: 'OVER' | upcase }}</div>
                              <div class="over-under-value">{{ over_under_value | default: '225.5' }}</div>
                              {% if over_under_stat_type != blank %}
                                <div class="over-under-stat">{{ over_under_stat_type }}</div>
                              {% endif %}
                            </div>
                          </div>
                          <div class="team-side">
                            {% if team2_logo %}
                              <img src="{{ team2_logo | image_url: width: 200 }}" alt="{{ team2_name }}" class="team-logo">
                            {% endif %}
                            <div class="team-name-new">{{ team2_name }}</div>
                          </div>
                        </div>
                      {% endif %}
                    </div>
                    {% endif %}
                  {% endfor %}

                  <!-- Mise -->
                  <div class="bet-section-label">MISE</div>
                  <button class="units-button">{{ block.settings.bet_units | default: '1' }} UNITS</button>

                  <!-- Votre Gain -->
                  <div class="gain-section">
                    <div class="gain-section-label">VOTRE GAIN</div>
                    <div class="gain-grid">
                      <div class="bet-modify-box">
                        <button class="modify-btn" onclick="openBetDialog(this)" data-multiplier="{{ block.settings.multiplier | default: '1.95' }}">Modifier</button>
                        <div class="bet-amount-small">Votre mise</div>
                        <div class="bet-amount-value-small">$100</div>
                      </div>
                      <div class="cashout-box-large">
                        <div class="cashout-label">CASHOUT</div>
                        <div class="cashout-amount">${{ 100 | times: block.settings.multiplier | default: 1.95 | round: 2 }}</div>
                        <div class="cashout-profit">+${{ 100 | times: block.settings.multiplier | default: 1.95 | minus: 100 | round: 2 }} b√©n√©fice</div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Best Odds Footer -->
                <div class="best-odds-footer">
                  <div class="best-odds-label">MEILLEUR ODDS</div>
                  <div class="bookmaker-badge">{{ block.settings.best_bookmaker | default: 'DRAFTKINGS' }}</div>
                  <div class="odds-value">{{ block.settings.best_odds | default: '-105' }}</div>
                </div>
                {% endif %}
              </div>
          {% endif %}
        {% endfor %}
        {% if has_parlay == false %}
          <div class="card text-center" style="padding: 2rem;">
            <p style="color: rgba(255, 255, 255, 0.6);">
              Aucune carte de parlay ajout√©e. Utilisez l'√©diteur Shopify pour ajouter vos premi√®res recommandations de type "üé≤ Carte Parlay".
            </p>
          </div>
        {% endif %}
      </div>
    </div>

    <!-- PAGE 3: HISTORIQUE BET DU JOUR -->
    {% render 'historique-bet-page' %}

    <!-- PAGE 4: HISTORIQUE PARLAY DU JOUR -->
    {% render 'historique-parlay-page' %}

    <style>
      /* Override snippets to show logos in history */
      #bet-history-container img,
      #parlay-history-container img {
        display: block !important;
      }
    </style>

    <!-- PAGE 5: NOTRE STRAT√âGIE -->
    <div id="page-strategy" class="page">
      <div class="container" style="max-width: 1000px; margin: 0 auto;">
        <h1 style="font-size: 3.5rem; margin-bottom: 1rem;">Notre Strat√©gie</h1>
        <p class="subtitle" style="font-size: 1.3rem; margin-bottom: 3rem;">D√©couvrez notre approche gagnante</p>
        
        <div style="display: grid; gap: 2rem;">
          
          <!-- Carte Strat√©gie : Guide des paris sportifs -->
          <a href="#page-guide-paris" onclick="navigateTo(event, 'guide-paris')" style="text-decoration: none; display: block; background: rgba(22, 163, 74, 0.08); border: 3px solid #16a34a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #16a34a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #16a34a; font-size: 1.8rem; font-weight: 700; margin-bottom: 0.5rem;">Guide des paris sportifs</h3>
                <p style="color: #16a34a; font-size: 1.1rem; margin: 0; opacity: 0.9;">Comprends les bases du pari sportif ‚Äî cotes, types de mises, logique du march√© ‚Äî et d√©couvre comment Winabet.ai t'aide √† parier plus intelligemment, sans effort.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #16a34a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Strat√©gie : Strat√©gies de paris -->
          <a href="#page-strategies-paris" onclick="navigateTo(event, 'strategies-paris')" style="text-decoration: none; display: block; background: rgba(22, 163, 74, 0.08); border: 3px solid #16a34a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #16a34a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #16a34a; font-size: 1.8rem; font-weight: 700; margin-bottom: 0.5rem;">Strat√©gies de paris</h3>
                <p style="color: #16a34a; font-size: 1.1rem; margin: 0; opacity: 0.9;">D√©couvre comment penser comme un parieur intelligent. Winabet.ai t'explique les principes qui influencent tes chances de succ√®s ‚Äî lignes, timing, gestion de mise et analyse des matchs ‚Äî pendant que son IA fait tout le travail pour toi.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #16a34a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Strat√©gie : Point Spread -->
          <a href="#page-point-spread" onclick="navigateTo(event, 'point-spread')" style="text-decoration: none; display: block; background: rgba(22, 163, 74, 0.08); border: 3px solid #16a34a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #16a34a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #16a34a; font-size: 1.8rem; font-weight: 700; margin-bottom: 0.5rem;">Point Spread</h3>
                <p style="color: #16a34a; font-size: 1.1rem; margin: 0; opacity: 0.9;">D√©couvre comment fonctionnent les paris √† l'√©cart, l'un des types de mises les plus populaires dans le sport. Winabet.ai t'explique comment lire les spreads, les comprendre et les utiliser pour miser plus intelligemment.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #16a34a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Strat√©gie : Moneyline -->
          <a href="#page-moneyline" onclick="navigateTo(event, 'moneyline')" style="text-decoration: none; display: block; background: rgba(22, 163, 74, 0.08); border: 3px solid #16a34a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer; margin-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #16a34a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #16a34a; font-size: 1.8rem; font-weight: 700; margin-bottom: 0.5rem;">Moneyline (Vainqueur du match)</h3>
                <p style="color: #16a34a; font-size: 1.1rem; margin: 0; opacity: 0.9;">Le pari le plus simple : tu choisis l'√©quipe qui gagne. Winabet.ai t'explique comment lire les cotes + / ‚Äì et t'indique directement les meilleurs moneylines en NFL et NHL.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #16a34a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Strat√©gie : Over/Under -->
          <a href="#page-overunder" onclick="navigateTo(event, 'overunder')" style="text-decoration: none; display: block; background: rgba(22, 163, 74, 0.08); border: 3px solid #16a34a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer; margin-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #16a34a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #16a34a; font-size: 1.8rem; font-weight: 700; margin-bottom: 0.5rem;">Over/Under (Total de points)</h3>
                <p style="color: #16a34a; font-size: 1.1rem; margin: 0; opacity: 0.9;">Parie sur le rythme du match, pas sur le vainqueur. Winabet.ai t'explique comment fonctionnent les totaux de points et t'indique automatiquement quand miser sur le Over ou le Under selon ses analyses IA.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #16a34a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Strat√©gie : Prop Bets -->
          <a href="#page-propbets" onclick="navigateTo(event, 'propbets')" style="text-decoration: none; display: block; background: rgba(22, 163, 74, 0.08); border: 3px solid #16a34a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer; margin-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #16a34a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #16a34a; font-size: 1.8rem; font-weight: 700; margin-bottom: 0.5rem;">Prop Bets (Paris sp√©ciaux)</h3>
                <p style="color: #16a34a; font-size: 1.1rem; margin: 0; opacity: 0.9;">Parie sur les performances des joueurs, pas seulement sur le score. Winabet.ai t'explique les diff√©rents types de prop bets et t'indique ceux qui ont le plus de valeur selon les donn√©es r√©elles des matchs en NFL et NHL.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #16a34a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Strat√©gie : Parlay Bets -->
          <a href="#page-parlaybets" onclick="navigateTo(event, 'parlaybets')" style="text-decoration: none; display: block; background: rgba(22, 163, 74, 0.08); border: 3px solid #16a34a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer; margin-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #16a34a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 4v3m0 3v3m-7-9v3m0 3v3"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #16a34a; font-size: 1.8rem; font-weight: 700; margin-bottom: 0.5rem;">Parlay Bets (Paris combin√©s)</h3>
                <p style="color: #16a34a; font-size: 1.1rem; margin: 0; opacity: 0.9;">Apprends √† comprendre les paris combin√©s et pourquoi ils sont si populaires. Winabet.ai t'explique comment ils fonctionnent, leurs variantes (m√™me-match, teaser, round-robin) et surtout, pourquoi ils sont risqu√©s malgr√© leurs gains potentiels.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #16a34a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Strat√©gie : Lire les cotes -->
          <a href="#page-odds" onclick="navigateTo(event, 'odds')" style="text-decoration: none; display: block; background: rgba(22, 163, 74, 0.08); border: 3px solid #16a34a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer; margin-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #16a34a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #16a34a; font-size: 1.8rem; font-weight: 700; margin-bottom: 0.5rem;">Lire les cotes (Odds)</h3>
                <p style="color: #16a34a; font-size: 1.1rem; margin: 0; opacity: 0.9;">Comprends rapidement les cotes am√©ricaines (+/‚Äì), fractionnelles et d√©cimales, la probabilit√© implicite et le juice. Winabet.ai traduit tout en pourcentages et te pointe directement les paris NFL et NHL avec valeur.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #16a34a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>
          
        </div>
      </div>
    </div>

    <!-- PAGE 6: MON COMPTE -->
    <div id="page-account" class="page">
      <div class="container">
        <h1>Mon compte</h1>
        <p class="subtitle">G√©rez votre profil et vos pr√©f√©rences</p>
        
        <div class="card">
          <p class="text-center" style="color: rgba(255, 255, 255, 0.6);">
            Fonctionnalit√© √† venir. Vous pourrez bient√¥t g√©rer votre profil, vos pr√©f√©rences et vos param√®tres.
          </p>
        </div>
      </div>
    </div>

    <!-- PAGE 7: BOUTIQUE -->
    <div id="page-boutique" class="page">
      <div class="container">
        <h1>Boutique</h1>
        <p class="subtitle">D√©couvrez nos produits et services</p>
        
        <div class="card">
          <p class="text-center" style="color: rgba(255, 255, 255, 0.6);">
            Fonctionnalit√© √† venir. D√©couvrez bient√¥t nos offres exclusives et nos services premium.
          </p>
        </div>
      </div>
    </div>

    <!-- PAGE 8: SUPPORT -->
    <div id="page-support" class="page">
      <div class="container" style="max-width: 800px; margin: 0 auto;">
        <h1 style="font-size: 3.5rem; margin-bottom: 1rem;">Contactez-nous</h1>
        <p class="subtitle" style="font-size: 1.3rem; margin-bottom: 4rem;">Notre √©quipe est l√† pour vous aider</p>
        
        <!-- Contact rapide WhatsApp -->
        <div style="background: linear-gradient(135deg, rgba(22, 163, 74, 0.1) 0%, rgba(22, 163, 74, 0.05) 100%); padding: 3rem 2rem; border-radius: 1rem; margin-bottom: 3rem; text-align: center;">
          <div style="font-size: 4rem; margin-bottom: 1.5rem;">üì±</div>
          <h2 style="color: #16a34a; font-size: 2rem; margin-bottom: 1rem; font-weight: 700;">Support sportif rapide</h2>
          <p style="color: #ffffff; font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem; letter-spacing: 0.05em;">
            514-237-0725
          </p>
          <p style="color: rgba(255, 255, 255, 0.8); font-size: 1.2rem; line-height: 1.8;">
            WhatsApp ou message texte uniquement<br>
            <span style="color: rgba(255, 255, 255, 0.6); font-size: 1rem;">(Ligne de message seulement, pas d'appel t√©l√©phonique)</span>
          </p>
        </div>
        
        <!-- Contact par email -->
        <div style="background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%); padding: 3rem 2rem; border-radius: 1rem; text-align: center;">
          <div style="font-size: 4rem; margin-bottom: 1.5rem;">‚úâÔ∏è</div>
          <h2 style="color: #16a34a; font-size: 2rem; margin-bottom: 1rem; font-weight: 700;">Contact par email</h2>
          <a href="mailto:winabet.ai@gmail.com" style="color: #ffffff; font-size: 1.8rem; font-weight: 600; text-decoration: none; transition: color 0.3s;">
            winabet.ai@gmail.com
          </a>
          <p style="color: rgba(255, 255, 255, 0.6); font-size: 1rem; margin-top: 1rem;">
            Nous r√©pondons sous 24-48h
          </p>
        </div>
      </div>
    </div>

    {% render 'strategy-detail-pages' %}
  </main>

  <!-- AI Loading Overlay -->
  <div id="ai-loading-overlay" class="ai-loading-overlay">
    <div class="ai-loading-spinner">
      <span class="ai-loading-spinner-text">IA</span>
    </div>
    <div class="ai-loading-logo">
      <span style="color: #ffffff;">WIN</span><span style="color: #16a34a;">A</span><span style="color: #ffffff;">BET</span><span style="color: #16a34a; font-size: 0.6em;">.AI</span>
    </div>
    <p class="ai-loading-message">CHARGEMENT DE NOTRE IA ET DES DONN√âES<br>LES PLUS R√âCENTES‚Ä¶</p>
  </div>

  <!-- Dialog: Modifier la mise -->
  <div id="bet-dialog" class="dialog-overlay">
    <div class="dialog">
      <div class="dialog-header">
        <h2 class="dialog-title">Modifier votre mise</h2>
        <button class="dialog-close" onclick="closeBetDialog()" aria-label="Fermer">
          <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="dialog-content">
        <div class="bet-buttons">
          <button class="bet-button" onclick="setBetAmount(10)">$10</button>
          <button class="bet-button" onclick="setBetAmount(20)">$20</button>
          <button class="bet-button" onclick="setBetAmount(50)">$50</button>
          <button class="bet-button" onclick="setBetAmount(100)">$100</button>
          <button class="bet-button" onclick="setBetAmount(150)">$150</button>
          <button class="bet-button" onclick="setBetAmount(200)">$200</button>
          <button class="bet-button" onclick="setBetAmount(500)">$500</button>
          <button class="bet-button" onclick="customBetAmount()">Autre</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Dialog: Analyse IA Compl√®te -->
  <div id="analysis-dialog" class="dialog-overlay">
    <div class="dialog dialog-large">
      <div class="analysis-header">
        <button class="dialog-close" onclick="closeAnalysisDialog()" aria-label="Fermer" style="position: absolute; top: 1rem; right: 1rem;">
          <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>

        <div style="display: flex; align-items: center; justify-content: center; gap: 0.75rem; margin-bottom: 0.75rem;">
          <div class="ai-spinner" style="width: 2.4rem; height: 2.4rem;">
            <span class="ai-badge" style="color: #ffffff;">IA</span>
          </div>
          <span style="color: #ffffff; font-weight: 600; font-size: 1.125rem; letter-spacing: 0.03em;">
            <span id="dialog-data-count">2 909</span> DONN√âES ANALYS√â PAR NOTRE IA POUR CE BET JUSQU'√Ä PR√âSENT
          </span>
        </div>

        <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: 1rem;">
          <div style="width: 10px; height: 10px; background: #16a34a; border-radius: 50%;"></div>
          <span style="color: rgba(255, 255, 255, 0.9); font-size: 1rem; font-weight: 500;">Derni√®re mise √† jour IA pour ce bet : <span id="analysis-time">19:42</span></span>
        </div>
      </div>

      <div class="dialog-content">
        <div id="loading-section" class="loading-container">
          <div class="loading-dots">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
          </div>
          <p style="color: rgba(255, 255, 255, 0.6);">Analyse en cours...</p>
        </div>

        <div id="analysis-content" style="display: none;">
          <!-- Chance de gagner -->
          <div class="confidence-section">
            <div class="confidence-label">CHANCE DE GAGNER</div>
            <div class="confidence-value"><span id="dialog-win-percentage">92</span>%</div>
            <div class="confidence-progress">
              <div id="dialog-progress-bar" class="confidence-progress-bar" style="width: 0%"></div>
            </div>
          </div>

          <!-- ========== TEMPLATE NHL ========== -->
          <div id="template-nhl">
          <h3 class="analysis-section-title">Analyse du march√© & meilleures cotes</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî March√© & pricing (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Analyse de la probabilit√© implicite du march√© pour l'√©quipe domicile, obtenue par conversion des cotes en pourcentage r√©el.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî March√© & pricing (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Comparaison inter-bookmakers pour identifier la meilleure cote disponible ("best price") et mesurer l'efficience du march√©.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî March√© & pricing (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Observation du mouvement de ligne (line movement) afin de d√©terminer si la valeur √©volue en faveur ou en d√©faveur de l'√©quipe domicile.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî March√© & pricing (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ D√©tection d'un √©ventuel closing line value (CLV) et influence du sharp money par rapport au public money.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî March√© & pricing (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Analyse de la probabilit√© implicite du march√© pour l'√©quipe ext√©rieur, obtenue par conversion des cotes en pourcentage r√©el.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî March√© & pricing (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Comparaison inter-bookmakers pour identifier la meilleure cote disponible ("best price") et mesurer l'efficience du march√©.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî March√© & pricing (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Observation du mouvement de ligne (line movement) afin de d√©terminer si la valeur √©volue en faveur ou en d√©faveur de l'√©quipe ext√©rieur.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî March√© & pricing (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ D√©tection d'un √©ventuel closing line value (CLV) et influence du sharp money par rapport au public money.
              </div>
            </div>
          </div>

          <!-- Historique des confrontations (H2H) -->
          <h3 class="analysis-section-title">Historique des confrontations (H2H)</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Historique des confrontations (H2H)</div>
              <div class="analysis-subsection-content">
                Analyse des pr√©c√©dents affrontements entre les deux √©quipes, incluant les tendances r√©currentes du matchup, les styles dominants lors de ces duels, ainsi que les profils statistiques qui se r√©p√®tent historiquement lorsque ces formations s'opposent.
              </div>
            </div>
          </div>

          <!-- Lineup / alignement projet√© du jour -->
          <h3 class="analysis-section-title">Lineup / alignement projet√© du jour</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Alignement projet√© du jour</div>
              <div class="analysis-subsection-content">
                Analyse de l'alignement pr√©vu pour chaque √©quipe, incluant les trios et paires d√©fensives projet√©es, la disponibilit√© des joueurs cl√©s, les √©ventuels absents, ainsi que l'impact attendu des lignes d√©ploy√©es sur le rythme offensif et la structure tactique globale.
              </div>
            </div>
          </div>

          <!-- Analyse du jeu de puissance & discipline -->
          <h3 class="analysis-section-title">Analyse du jeu de puissance & discipline</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Power Play (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                Analyse de l'efficacit√© du power play de l'√©quipe domicile, incluant la structure tactique en zone offensive, la qualit√© des entr√©es de zone contr√¥l√©es, la cr√©ation de chances dangereuses (HDCF) et l'ex√©cution globale des s√©quences en sup√©riorit√© num√©rique (xGoals/PP).
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Power Play (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                Analyse de l'efficacit√© du power play de l'√©quipe ext√©rieur, incluant la structure tactique en zone offensive, la qualit√© des entr√©es de zone contr√¥l√©es, la cr√©ation de chances dangereuses (HDCF) et l'ex√©cution globale des s√©quences en sup√©riorit√© num√©rique (xGoals/PP).
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Discipline & P√©nalit√©s (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                Analyse du niveau de discipline de l'√©quipe domicile, bas√©e sur la fr√©quence des p√©nalit√©s conc√©d√©es, le temps pass√© en inf√©riorit√© num√©rique, l'impact sur le momentum et l'exposition d√©fensive r√©p√©t√©e en PK.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Discipline & P√©nalit√©s (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                Analyse du niveau de discipline de l'√©quipe ext√©rieur, bas√©e sur la fr√©quence des p√©nalit√©s conc√©d√©es, le temps pass√© en inf√©riorit√© num√©rique, l'impact sur le momentum et l'exposition d√©fensive r√©p√©t√©e en PK.
              </div>
            </div>
          </div>

          <!-- Analyse du gardien & structure d√©fensive -->
          <h3 class="analysis-section-title">Analyse du gardien & structure d√©fensive</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Performance du gardien (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                Analyse du rendement du gardien projet√© de l'√©quipe domicile, bas√©e sur l'efficacit√© face aux tirs √† haut danger, la qualit√© technique, la constance sous pression et les indicateurs avanc√©s type GSAA.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Performance du gardien (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                Analyse du rendement du gardien projet√© de l'√©quipe ext√©rieur, bas√©e sur l'efficacit√© face aux tirs √† haut danger, la qualit√© technique, la constance sous pression et les indicateurs avanc√©s type GSAA.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Structure d√©fensive (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                Analyse de la structure d√©fensive de l'√©quipe domicile, incluant la protection du slot, la gestion des rebonds, la transition d√©fensive et la limitation des occasions adverses de haute qualit√©.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Structure d√©fensive (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                Analyse de la structure d√©fensive de l'√©quipe ext√©rieur, incluant la protection du slot, la gestion des rebonds, la transition d√©fensive et la limitation des occasions adverses de haute qualit√©.
              </div>
            </div>
          </div>

          <!-- Analyse de la possession & qualit√© offensive -->
          <h3 class="analysis-section-title">Analyse de la possession & qualit√© offensive</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Expected Goals (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                Analyse de la production offensive de l'√©quipe domicile, bas√©e sur la quantit√© et la qualit√© des tirs g√©n√©r√©s, les emplacements de tir et la probabilit√© attendue de convertir les occasions (xG).
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Expected Goals (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                Analyse de la production offensive de l'√©quipe ext√©rieur, bas√©e sur la quantit√© et la qualit√© des tirs g√©n√©r√©s, les emplacements de tir et la probabilit√© attendue de convertir les occasions (xG).
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Possession (Corsi/Fenwick) (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                Analyse du contr√¥le du palet de l'√©quipe domicile, √† travers le volume de tirs tent√©s, la capacit√© √† maintenir la zone offensive et la dict√©e du rythme de jeu.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Possession (Corsi/Fenwick) (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                Analyse du contr√¥le du palet de l'√©quipe ext√©rieur, √† travers le volume de tirs tent√©s, la capacit√© √† maintenir la zone offensive et la dict√©e du rythme de jeu.
              </div>
            </div>
          </div>

          <!-- Analyse de l'alignement & profondeur -->
          <h3 class="analysis-section-title">Analyse de l'alignement & profondeur</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Profondeur offensive (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                Analyse de la profondeur de l'√©quipe domicile, incluant la contribution du top-6, l'impact du bottom-6, la flexibilit√© tactique et la capacit√© √† maintenir la pression offensive sur plusieurs trios.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Profondeur offensive (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                Analyse de la profondeur de l'√©quipe ext√©rieur, incluant la contribution du top-6, l'impact du bottom-6, la flexibilit√© tactique et la capacit√© √† maintenir la pression offensive sur plusieurs trios.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Stabilit√© d√©fensive (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                Analyse de la profondeur d√©fensive de l'√©quipe domicile, bas√©e sur la solidit√© du top-4, la mobilit√© en relance et la gestion des transitions adverses.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Stabilit√© d√©fensive (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                Analyse de la profondeur d√©fensive de l'√©quipe ext√©rieur, bas√©e sur la solidit√© du top-4, la mobilit√© en relance et la gestion des transitions adverses.
              </div>
            </div>
          </div>

          <!-- Analyse du contexte & fatigue -->
          <h3 class="analysis-section-title">Analyse du contexte & fatigue</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Cadence & calendrier (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                Analyse du contexte physique de l'√©quipe domicile, incluant l'encha√Ænement des matchs, le repos disponible, la pr√©sence √©ventuelle d'un back-to-back et la charge de d√©placement.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Cadence & calendrier (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                Analyse du contexte physique de l'√©quipe ext√©rieur, incluant l'encha√Ænement des matchs, le repos disponible, la pr√©sence √©ventuelle d'un back-to-back et la charge de d√©placement.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Avantage domicile / ext√©rieur (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                Analyse de la performance contextuelle de l'√©quipe domicile, selon qu'elle √©volue √† domicile ou sur la route, et l'impact du dernier changement sur les matchups.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Avantage domicile / ext√©rieur (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                Analyse de la performance contextuelle de l'√©quipe ext√©rieur, selon qu'elle √©volue √† domicile ou sur la route, et l'impact du dernier changement sur les matchups.
              </div>
            </div>
          </div>

          <!-- Autres analyses compl√©mentaires -->
          <h3 class="analysis-section-title">Autres analyses compl√©mentaires</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Facteurs additionnels</div>
              <div class="analysis-subsection-content">
                L'IA peut √©galement prendre en compte d'autres variables secondaires telles que la dynamique mentale, la confiance du vestiaire, la qualit√© du coaching staff, la strat√©gie d'entr√©e de zone, l'ex√©cution en transition neutre, le style de match attendu (haut √©v√©nement / bas √©v√©nement) et l'adaptation tactique entre p√©riodes.
              </div>
            </div>
          </div>
          <!-- ========== FIN TEMPLATE NHL ========== -->
          </div>

          <!-- ========== TEMPLATE NFL ========== -->
          <div id="template-nfl" style="display:none;">
          
          <!-- Analyse du march√© & meilleures cotes -->
          <h3 class="analysis-section-title">Analyse du march√© & meilleures cotes</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Probabilit√© implicite - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Analyse de la probabilit√© implicite du march√© pour √âquipe domicile, obtenue par conversion des cotes en pourcentage r√©el.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Comparaison bookmakers - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Comparaison inter-bookmakers pour identifier la meilleure cote disponible ("best price") et mesurer l'efficience du march√©.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Mouvement de ligne - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Observation du mouvement de ligne (line movement) afin de d√©terminer si la valeur √©volue en faveur ou en d√©faveur de √âquipe domicile.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Closing line value - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                D√©tection d'un √©ventuel closing line value (CLV) et influence du sharp money par rapport au public money.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Probabilit√© implicite - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Analyse de la probabilit√© implicite du march√© pour √âquipe ext√©rieur, obtenue par conversion des cotes en pourcentage r√©el.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Comparaison bookmakers - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Comparaison inter-bookmakers pour identifier la meilleure cote disponible ("best price") et mesurer l'efficience du march√©.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Mouvement de ligne - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Observation du mouvement de ligne (line movement) afin de d√©terminer si la valeur √©volue en faveur ou en d√©faveur de √âquipe ext√©rieur.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Closing line value - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                D√©tection d'un √©ventuel closing line value (CLV) et influence du sharp money par rapport au public money.
              </div>
            </div>
          </div>

          <!-- Historique des confrontations -->
          <h3 class="analysis-section-title">Historique des confrontations (H2H)</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Analyse H2H</div>
              <div class="analysis-subsection-content">
                Analyse des pr√©c√©dents affrontements entre les deux √©quipes, incluant les tendances de matchups, la r√©ussite des quarterbacks face aux d√©fenses adverses, les performances red zone et les sch√©mas dominants historiquement.
              </div>
            </div>
          </div>

          <!-- Alignement offensif & d√©fensif -->
          <h3 class="analysis-section-title">Alignement offensif & d√©fensif projet√©</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Starters offensifs - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Analyse des starters offensifs projet√©s pour √âquipe domicile (QB, WR1/2/3, RB, TE, OL), en lien avec la production attendue et les matchups d√©fensifs.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Starters d√©fensifs - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Analyse des starters d√©fensifs projet√©s pour √âquipe domicile, y compris le front-7, les sch√©mas de couverture (zone, homme) et les playmakers cl√©s.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Starters offensifs - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Analyse des starters offensifs projet√©s pour √âquipe ext√©rieur, en lien avec la production attendue et les matchups d√©fensifs.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Starters d√©fensifs - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Analyse des starters d√©fensifs projet√©s pour √âquipe ext√©rieur, y compris le front-7, les sch√©mas de couverture (zone, homme) et les playmakers cl√©s.
              </div>
            </div>
          </div>

          <!-- Quarterback & efficacit√© a√©rienne -->
          <h3 class="analysis-section-title">Quarterback & efficacit√© a√©rienne</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">QB - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Analyse du rendement du quarterback de √âquipe domicile : lecture pr√©-snap, efficacit√© sous pression, production en red zone, mobilit√©, TD/INT ratio et EPA/play.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">QB - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Analyse du rendement du quarterback de √âquipe ext√©rieur : lecture pr√©-snap, efficacit√© sous pression, production en red zone, mobilit√©, TD/INT ratio et EPA/play.
              </div>
            </div>
          </div>

          <!-- Jeu au sol & contr√¥le du tempo -->
          <h3 class="analysis-section-title">Jeu au sol & contr√¥le du tempo</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Jeu au sol - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Analyse du jeu au sol de √âquipe domicile : efficacit√© par tentative (YPC), blocking de la ligne offensive, efficacit√© en 3e & court, contr√¥le de l'horloge.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Jeu au sol - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Analyse du jeu au sol de √âquipe ext√©rieur : efficacit√© par tentative (YPC), blocking de la ligne offensive, efficacit√© en 3e & court, contr√¥le de l'horloge.
              </div>
            </div>
          </div>

          <!-- D√©fense contre la passe & contre la course -->
          <h3 class="analysis-section-title">D√©fense contre la passe & contre la course</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">D√©fense vs passe - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                √âvaluation de la d√©fense de √âquipe domicile contre la passe : efficacit√© des CB, pression sur le QB adverse, taux de compl√©tion autoris√©, DVOA Pass Defense.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">D√©fense vs course - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                √âvaluation de la d√©fense de √âquipe domicile contre la course : gestion des gaps, taux de plaquage manqu√©, yards conc√©d√©s apr√®s contact.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">D√©fense vs passe - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                √âvaluation de la d√©fense de √âquipe ext√©rieur contre la passe : efficacit√© des CB, pression sur le QB adverse, taux de compl√©tion autoris√©, DVOA Pass Defense.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">D√©fense vs course - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                √âvaluation de la d√©fense de √âquipe ext√©rieur contre la course : gestion des gaps, taux de plaquage manqu√©, yards conc√©d√©s apr√®s contact.
              </div>
            </div>
          </div>

          <!-- 3rd down / red zone / discipline -->
          <h3 class="analysis-section-title">3rd down / red zone / discipline</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">3rd down & red zone - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Efficacit√© de √âquipe domicile sur les 3rd downs (conversion %) et en red zone (TD %), incluant le playcalling et les tendances de game script.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Discipline - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Discipline globale : p√©nalit√©s par match, perte de yardage √©vitable, impact sur les drives.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">3rd down & red zone - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Efficacit√© de √âquipe ext√©rieur sur les 3rd downs (conversion %) et en red zone (TD %), incluant le playcalling et les tendances de game script.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Discipline - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Discipline globale : p√©nalit√©s par match, perte de yardage √©vitable, impact sur les drives.
              </div>
            </div>
          </div>

          <!-- Sp√©cial teams & kicker -->
          <h3 class="analysis-section-title">Sp√©cial teams & kicker</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Unit√©s sp√©ciales - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Analyse des unit√©s sp√©ciales de √âquipe domicile : punt coverage, kick return, erreurs critiques, performance du kicker et taux de r√©ussite FG.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Unit√©s sp√©ciales - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Analyse des unit√©s sp√©ciales de √âquipe ext√©rieur : punt coverage, kick return, erreurs critiques, performance du kicker et taux de r√©ussite FG.
              </div>
            </div>
          </div>

          <!-- Coaching, strat√©gie & adaptabilit√© -->
          <h3 class="analysis-section-title">Coaching, strat√©gie & adaptabilit√©</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Coaching - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Profil du coaching staff de √âquipe domicile : agressivit√© en 4th down, prise de d√©cision analytique, game planning, gestion de l'horloge, playcalling offensif/d√©fensif.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Coaching - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Profil du coaching staff de √âquipe ext√©rieur : agressivit√© en 4th down, prise de d√©cision analytique, game planning, gestion de l'horloge, playcalling offensif/d√©fensif.
              </div>
            </div>
          </div>

          <!-- Contexte physique & calendrier -->
          <h3 class="analysis-section-title">Contexte physique & calendrier</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Contexte physique - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Analyse du contexte physique de √âquipe domicile : jours de repos, encha√Ænement de matchs, fatigue accumul√©e, voyages transcontinentaux.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Contexte physique - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Analyse du contexte physique de √âquipe ext√©rieur : jours de repos, encha√Ænement de matchs, fatigue accumul√©e, voyages transcontinentaux.
              </div>
            </div>
          </div>

          <!-- Autres facteurs contextuels -->
          <h3 class="analysis-section-title">Autres facteurs contextuels</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Conditions m√©t√©o</div>
              <div class="analysis-subsection-content">
                Analyse des conditions m√©t√©o (vent, pluie, temp√©rature) et impact potentiel sur le playcalling offensif et les kicking units.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <span class="ai-badge">IA</span>
              </div>
              <div class="analysis-subsection-title">Facteurs psychologiques</div>
              <div class="analysis-subsection-content">
                Analyse de la motivation (match crucial, rivalit√©, revenge game), du momentum psychologique et de la pression m√©diatique.
              </div>
            </div>
          </div>

          </div>
          <!-- ========== FIN TEMPLATE NFL ========== -->
        </div>
      </div>
    </div>
  </div>

  <script>
    // State
    let currentBetAmount = 100;
    let currentMultiplier = 1.74;
    let currentCard = null;
    let currentPage = 'bet';
    let isMobileSidebarOpen = false;

    // ===========================
    // SYST√àME D'AUTO-INCR√âMENTATION
    // ===========================
    let autoIncrementInterval = null;
    let activeCardCounterEl = null;
    
    function startAutoIncrement(initialCount, intervalMinutes, amount) {
      // Arr√™ter l'intervalle pr√©c√©dent s'il existe
      if (autoIncrementInterval) {
        clearInterval(autoIncrementInterval);
      }
      
      // Nettoyer la valeur : enlever tous les espaces et caract√®res non num√©riques sauf les chiffres
      const cleanedCount = String(initialCount).replace(/\s/g, '').replace(/[^\d]/g, '');
      let currentCount = parseInt(cleanedCount) || 2843;
      
      console.log(`üöÄ Auto-incr√©mentation d√©marr√©e: ${currentCount} donn√©es de base, +${amount} toutes les ${intervalMinutes} min`);
      
      // D√©marrer l'incr√©mentation automatique
      const intervalMs = intervalMinutes * 60 * 1000; // Convertir minutes en millisecondes
      console.log(`‚è±Ô∏è Lancement setInterval avec`, { intervalMinutes, intervalMs, firstTickIn: `${intervalMs}ms` });
      
      autoIncrementInterval = setInterval(() => {
        currentCount += parseInt(amount);
        updateDataCount(currentCount);
        console.log(`‚úÖ Auto-incr√©mentation: ${currentCount} donn√©es IA (+${amount})`);
      }, intervalMs);
    }
    
    function stopAutoIncrement() {
      if (autoIncrementInterval) {
        clearInterval(autoIncrementInterval);
        autoIncrementInterval = null;
        console.log('üõë Auto-incr√©mentation arr√™t√©e');
      }
    }
    
    function updateDataCount(count) {
      const dialogDataCount = document.getElementById('dialog-data-count');
      if (dialogDataCount) {
        // Animation flash pour rendre le changement visible
        dialogDataCount.style.transition = 'color 0.3s ease';
        dialogDataCount.style.color = '#16a34a'; // Vert
        dialogDataCount.textContent = count.toLocaleString('fr-FR');
        
        setTimeout(() => {
          dialogDataCount.style.color = ''; // Revenir √† la couleur normale
        }, 500);
      }
      
      // Mettre √† jour le compteur au-dessus de la carte
      if (activeCardCounterEl) {
        activeCardCounterEl.textContent = count.toLocaleString('fr-FR');
      }
      
      console.log(`üìä Compteur mis √† jour: ${count} (Dialog: ${!!dialogDataCount}, Card: ${!!activeCardCounterEl})`);
    }

    // ===========================
    // AUTO-INCR√âMENTATION GLOBALE (compteurs au-dessus des cartes)
    // ===========================
    const cardAutoIntervals = new Map(); // Map<Element, number>

    function updateCounterElement(el, count) {
      if (!el) return;
      el.textContent = Number(count).toLocaleString('fr-FR');
    }

    function startCardCounterAutoIncrement(counterEl, initialCount, intervalMinutes, amount) {
      if (!counterEl) return;

      // Stopper interval pr√©c√©dent pour cet √©l√©ment
      const previous = cardAutoIntervals.get(counterEl);
      if (previous) clearInterval(previous);

      // Nettoyage + parsing de la valeur initiale
      const cleaned = String(initialCount).replace(/\s/g, '').replace(/[^\d]/g, '');
      let current = parseInt(cleaned) || 2843;
      const step = parseInt(String(amount)) || 5;

      // Mettre √† jour imm√©diatement l'affichage (optionnel, rend visible tout de suite)
      updateCounterElement(counterEl, current);

      const intervalMs = Number(intervalMinutes) * 60 * 1000;
      if (!Number.isFinite(intervalMs) || intervalMs <= 0) return;

      console.log('üîÅ Auto-incr√©ment global activ√©', { current, step, intervalMinutes, intervalMs });
      const id = setInterval(() => {
        current += step;
        updateCounterElement(counterEl, current);
        console.log('‚ÜóÔ∏è Compteur carte mis √† jour', { current, step });
      }, intervalMs);

      cardAutoIntervals.set(counterEl, id);
    }

    function initGlobalAutoIncrementCounters() {
      // Pour chaque carte, lire les param√®tres sur le bouton "Voir analyse IA"
      const buttons = document.querySelectorAll('.bet-card .btn-analysis');
      buttons.forEach((btn) => {
        try {
          const card = btn.closest('.bet-card');
          if (!card) return;

          // Compteur au-dessus de la carte
          const counterAbove = card.previousElementSibling;
          if (!counterAbove || !counterAbove.classList.contains('ai-counter-above')) return;
          const countEl = counterAbove.querySelector('span span');
          if (!countEl) return;

          // Param√®tres
          const autoIncRaw = btn.dataset.autoIncrement;
          const enabled = String(autoIncRaw).toLowerCase() === 'true';
          if (!enabled) return;

          const rawInterval = btn.dataset.incrementInterval;
          const intervalParsed = Number.parseFloat(rawInterval);
          const interval = Number.isFinite(intervalParsed) && intervalParsed > 0 ? intervalParsed : 5;
          const amount = parseInt(btn.dataset.incrementAmount || '5') || 5;

          // Valeur initiale
          const initial = countEl.textContent || btn.dataset.aiDataCount || '2843';

          startCardCounterAutoIncrement(countEl, initial, interval, amount);
        } catch (e) {
          console.warn('‚ùóErreur init auto-incr√©ment carte', e);
        }
      });
    }

    // ===========================
    // FONCTIONS PRINCIPALES
    // ===========================

    // Calculate return
    function calculateReturn(amount) {
      return (amount * currentMultiplier).toFixed(2);
    }

    // Update display
    function updateDisplay() {
      if (!currentCard) return;
      
      // Mise (votre mise)
      const betAmountSmall = currentCard.querySelector('.bet-amount-value-small');
      if (betAmountSmall) {
        betAmountSmall.textContent = '$' + currentBetAmount;
      }
      
      // Cashout (montant total)
      const cashoutAmount = currentCard.querySelector('.cashout-amount');
      if (cashoutAmount) {
        cashoutAmount.textContent = '$' + calculateReturn(currentBetAmount);
      }
      
      // B√©n√©fice
      const cashoutProfit = currentCard.querySelector('.cashout-profit');
      if (cashoutProfit) {
        const profit = (currentBetAmount * currentMultiplier - currentBetAmount).toFixed(2);
        cashoutProfit.textContent = '+$' + profit + ' b√©n√©fice';
      }
      
      // Anciens √©l√©ments (pour compatibilit√©)
      const betDisplay = currentCard.querySelector('.bet-amount-value');
      const gainDisplay = currentCard.querySelector('.gain-value');
      
      if (betDisplay) {
        betDisplay.textContent = '$' + currentBetAmount;
      }
      if (gainDisplay) {
        gainDisplay.textContent = '$' + calculateReturn(currentBetAmount);
      }
    }

    // Set bet amount
    function setBetAmount(amount) {
      currentBetAmount = amount;
      updateDisplay();
      closeBetDialog();
    }

    // Custom bet amount
    function customBetAmount() {
      const amount = prompt('Entrez le montant de votre mise:');
      if (amount && !isNaN(amount) && amount > 0) {
        setBetAmount(parseFloat(amount));
      }
    }

    // Toggle sidebar (mobile)
    function toggleSidebar() {
      const sidebar = document.querySelector('.sidebar');
      const overlay = document.querySelector('.overlay');
      isMobileSidebarOpen = !isMobileSidebarOpen;
      
      if (isMobileSidebarOpen) {
        sidebar.classList.add('active');
        overlay.classList.add('active');
        document.body.classList.add('body-no-scroll');
      } else {
        sidebar.classList.remove('active');
        overlay.classList.remove('active');
        document.body.classList.remove('body-no-scroll');
      }
    }

    // Navigate to page
    function navigateTo(event, pageName) {
      if (event) {
        event.preventDefault();
      }

      // Sauvegarder les cartes marqu√©es avant de naviguer
      if (typeof window.checkAndSaveBlocks === 'function') {
        window.checkAndSaveBlocks();
      }

      // Afficher le chargement AI pour les pages bet et parlay
      if (pageName === 'bet' || pageName === 'parlay') {
        const loadingOverlay = document.getElementById('ai-loading-overlay');
        loadingOverlay.classList.add('active');
        document.body.classList.add('body-no-scroll');
        
        // 75% du temps: 0.7s, 25% du temps: 3s
        const loadingDuration = Math.random() < 0.75 ? 700 : 3000;
        
        setTimeout(() => {
          loadingOverlay.classList.remove('active');
          document.body.classList.remove('body-no-scroll');
          performNavigation(pageName);
        }, loadingDuration);
      } else {
        performNavigation(pageName);
      }
    }

    // Perform the actual navigation
    function performNavigation(pageName) {
      // Hide all pages
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });

      // Show selected page
      const targetPage = document.getElementById('page-' + pageName);
      if (targetPage) {
        targetPage.classList.add('active');
      }

      // Update active nav item
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
      });
      const navItem = document.querySelector(`.nav-item[data-page="${pageName}"]`);
      if (navItem) {
        navItem.classList.add('active');
      }

      // Close mobile sidebar
      if (isMobileSidebarOpen) {
        toggleSidebar();
      }

      // Update current page
      currentPage = pageName;

      // Persist current page for editor reloads
      try { localStorage.setItem('dashboard_current_page', pageName); } catch {}

      // Charger l'historique Supabase si on navigue vers ces pages
      if (pageName === 'historique-bet' && typeof window.loadBetHistory === 'function') {
        window.loadBetHistory();
      } else if (pageName === 'historique-parlay' && typeof window.loadParlayHistory === 'function') {
        window.loadParlayHistory();
      }

      // Update URL hash
      window.location.hash = pageName;
    }

    // Open bet dialog
    function openBetDialog(element) {
      currentCard = element.closest('.bet-card');
      const multiplier = parseFloat(element.dataset.multiplier);
      
      if (!isNaN(multiplier)) {
        currentMultiplier = multiplier;
      }
      
      document.getElementById('bet-dialog').classList.add('active');
    }

    // Close bet dialog
    function closeBetDialog() {
      document.getElementById('bet-dialog').classList.remove('active');
    }

    // Open analysis dialog
    function openAnalysisDialog(trigger) {
      const dialogWinPercentage = document.getElementById('dialog-win-percentage');
      const dialogProgressBar = document.getElementById('dialog-progress-bar');
      const dialogDataCount = document.getElementById('dialog-data-count');

      // R√©cup√©rer les valeurs depuis le bouton cliqu√©
      let pctRaw = trigger?.dataset?.winPercentage;
      let dataCountRaw = trigger?.dataset?.aiDataCount;

      // R√©cup√©rer les infos de template et √©quipes
      const sportType = (trigger?.dataset?.sportType || 'nhl').toLowerCase();
      const team1 = trigger?.dataset?.team1 || '√âQUIPE DOMICILE';
      const team2 = trigger?.dataset?.team2 || '√âQUIPE EXT√âRIEUR';
      
      // R√©cup√©rer les param√®tres d'auto-incr√©mentation
      const autoIncrement = trigger?.dataset?.autoIncrement === 'true' || trigger?.dataset?.autoIncrement === true;
      const rawInterval = trigger?.dataset?.incrementInterval;
      const parsedInterval = Number.parseFloat(rawInterval);
      const incrementInterval = Number.isFinite(parsedInterval) && parsedInterval > 0 ? parsedInterval : 5;
      const incrementAmount = parseInt(trigger?.dataset?.incrementAmount) || 5;

      // Afficher le bon template
      const nhlEl = document.getElementById('template-nhl');
      const nflEl = document.getElementById('template-nfl');
      if (nhlEl && nflEl) {
        if (sportType === 'nfl') {
          nhlEl.style.display = 'none';
          nflEl.style.display = 'block';
        } else {
          nhlEl.style.display = 'block';
          nflEl.style.display = 'none';
        }
      }

      // Remplacer les placeholders d'√©quipes dans tout le contenu
      const contentRoot = document.getElementById('analysis-content');
      if (contentRoot) {
        const targets = contentRoot.querySelectorAll('.analysis-subsection-title, .analysis-subsection-content');
        targets.forEach((el) => {
          if (!el.dataset.template) {
            el.dataset.template = el.innerHTML;
          }
          el.innerHTML = el.dataset.template
            .replace(/√âquipe domicile/g, team1)
            .replace(/√âquipe ext√©rieur/g, team2);
        });
      }

      // Fallback: chercher dans la carte parente si les data-attributes ne sont pas pr√©sents
      if (!pctRaw && trigger) {
        const card = trigger.closest('.bet-card');
        const confidenceEl = card?.querySelector('.confidence-percentage');
        if (confidenceEl) {
          pctRaw = confidenceEl.textContent;
        }
      }

      if (!dataCountRaw && trigger) {
        const card = trigger.closest('.bet-card');
        const counterAbove = card?.previousElementSibling;
        if (counterAbove?.classList?.contains('ai-counter-above')) {
          const countEl = counterAbove.querySelector('span span');
          if (countEl) {
            dataCountRaw = countEl.textContent;
            activeCardCounterEl = countEl; // M√©moriser l'√©l√©ment √† mettre √† jour
          }
        }
      }

      // Normaliser et appliquer le pourcentage
      if (dialogWinPercentage && dialogProgressBar && pctRaw) {
        const pct = Math.max(0, Math.min(100, parseFloat(String(pctRaw).replace('%', '').replace(',', '.').trim())));
        if (!Number.isNaN(pct)) {
          dialogWinPercentage.textContent = String(pct).replace(/\.0+$/, '');
          dialogProgressBar.style.width = pct + '%';
        }
      }

      // Appliquer le data count
      if (dialogDataCount && dataCountRaw) {
        dialogDataCount.textContent = String(dataCountRaw).trim();
      }
      
      // Afficher l'overlay de chargement AI
      const loadingOverlay = document.getElementById('ai-loading-overlay');
      loadingOverlay.classList.add('active');
      document.body.classList.add('body-no-scroll');
      
      // Dur√©e al√©atoire entre 2 et 3 secondes (2000-3000ms)
      const randomDuration = Math.floor(Math.random() * 1000) + 2000;
      
      setTimeout(() => {
        // Cacher l'overlay de chargement
        loadingOverlay.classList.remove('active');
        document.body.classList.remove('body-no-scroll');
        
        // Mettre √† jour l'heure actuelle
        const now = new Date();
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const timeElement = document.getElementById('analysis-time');
        if (timeElement) {
          timeElement.textContent = `${hours}:${minutes}`;
        }
        
        // Ouvrir le dialog d'analyse directement avec le contenu
        const dialog = document.getElementById('analysis-dialog');
        const loading = document.getElementById('loading-section');
        const content = document.getElementById('analysis-content');
        
        dialog.classList.add('active');
        loading.style.display = 'none';
        content.style.display = 'block';
        
        // D√©marrer l'auto-incr√©mentation APR√àS l'ouverture du dialog
        if (autoIncrement) {
          console.log(`üéØ Param√®tres auto-incr√©mentation:`, {
            enabled: autoIncrement,
            interval: `${incrementInterval} minutes`,
            intervalMs: incrementInterval * 60 * 1000,
            amount: incrementAmount,
            initialCount: dataCountRaw,
            cleanedCount: String(dataCountRaw).replace(/\s/g, '')
          });
          startAutoIncrement(dataCountRaw, incrementInterval, incrementAmount);
        } else {
          console.log('‚ö†Ô∏è Auto-incr√©mentation d√©sactiv√©e');
        }
      }, randomDuration);
    }

    // Close analysis dialog
    function closeAnalysisDialog() {
      document.getElementById('analysis-dialog').classList.remove('active');
      // Arr√™ter l'auto-incr√©mentation lors de la fermeture
      stopAutoIncrement();
      activeCardCounterEl = null; // R√©initialiser la r√©f√©rence
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      updateDisplay();

      // Initialiser l'auto-incr√©mentation globale des compteurs au-dessus des cartes
      initGlobalAutoIncrementCounters();

      // Handle hash navigation with persistence
      const hash = window.location.hash.substring(1);
      let savedPage = '';
      try { savedPage = localStorage.getItem('dashboard_current_page') || ''; } catch {}
      const targetPage = hash || savedPage || 'bet';
      navigateTo(null, targetPage);

      // Update time display
      updateTime();
      setInterval(updateTime, 1000);

      // In Shopify editor, preserve the current page across partial reloads
      document.addEventListener('shopify:section:load', () => {
        try {
          const p = localStorage.getItem('dashboard_current_page');
          if (p && typeof performNavigation === 'function') {
            performNavigation(p);
          }
        } catch {}
      });
      document.addEventListener('shopify:section:select', () => {
        try {
          const p = localStorage.getItem('dashboard_current_page');
          if (p && typeof performNavigation === 'function') {
            performNavigation(p);
          }
        } catch {}
      });
    });

    // Update time display
    function updateTime() {
      const now = new Date();
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const timeString = `${hours}:${minutes}`;
      
      const sidebarTime = document.getElementById('sidebar-time');
      const headerTime = document.getElementById('header-time');
      
      if (sidebarTime) sidebarTime.textContent = timeString;
      if (headerTime) headerTime.textContent = timeString;
    }

    // Handle browser back/forward
    window.addEventListener('hashchange', () => {
      const hash = window.location.hash.substring(1);
      if (hash) {
        navigateTo(null, hash);
      }
    });

    // ===== GESTION DES MEMBRES CONNECT√âS LIVE =====
    // Configuration Supabase
    const SUPABASE_URL = 'https://ycvfyorgkhuxcosfrsxs.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InljdmZ5b3Jna2h1eGNvc2Zyc3hzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4Njc0NTcsImV4cCI6MjA3NzQ0MzQ1N30.vQEzzlScCD6a52rM1CMfK2fFLKKqz-_WuZQ09YdTsdU';

    let currentMembers = {{ section.settings.members_base | default: 1000 }};
    let memberCountChannel = null;
    
    console.log('üéØ Initialisation du compteur de membres');

    function updateMemberCount(newCount) {
      const sidebarCount = document.getElementById('sidebar-member-count');
      const headerCount = document.getElementById('header-member-count');
      
      console.log('üìä Mise √† jour membres:', currentMembers, '‚Üí', newCount);
      
      // Animation flip
      [sidebarCount, headerCount].forEach(element => {
        if (element) {
          element.style.animation = 'flip 0.6s ease-in-out';
          
          setTimeout(() => {
            element.textContent = newCount;
            element.style.animation = '';
            console.log('‚úÖ Animation termin√©e pour:', element.id);
          }, 300);
        }
      });
    }

    // Fonction pour initialiser le compteur depuis Supabase
    async function initMemberCounter() {
      try {
        console.log('üîÑ Initialisation du compteur depuis Supabase...');
        
        // V√©rifier que la biblioth√®que Supabase est charg√©e
        if (!window.supabase) {
          console.error('‚ùå Biblioth√®que Supabase non charg√©e');
          return;
        }

        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        // 1. Charger le compteur actuel depuis Supabase
        const { data, error } = await supabase
          .from('live_member_count')
          .select('current_count')
          .single();
        
        if (error) {
          console.error('‚ùå Erreur lors du chargement:', error);
          return;
        }
        
        if (data) {
          console.log('‚úÖ Compteur charg√©:', data.current_count);
          currentMembers = data.current_count;
          updateMemberCount(currentMembers);
        }
        
        // 2. S'abonner aux mises √† jour en temps r√©el
        memberCountChannel = supabase
          .channel('member-count-changes')
          .on(
            'postgres_changes',
            {
              event: 'UPDATE',
              schema: 'public',
              table: 'live_member_count'
            },
            (payload) => {
              console.log('üîÑ Mise √† jour re√ßue de Supabase:', payload.new.current_count);
              currentMembers = payload.new.current_count;
              updateMemberCount(currentMembers);
            }
          )
          .subscribe((status) => {
            console.log('üì° Statut de la souscription:', status);
          });

        // 3. Fallback polling toutes les 10s (si realtime indisponible)
        setInterval(async () => {
          try {
            const { data: pollData, error: pollError } = await supabase
              .from('live_member_count')
              .select('current_count')
              .single();
            if (!pollError && pollData && pollData.current_count !== currentMembers) {
              console.log('‚è±Ô∏è Polling maj:', pollData.current_count);
              currentMembers = pollData.current_count;
              updateMemberCount(currentMembers);
            }
          } catch (e) {
            console.warn('‚ö†Ô∏è Erreur polling compteur', e);
          }
        }, 10000);

        // 4. Failsafe: Appel direct de l'Edge Function toutes les 15-20s
        const triggerUpdate = async () => {
          try {
            const response = await fetch('https://ycvfyorgkhuxcosfrsxs.supabase.co/functions/v1/update-member-count', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({})
            });
            if (response.ok) {
              console.log('üîÑ Mise √† jour manuelle d√©clench√©e');
            }
          } catch (e) {
            console.warn('‚ö†Ô∏è Erreur appel direct Edge Function', e);
          }
        };

        // Premier appel imm√©diat, puis toutes les 18s (15-20s)
        triggerUpdate();
        setInterval(triggerUpdate, 18000);
          
      } catch (error) {
        console.error('‚ùå Erreur d\'initialisation:', error);
      }
    }

    // Initial display
    updateMemberCount(currentMembers);
    
    // Charger la biblioth√®que Supabase et initialiser
    if (typeof window.supabase === 'undefined') {
      const script = document.createElement('script');
      script.src = 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.78.0/dist/umd/supabase.min.js';
      script.onload = () => {
        console.log('‚úÖ Biblioth√®que Supabase charg√©e');
        initMemberCounter();
      };
      script.onerror = () => {
        console.error('‚ùå Erreur de chargement de la biblioth√®que Supabase');
      };
      document.head.appendChild(script);
    } else {
      initMemberCounter();
    }
  </script>

  <!-- CSS pour l'animation flip -->
  <style>
    @keyframes flip {
      0% {
        transform: rotateX(0deg);
        opacity: 1;
      }
      50% {
        transform: rotateX(90deg);
        opacity: 0;
      }
      100% {
        transform: rotateX(0deg);
        opacity: 1;
      }
    }

    .member-count {
      display: inline-block;
      min-width: 2ch;
      text-align: center;
    }
  </style>

  <!-- Configuration Supabase -->
  <script>
    window.SUPABASE_CONFIG = {
      url: 'https://ycvfyorgkhuxcosfrsxs.functions.supabase.co',
      shopDomain: '{{ shop.permanent_domain }}'
    };
  </script>

  <!-- Inclure le fichier JS d'historique Supabase -->
  <script>
// Configuration Supabase (sera initialis√©e depuis window.SUPABASE_CONFIG)
var SUPABASE_URL = window.SUPABASE_URL || '';
var SHOP_DOMAIN = window.SHOP_DOMAIN || '';

// Initialisation
function initSupabaseConfig() {
  if (window.SUPABASE_CONFIG) {
    SUPABASE_URL = window.SUPABASE_CONFIG.url;
    SHOP_DOMAIN = window.SUPABASE_CONFIG.shopDomain;
    // M√©moriser sur window pour √©viter red√©claration et r√©utiliser
    window.SUPABASE_URL = SUPABASE_URL;
    window.SHOP_DOMAIN = SHOP_DOMAIN;
    console.log('‚úÖ Configuration Supabase initialis√©e', { SUPABASE_URL, SHOP_DOMAIN });
  } else {
    console.error('‚ùå Configuration Supabase manquante');
  }
}

// Utils URL des fonctions
function getFunctionsBase() {
  // Fallback si la config n'est pas fournie par le th√®me Shopify
  if (!SUPABASE_URL) return 'https://ycvfyorgkhuxcosfrsxs.functions.supabase.co';
  if (SUPABASE_URL.includes('.functions.supabase.co')) return SUPABASE_URL;
  return SUPABASE_URL.replace('.supabase.co', '.functions.supabase.co');
}

// Sanitize des URLs de logos pour √©viter les 404 (g√®re // et erreurs Liquid)
function sanitizeLogo(url) {
  const pixel = 'data:image/gif;base64,R0lGODlhAQABAAAAACw=';
  if (!url) return pixel;
  const u = String(url).trim();
  if (/Liquid error/i.test(u)) return pixel;
  if (u.startsWith('//')) return 'https:' + u;
  if (/^https?:\/\//.test(u)) return u;
  return pixel;
}

// ==================== EXTRACTION DE DONN√âES ====================
// Extraire toutes les donn√©es d'un bet_card
function extractBetData(blockElement) {
  const blockId = blockElement.getAttribute('data-block-id') || blockElement.id;
  
  const data = {
    shop_domain: SHOP_DOMAIN,
    block_id: blockId,
    sport_type: blockElement.getAttribute('data-sport-type'),
    ai_data_count: parseInt(blockElement.getAttribute('data-ai-data-count')) || 0,
    win_percentage: parseInt(blockElement.getAttribute('data-win-percentage')) || 0,
    bet_type: blockElement.getAttribute('data-bet-type'),
    team1_name: blockElement.getAttribute('data-team1-name'),
    team1_logo: blockElement.getAttribute('data-team1-logo'),
    team2_name: blockElement.getAttribute('data-team2-name'),
    team2_logo: blockElement.getAttribute('data-team2-logo'),
    match_time: blockElement.getAttribute('data-match-time'),
    match_date: blockElement.getAttribute('data-match-date'),
    multiplier: parseFloat(blockElement.getAttribute('data-multiplier')) || 0,
    bet_units: blockElement.getAttribute('data-bet-units'),
    odds: parseInt(blockElement.getAttribute('data-odds')) || 0,
    best_bookmaker: blockElement.getAttribute('data-best-bookmaker'),
    best_odds: parseInt(blockElement.getAttribute('data-best-odds')) || 0,
    result: blockElement.getAttribute('data-result') || 'pending',
    spread_value: blockElement.getAttribute('data-spread-value'),
    spread_team: blockElement.getAttribute('data-spread-team'),
    over_under_type: blockElement.getAttribute('data-over-under-type'),
    over_under_value: blockElement.getAttribute('data-over-under-value'),
    over_under_stat_type: blockElement.getAttribute('data-over-under-stat-type')
  };
  
  console.log('üì§ Donn√©es bet extraites:', data);
  return data;
}

// Extraire toutes les donn√©es d'un parlay_card
function extractParlayData(blockElement) {
  const blockId = blockElement.getAttribute('data-block-id') || blockElement.id;
  
  const data = {
    shop_domain: SHOP_DOMAIN,
    block_id: blockId,
    sport_type: blockElement.getAttribute('data-sport-type'),
    ai_data_count: parseInt(blockElement.getAttribute('data-ai-data-count')) || 0,
    win_percentage: parseInt(blockElement.getAttribute('data-win-percentage')) || 0,
    multiplier: parseFloat(blockElement.getAttribute('data-multiplier')) || 0,
    bet_units: blockElement.getAttribute('data-bet-units'),
    odds: parseInt(blockElement.getAttribute('data-odds')) || 0,
    best_bookmaker: blockElement.getAttribute('data-best-bookmaker'),
    best_odds: parseInt(blockElement.getAttribute('data-best-odds')) || 0,
    match_date: blockElement.getAttribute('data-match-date'),
    match_time: blockElement.getAttribute('data-match-time'),
    result: blockElement.getAttribute('data-result') || 'pending',
    legs: []
  };
  
  // Extraire les legs depuis les attributs data-legs (JSON)
  const legsJson = blockElement.getAttribute('data-legs');
  if (legsJson) {
    try {
      data.legs = JSON.parse(legsJson);
    } catch (e) {
      console.error('Erreur parsing legs:', e);
      data.legs = [];
    }
  }
  
  return data;
}

// ==================== SAUVEGARDE DANS SUPABASE ====================

// Sauvegarder un bet dans Supabase
async function saveBetToSupabase(blockElement) {
  try {
    console.log('üíæ Sauvegarde du bet dans Supabase...');
    
    const data = extractBetData(blockElement);
    
    const response = await fetch(`${getFunctionsBase()}/save-bet-to-history`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(data)
    });
    
    if (!response.ok) {
      throw new Error(`Erreur ${response.status}: ${response.statusText}`);
    }
    
    const result = await response.json();
    console.log('‚úÖ Bet sauvegard√©:', result);
    
    showSuccessToast('Bet sauvegard√© dans l\'historique !');
    
    // Rafra√Æchir l'historique automatiquement apr√®s la sauvegarde
    await loadBetHistory();
    
  } catch (error) {
    console.error('‚ùå Erreur lors de la sauvegarde:', error);
    showErrorToast('Erreur lors de la sauvegarde. V√©rifiez la console.');
  }
}

// Sauvegarder un parlay dans Supabase
async function saveParlayToSupabase(blockElement) {
  try {
    console.log('üíæ Sauvegarde du parlay dans Supabase...');
    
    const data = extractParlayData(blockElement);
    
    const response = await fetch(`${getFunctionsBase()}/save-parlay-to-history`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(data)
    });
    
    if (!response.ok) {
      throw new Error(`Erreur ${response.status}: ${response.statusText}`);
    }
    
    const result = await response.json();
    console.log('‚úÖ Parlay sauvegard√©:', result);
    
    showSuccessToast('Parlay sauvegard√© dans l\'historique !');
    
    // Rafra√Æchir l'historique automatiquement apr√®s la sauvegarde
    await loadParlayHistory();
    
  } catch (error) {
    console.error('‚ùå Erreur lors de la sauvegarde:', error);
    showErrorToast('Erreur lors de la sauvegarde. V√©rifiez la console.');
  }
}

// ==================== CHARGEMENT DE L'HISTORIQUE ====================

// Charger l'historique des bets depuis Supabase
async function loadBetHistory() {
  try {
    // S'assurer que la config est initialis√©e
    if (!SHOP_DOMAIN) initSupabaseConfig();
    
    console.log('üì• Chargement de l\'historique des bets...');
    const url = `${getFunctionsBase()}/get-bet-history?shop_domain=${SHOP_DOMAIN}`;
    console.log('‚ÜóÔ∏è Requ√™te:', url);
    const response = await fetch(url);
    
    if (!response.ok) {
      throw new Error(`Erreur ${response.status}`);
    }
    
    const data = await response.json();
    console.log('‚úÖ Historique charg√©:', data);
    
    displayBetHistory(data);
    
  } catch (error) {
    console.error('‚ùå Erreur chargement historique:', error);
    const emptyState = document.getElementById('bet-empty-state');
    if (emptyState) emptyState.style.display = 'block';
  }
}

// Charger l'historique des parlays depuis Supabase
async function loadParlayHistory() {
  try {
    // S'assurer que la config est initialis√©e
    if (!SHOP_DOMAIN) initSupabaseConfig();
    
    console.log('üì• Chargement de l\'historique des parlays...');
    const url = `${getFunctionsBase()}/get-parlay-history?shop_domain=${SHOP_DOMAIN}`;
    console.log('‚ÜóÔ∏è Requ√™te:', url);
    const response = await fetch(url);
    
    if (!response.ok) {
      throw new Error(`Erreur ${response.status}`);
    }
    
    const data = await response.json();
    console.log('‚úÖ Historique charg√©:', data);
    
    displayParlayHistory(data);
    
  } catch (error) {
    console.error('‚ùå Erreur chargement historique:', error);
    const emptyState = document.getElementById('parlay-empty-state');
    if (emptyState) emptyState.style.display = 'block';
  }
}

// ==================== AFFICHAGE DE L'HISTORIQUE ====================

// Afficher l'historique des bets
function displayBetHistory(data) {
  const container = document.getElementById('bet-history-container');
  const statsContainer = document.getElementById('bet-stats');
  const emptyState = document.getElementById('bet-empty-state');
  
  if (!container || !statsContainer) return;
  
  // Si aucun bet
  if (!data.bets || data.bets.length === 0) {
    if (emptyState) emptyState.style.display = 'block';
    return;
  }
  
  if (emptyState) emptyState.style.display = 'none';
  
  // Afficher les statistiques
  statsContainer.innerHTML = `
    <div style="background: #000000; border: 2px solid #22c55e; border-radius: 0.5rem; padding: 1rem; text-align: center;">
      <div style="color: #22c55e; font-weight: 700; font-size: 2rem;">
        ${data.total_wins - data.total_losses >= 0 ? '+' : ''}${data.total_wins - data.total_losses}
      </div>
      <div style="color: rgba(255, 255, 255, 0.7); font-size: 0.75rem; margin-top: 0.25rem; font-weight: 600;">PARIS EN +</div>
    </div>
    <div style="background: #000000; border: 2px solid #22c55e; border-radius: 0.5rem; padding: 1rem; text-align: center;">
      <div style="color: #22c55e; font-weight: 700; font-size: 2rem;">
        ${data.total_units >= 0 ? '+' : ''}${data.total_units.toFixed(2)}
      </div>
      <div style="color: rgba(255, 255, 255, 0.7); font-size: 0.75rem; margin-top: 0.25rem; font-weight: 600;">UNITS EN +</div>
    </div>
  `;
  
  // Afficher chaque bet
  container.innerHTML = data.bets.map(bet => generateBetCardHTML(bet)).join('');
}

// Afficher l'historique des parlays
function displayParlayHistory(data) {
  const container = document.getElementById('parlay-history-container');
  const statsContainer = document.getElementById('parlay-stats');
  const emptyState = document.getElementById('parlay-empty-state');
  
  if (!container || !statsContainer) return;
  
  // Si aucun parlay
  if (!data.parlays || data.parlays.length === 0) {
    if (emptyState) emptyState.style.display = 'block';
    return;
  }
  
  if (emptyState) emptyState.style.display = 'none';
  
  // Afficher les statistiques
  statsContainer.innerHTML = `
    <div style="background: #000000; border: 2px solid #22c55e; border-radius: 0.5rem; padding: 1rem; text-align: center;">
      <div style="color: #22c55e; font-weight: 700; font-size: 2rem;">
        ${data.total_wins - data.total_losses >= 0 ? '+' : ''}${data.total_wins - data.total_losses}
      </div>
      <div style="color: rgba(255, 255, 255, 0.7); font-size: 0.75rem; margin-top: 0.25rem; font-weight: 600;">PARLAYS EN +</div>
    </div>
    <div style="background: #000000; border: 2px solid #22c55e; border-radius: 0.5rem; padding: 1rem; text-align: center;">
      <div style="color: #22c55e; font-weight: 700; font-size: 2rem;">
        ${data.total_units >= 0 ? '+' : ''}${data.total_units.toFixed(2)}
      </div>
      <div style="color: rgba(255, 255, 255, 0.7); font-size: 0.75rem; margin-top: 0.25rem; font-weight: 600;">UNITS EN +</div>
    </div>
  `;
  
  // Afficher chaque parlay
  container.innerHTML = data.parlays.map(parlay => generateParlayCardHTML(parlay)).join('');
}

// ==================== G√âN√âRATION HTML ====================

// G√©n√©rer le HTML d'une carte de bet
function generateBetCardHTML(bet) {
  console.log('üñºÔ∏è G√©n√©ration bet card, logos:', { team1_logo: bet.team1_logo, team2_logo: bet.team2_logo });
  // Calculer les units et la couleur selon le r√©sultat
  let unitsText, unitsColor;
  if (bet.result === 'win') {
    const unitsValue = (bet.multiplier - 1).toFixed(2);
    unitsText = `+${unitsValue} UNITS`;
    unitsColor = '#22c55e';
  } else if (bet.result === 'loose') {
    unitsText = '-1.00 UNITS';
    unitsColor = '#ef4444';
  } else {
    unitsText = 'EN ATTENTE';
    unitsColor = '#f59e0b';
  }
  
  // G√©n√©rer le HTML selon le type de bet
  let matchHTML = '';
  
  if (bet.bet_type === 'moneyline') {
    matchHTML = `
      <div style="text-align: center; color: rgba(255, 255, 255, 0.7); font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem;">MONEYLINE</div>
      <div style="display: flex; align-items: center; justify-content: space-between; gap: 1rem;">
        <div style="text-align: center; flex: 1;">
          <div style="width: 5rem; height: 5rem; border-radius: 50%; background: #ffffff; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem; padding: 0.75rem;">
            <img src="${sanitizeLogo(bet.team1_logo)}" alt="${bet.team1_name}" style="width: 100%; height: 100%; object-fit: contain;">
          </div>
          <div style="font-size: 0.875rem; font-weight: 600; color: #ffffff;">${bet.team1_name}</div>
        </div>
        <div style="text-align: center;">
          <div style="font-size: 1.5rem; font-weight: 700; color: rgba(255, 255, 255, 0.5);">VS</div>
        </div>
        <div style="text-align: center; flex: 1;">
          <div style="width: 5rem; height: 5rem; border-radius: 50%; background: #ffffff; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem; padding: 0.75rem; ${bet.result === 'win' ? 'border: 3px solid #22c55e;' : ''}">
            <img src="${sanitizeLogo(bet.team2_logo)}" alt="${bet.team2_name}" style="width: 100%; height: 100%; object-fit: contain;">
          </div>
          <div style="font-size: 0.875rem; font-weight: 600; color: #ffffff;">${bet.team2_name}</div>
          ${bet.result === 'win' ? '<div style="font-size: 1rem; font-weight: 700; color: #22c55e; margin-top: 0.5rem;">VICTOIRE</div>' : ''}
        </div>
      </div>
    `;
  } else if (bet.bet_type === 'spread') {
    const selectedTeam = bet.spread_team === 'team1' ? bet.team1_name : bet.team2_name;
    matchHTML = `
      <div style="text-align: center; color: rgba(255, 255, 255, 0.7); font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem;">SPREAD ${bet.spread_value}</div>
      <div style="display: flex; align-items: center; justify-content: space-between; gap: 1rem;">
        <div style="text-align: center; flex: 1;">
          <div style="width: 5rem; height: 5rem; border-radius: 50%; background: #ffffff; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem; padding: 0.75rem; ${bet.spread_team === 'team1' && bet.result === 'win' ? 'border: 3px solid #22c55e;' : ''}">
            <img src="${sanitizeLogo(bet.team1_logo)}" alt="${bet.team1_name}" style="width: 100%; height: 100%; object-fit: contain;">
          </div>
          <div style="font-size: 0.875rem; font-weight: 600; color: #ffffff;">${bet.team1_name}</div>
          ${bet.spread_team === 'team1' && bet.result === 'win' ? '<div style="font-size: 1rem; font-weight: 700; color: #22c55e; margin-top: 0.5rem;">COUVRE</div>' : ''}
        </div>
        <div style="text-align: center;">
          <div style="font-size: 1.5rem; font-weight: 700; color: rgba(255, 255, 255, 0.5);">VS</div>
        </div>
        <div style="text-align: center; flex: 1;">
          <div style="width: 5rem; height: 5rem; border-radius: 50%; background: #ffffff; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem; padding: 0.75rem; ${bet.spread_team === 'team2' && bet.result === 'win' ? 'border: 3px solid #22c55e;' : ''}">
            <img src="${sanitizeLogo(bet.team2_logo)}" alt="${bet.team2_name}" style="width: 100%; height: 100%; object-fit: contain;">
          </div>
          <div style="font-size: 0.875rem; font-weight: 600; color: #ffffff;">${bet.team2_name}</div>
          ${bet.spread_team === 'team2' && bet.result === 'win' ? '<div style="font-size: 1rem; font-weight: 700; color: #22c55e; margin-top: 0.5rem;">COUVRE</div>' : ''}
        </div>
      </div>
    `;
  } else if (bet.bet_type === 'over_under') {
    matchHTML = `
      <div style="text-align: center; color: rgba(255, 255, 255, 0.7); font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem;">${bet.over_under_type?.toUpperCase()} ${bet.over_under_value}</div>
      <div style="text-align: center; margin-bottom: 1rem;">
        <div style="font-size: 0.875rem; color: rgba(255, 255, 255, 0.6);">${bet.over_under_stat_type}</div>
      </div>
      <div style="display: flex; align-items: center; justify-content: space-between; gap: 1rem;">
        <div style="text-align: center; flex: 1;">
          <div style="width: 5rem; height: 5rem; border-radius: 50%; background: #ffffff; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem; padding: 0.75rem;">
            <img src="${sanitizeLogo(bet.team1_logo)}" alt="${bet.team1_name}" style="width: 100%; height: 100%; object-fit: contain;">
          </div>
          <div style="font-size: 0.875rem; font-weight: 600; color: #ffffff;">${bet.team1_name}</div>
        </div>
        <div style="text-align: center;">
          <div style="font-size: 1.5rem; font-weight: 700; color: rgba(255, 255, 255, 0.5);">VS</div>
        </div>
        <div style="text-align: center; flex: 1;">
          <div style="width: 5rem; height: 5rem; border-radius: 50%; background: #ffffff; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem; padding: 0.75rem;">
            <img src="${sanitizeLogo(bet.team2_logo)}" alt="${bet.team2_name}" style="width: 100%; height: 100%; object-fit: contain;">
          </div>
          <div style="font-size: 0.875rem; font-weight: 600; color: #ffffff;">${bet.team2_name}</div>
        </div>
      </div>
    `;
  }
  
  return `
    <!-- Badge UNITS -->
    <div style="max-width: 32rem; margin: 2rem auto 0.5rem; padding: 0 2rem;">
      <div style="background: ${unitsColor}; color: #ffffff; padding: 1rem 2rem; border-radius: 0.5rem; font-size: 1.5rem; font-weight: 700; text-align: center;">
        ${unitsText}
      </div>
    </div>
    
    <!-- Carte -->
    <div style="background: #000000; border: 2px solid ${unitsColor}; border-radius: 1rem; padding: 2rem; margin: 0 auto 2rem; max-width: 32rem;">
      <div style="text-align: center; color: rgba(255, 255, 255, 0.7); font-size: 1rem; margin-bottom: 1.5rem;">
        ${bet.match_date} - ${bet.match_time}
      </div>
      ${matchHTML}
    </div>
  `;
}

// G√©n√©rer le HTML d'une carte de parlay
function generateParlayCardHTML(parlay) {
  // Calculer les units et la couleur selon le r√©sultat
  let unitsText, unitsColor;
  if (parlay.result === 'win') {
    const unitsValue = (parlay.multiplier - 1).toFixed(2);
    unitsText = `+${unitsValue} UNITS`;
    unitsColor = '#22c55e';
  } else if (parlay.result === 'loose') {
    unitsText = '-1.00 UNITS';
    unitsColor = '#ef4444';
  } else {
    unitsText = 'EN ATTENTE';
    unitsColor = '#f59e0b';
  }
  
  // G√©n√©rer le HTML des legs
  const legsHTML = parlay.legs.map((leg, index) => {
    let legTypeText = '';
    if (leg.bet_type === 'moneyline') {
      legTypeText = 'MONEYLINE';
    } else if (leg.bet_type === 'spread') {
      legTypeText = `SPREAD ${leg.spread_value}`;
    } else if (leg.bet_type === 'over_under') {
      legTypeText = `${leg.over_under_type?.toUpperCase()} ${leg.over_under_value}`;
    }
    
    return `
      <div style="background: rgba(255, 255, 255, 0.05); border-radius: 0.5rem; padding: 1rem; margin-bottom: ${index < parlay.legs.length - 1 ? '0.75rem' : '0'};">
        <div style="text-align: center; color: rgba(255, 255, 255, 0.6); font-size: 0.875rem; margin-bottom: 0.5rem;">${legTypeText}</div>
        <div style="display: flex; align-items: center; justify-content: space-between; gap: 0.75rem;">
          <div style="text-align: center; flex: 1;">
            <div style="width: 3rem; height: 3rem; border-radius: 50%; background: #ffffff; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.25rem; padding: 0.5rem;">
              <img src="${sanitizeLogo(leg.team1_logo)}" alt="${leg.team1_name}" style="width: 100%; height: 100%; object-fit: contain;">
            </div>
            <div style="font-size: 0.75rem; font-weight: 600; color: #ffffff;">${leg.team1_name}</div>
          </div>
          <div style="text-align: center;">
            <div style="font-size: 1rem; font-weight: 700; color: rgba(255, 255, 255, 0.5);">VS</div>
          </div>
          <div style="text-align: center; flex: 1;">
            <div style="width: 3rem; height: 3rem; border-radius: 50%; background: #ffffff; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.25rem; padding: 0.5rem;">
              <img src="${sanitizeLogo(leg.team2_logo)}" alt="${leg.team2_name}" style="width: 100%; height: 100%; object-fit: contain;">
            </div>
            <div style="font-size: 0.75rem; font-weight: 600; color: #ffffff;">${leg.team2_name}</div>
          </div>
        </div>
      </div>
    `;
  }).join('');
  
  return `
    <!-- Badge UNITS -->
    <div style="max-width: 32rem; margin: 2rem auto 0.5rem; padding: 0 2rem;">
      <div style="background: ${unitsColor}; color: #ffffff; padding: 1rem 2rem; border-radius: 0.5rem; font-size: 1.5rem; font-weight: 700; text-align: center;">
        ${unitsText}
      </div>
    </div>
    
    <!-- Carte -->
    <div style="background: #000000; border: 2px solid ${unitsColor}; border-radius: 1rem; padding: 2rem; margin: 0 auto 2rem; max-width: 32rem;">
      <div style="text-align: center; color: rgba(255, 255, 255, 0.7); font-size: 1rem; margin-bottom: 1.5rem;">
        ${parlay.match_date} - ${parlay.match_time}
      </div>
      <div style="text-align: center; color: #22c55e; font-size: 1.25rem; font-weight: 700; margin-bottom: 1rem;">
        PARLAY x${parlay.multiplier}
      </div>
      ${legsHTML}
    </div>
  `;
}

// ==================== FEEDBACK VISUEL ====================

function showSuccessToast(message) {
  const toast = document.createElement('div');
  toast.textContent = '‚úÖ ' + message;
  toast.style.cssText = 'position:fixed;top:20px;right:20px;background:#22c55e;color:#fff;padding:1rem 2rem;border-radius:0.5rem;font-weight:600;z-index:9999;box-shadow:0 4px 6px rgba(0,0,0,0.3);';
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 3000);
}

function showErrorToast(message) {
  const toast = document.createElement('div');
  toast.textContent = '‚ùå ' + message;
  toast.style.cssText = 'position:fixed;top:20px;right:20px;background:#ef4444;color:#fff;padding:1rem 2rem;border-radius:0.5rem;font-weight:600;z-index:9999;box-shadow:0 4px 6px rgba(0,0,0,0.3);';
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 3000);
}

// ==================== EVENT LISTENERS ====================

// D√©tecter les blocks avec send_to_history = true au chargement
function checkAndSaveBlocks() {
  console.log('üîç Recherche des cartes √† sauvegarder...');
  // V√©rifier tous les bet_card
  document.querySelectorAll('[data-block-type="bet_card"]').forEach(card => {
    const sendToHistory = card.getAttribute('data-send-to-history');
    console.log('üîé Bet card trouv√©:', {
      blockId: card.getAttribute('data-block-id'),
      sendToHistory: sendToHistory,
      visible: card.style.display !== 'none'
    });
    if (sendToHistory === 'true') {
      console.log('üìã D√©tection bet √† sauvegarder:', card.getAttribute('data-block-id'));
      saveBetToSupabase(card);
    }
  });
  
  // V√©rifier tous les parlay_card
  document.querySelectorAll('[data-block-type="parlay_card"]').forEach(card => {
    const sendToHistory = card.getAttribute('data-send-to-history');
    console.log('üîé Parlay card trouv√©:', {
      blockId: card.getAttribute('data-block-id'),
      sendToHistory: sendToHistory,
      visible: card.style.display !== 'none'
    });
    if (sendToHistory === 'true') {
      console.log('üìã D√©tection parlay √† sauvegarder:', card.getAttribute('data-block-id'));
      saveParlayToSupabase(card);
    }
  });
}

// Initialisation au chargement de la page
document.addEventListener('DOMContentLoaded', function() {
  console.log('üöÄ Initialisation du syst√®me d\'historique Supabase');
  initSupabaseConfig();
  console.log('üîó Functions base:', getFunctionsBase(), 'Shop domain:', SHOP_DOMAIN);
  checkAndSaveBlocks();

  // Observer les changements sur les cartes (√©dition Shopify, toggles, ajouts dynamiques)
  try {
    const observer = new MutationObserver((mutations) => {
      let scheduled = false;
      mutations.forEach((m) => {
        if (m.type === 'attributes' && m.attributeName === 'data-send-to-history') {
          const el = m.target;
          const flag = el.getAttribute('data-send-to-history');
          const type = el.getAttribute('data-block-type');
          console.log('üõ∞Ô∏è Changement data-send-to-history d√©tect√©:', {
            blockId: el.getAttribute('data-block-id'), flag, type
          });
          if (flag === 'true') {
            if (type === 'bet_card') saveBetToSupabase(el);
            if (type === 'parlay_card') saveParlayToSupabase(el);
          }
        }
        if (m.type === 'childList' && !scheduled) {
          scheduled = true;
          setTimeout(() => {
            console.log('üîÅ Nouveaux n≈ìuds d√©tect√©s, rescannage des cartes...');
            checkAndSaveBlocks();
          }, 50);
        }
      });
    });
    observer.observe(document.body, {
      subtree: true,
      attributes: true,
      attributeFilter: ['data-send-to-history'],
      childList: true
    });
    console.log('üëÄ MutationObserver initialis√©');
  } catch (e) {
    console.warn('‚ö†Ô∏è Impossible d\'initialiser MutationObserver', e);
  }
});

// Exposer les fonctions globalement pour pouvoir les appeler depuis le code Liquid
window.loadBetHistory = loadBetHistory;
window.loadParlayHistory = loadParlayHistory;
window.saveBetToSupabase = saveBetToSupabase;
window.saveParlayToSupabase = saveParlayToSupabase;
window.checkAndSaveBlocks = checkAndSaveBlocks;

// Petit filet de s√©curit√©: rescannage tardif pour capter un re-render Shopify
setTimeout(() => {
  if (typeof window.checkAndSaveBlocks === 'function') {
    console.log('‚è±Ô∏è Failsafe: rescannage des cartes √† sauvegarder...');
    window.checkAndSaveBlocks();
  }
}, 400);
  </script>

</body>
</html>

{% schema %}
{
  "name": "Dashboard WINABET.AI",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Titre du Dashboard",
      "default": "WINABET.AI"
    },
    {
      "type": "header",
      "content": "üë• Membres Connect√©s Live"
    },
    {
      "type": "number",
      "id": "members_base",
      "label": "Nombre de base de membres",
      "default": 50,
      "info": "Nombre initial de membres connect√©s"
    },
    {
      "type": "number",
      "id": "min_increase_per_change",
      "label": "‚¨ÜÔ∏è Mont√©e minimum par changement",
      "default": 1,
      "info": "Minimum que le nombre peut monter √† chaque fois"
    },
    {
      "type": "number",
      "id": "max_increase_per_change",
      "label": "‚¨ÜÔ∏è Mont√©e maximum par changement",
      "default": 5,
      "info": "Maximum que le nombre peut monter √† chaque fois (al√©atoire entre min et max)"
    },
    {
      "type": "number",
      "id": "min_decrease_per_change",
      "label": "‚¨áÔ∏è Descente minimum par changement",
      "default": 1,
      "info": "Minimum que le nombre peut descendre √† chaque fois"
    },
    {
      "type": "number",
      "id": "max_decrease_per_change",
      "label": "‚¨áÔ∏è Descente maximum par changement",
      "default": 5,
      "info": "Maximum que le nombre peut descendre √† chaque fois (al√©atoire entre min et max)"
    },
    {
      "type": "number",
      "id": "min_update_interval_sec",
      "label": "‚è±Ô∏è Intervalle minimum entre changements (sec)",
      "default": 30,
      "info": "Temps minimum en secondes entre chaque changement de nombre"
    },
    {
      "type": "number",
      "id": "max_update_interval_sec",
      "label": "‚è±Ô∏è Intervalle maximum entre changements (sec)",
      "default": 90,
      "info": "Temps maximum en secondes entre chaque changement de nombre (l'intervalle sera al√©atoire entre min et max)"
    },
    {
      "type": "number",
      "id": "transition_step",
      "label": "üìä Taille des tranches de transition",
      "default": 3,
      "info": "Nombre d'utilisateurs ajout√©s/retir√©s par √©tape lors du passage d'une p√©riode √† une autre (ex: 3 = transition graduelle par tranches de 3)"
    },
    {
      "type": "header",
      "content": "üî• Heures de Pointe (Nombre √âlev√©)"
    },
    {
      "type": "number",
      "id": "peak_start_hour",
      "label": "Heure de d√©but",
      "default": 18,
      "info": "D√©but des heures de pointe (format 24h, entre 0 et 23)"
    },
    {
      "type": "number",
      "id": "peak_end_hour",
      "label": "Heure de fin",
      "default": 23,
      "info": "Fin des heures de pointe (format 24h, entre 0 et 23)"
    },
    {
      "type": "number",
      "id": "peak_target_members",
      "label": "Nombre cible de membres",
      "default": 100,
      "info": "Nombre de membres connect√©s cible pendant les heures de pointe"
    },
    {
      "type": "header",
      "content": "üí§ Heures Creuses (Nombre Bas)"
    },
    {
      "type": "number",
      "id": "low_start_hour",
      "label": "Heure de d√©but",
      "default": 2,
      "info": "D√©but des heures creuses (format 24h, entre 0 et 23)"
    },
    {
      "type": "number",
      "id": "low_end_hour",
      "label": "Heure de fin",
      "default": 8,
      "info": "Fin des heures creuses (format 24h, entre 0 et 23)"
    },
    {
      "type": "number",
      "id": "low_target_members",
      "label": "Nombre cible de membres",
      "default": 25,
      "info": "Nombre de membres connect√©s cible pendant les heures creuses"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Sous-titre",
      "default": "Paris Sportifs Professionnels"
    }
  ],
  "blocks": [
    {
      "type": "bet_card",
      "name": "Carte de Pari",
      "settings": [
            {
              "type": "select",
              "id": "sport_type",
              "label": "üèíüèà Type de sport pour l'analyse IA",
              "options": [
                {
                  "value": "nhl",
                  "label": "üèí NHL (Hockey)"
                },
                {
                  "value": "nfl",
                  "label": "üèà NFL (Football am√©ricain)"
                }
              ],
              "default": "nhl",
              "info": "S√©lectionnez le template d'analyse √† afficher"
            },
            {
              "type": "checkbox",
              "id": "auto_increment_enabled",
              "label": "üîÑ Activer l'auto-incr√©mentation des donn√©es IA",
              "default": false,
              "info": "Les donn√©es IA analys√©es augmenteront automatiquement"
            },
            {
              "type": "select",
              "id": "auto_increment_interval",
              "label": "‚è±Ô∏è Intervalle d'incr√©mentation",
              "options": [
                {
                  "value": "0.1",
                  "label": "‚ö° Test: Toutes les 6 secondes"
                },
                {
                  "value": "0.5",
                  "label": "‚ö° Test: Toutes les 30 secondes"
                },
                {
                  "value": "1",
                  "label": "Toutes les 1 minute"
                },
                {
                  "value": "2",
                  "label": "Toutes les 2 minutes"
                },
                {
                  "value": "5",
                  "label": "Toutes les 5 minutes"
                },
                {
                  "value": "10",
                  "label": "Toutes les 10 minutes"
                }
              ],
              "default": "5",
              "info": "Fr√©quence d'ajout automatique de donn√©es"
            },
            {
              "type": "select",
              "id": "auto_increment_amount",
              "label": "üìä Quantit√© √† ajouter",
              "options": [
                {
                  "value": "1",
                  "label": "1 donn√©e"
                },
                {
                  "value": "5",
                  "label": "5 donn√©es"
                },
                {
                  "value": "10",
                  "label": "10 donn√©es"
                },
                {
                  "value": "25",
                  "label": "25 donn√©es"
                },
                {
                  "value": "50",
                  "label": "50 donn√©es"
                }
              ],
              "default": "5",
              "info": "Combien de donn√©es ajouter √† chaque intervalle"
            },
        {
          "type": "number",
          "id": "ai_data_count",
          "label": "Nombre de donn√©es IA analys√©es",
          "default": 2857
        },
        {
          "type": "select",
          "id": "bet_type",
          "label": "üìä Type de pari",
          "options": [
            {
              "value": "moneyline",
              "label": "üí∞ Moneyline"
            },
            {
              "value": "spread",
              "label": "üìè Spread"
            },
            {
              "value": "over_under",
              "label": "üî¢ Over/Under"
            }
          ],
          "default": "moneyline",
          "info": "S√©lectionnez le type de pari √† afficher"
        },
        {
          "type": "text",
          "id": "spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5",
          "info": "Ex: -3.5, +7.5, -10.5 (utilis√© uniquement pour le type Spread)"
        },
        {
          "type": "select",
          "id": "spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {
              "value": "team1",
              "label": "√âquipe 1"
            },
            {
              "value": "team2",
              "label": "√âquipe 2"
            }
          ],
          "default": "team2",
          "info": "Quelle √©quipe a le spread (utilis√© uniquement pour le type Spread)"
        },
        {
          "type": "select",
          "id": "over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {
              "value": "over",
              "label": "OVER"
            },
            {
              "value": "under",
              "label": "UNDER"
            }
          ],
          "default": "over",
          "info": "S√©lectionnez OVER ou UNDER (utilis√© uniquement pour le type Over/Under)"
        },
        {
          "type": "text",
          "id": "over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5",
          "info": "Ex: 225.5, 45.5, 310.5 (utilis√© uniquement pour le type Over/Under)"
        },
        {
          "type": "text",
          "id": "over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux",
          "info": "Ex: 'points totaux', 'yards de Patrick Mahomes' (utilis√© uniquement pour le type Over/Under)"
        },
        {
          "type": "range",
          "id": "win_percentage",
          "label": "Pourcentage de chance de gagner (%)",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 92
        },
        {
          "type": "text",
          "id": "team1_name",
          "label": "√âquipe 1 (√† domicile)",
          "default": "VEGAS"
        },
        {
          "type": "image_picker",
          "id": "team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "team1_bet_type",
          "label": "Type de pari √âquipe 1",
          "default": "MONEYLINE",
          "info": "Ex: MONEYLINE, SPREAD, TOTAL"
        },
        {
          "type": "text",
          "id": "team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)",
          "default": "TAMPA BAY"
        },
        {
          "type": "image_picker",
          "id": "team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "team2_bet_type",
          "label": "Type de pari √âquipe 2",
          "default": "VICTOIRE",
          "info": "Ex: VICTOIRE, SPREAD, TOTAL"
        },
        {
          "type": "text",
          "id": "bet_units",
          "label": "Nombre d'unit√©s",
          "default": "1",
          "info": "Nombre d'unit√©s √† parier"
        },
        {
          "type": "text",
          "id": "match_time",
          "label": "Heure du match",
          "default": "5:00 PM"
        },
        {
          "type": "text",
          "id": "match_date",
          "label": "Date du match",
          "default": "Aujourd'hui",
          "info": "Ex: Aujourd'hui, Demain, 28 Octobre"
        },
        {
          "type": "text",
          "id": "multiplier",
          "label": "Multiplicateur (cote)",
          "default": "1.74",
          "info": "Ex: 1.74, 2.50, 3.25"
        },
        {
          "type": "number",
          "id": "odds",
          "label": "Cote principale",
          "default": -136,
          "info": "Format am√©ricain (ex: -136, +150)"
        },
        {
          "type": "text",
          "id": "best_bookmaker",
          "label": "Meilleur bookmaker",
          "default": "DRAFTKINGS"
        },
        {
          "type": "number",
          "id": "best_odds",
          "label": "Meilleures cotes",
          "default": -135,
          "info": "Format am√©ricain"
        },
        {
          "type": "textarea",
          "id": "ai_explanation",
          "label": "Explication de l'IA",
          "default": "Notre IA a analys√© plus de 2857 variables incluant les performances r√©centes, les statistiques head-to-head, les conditions de jeu, et les tendances du march√© pour vous proposer ce pari avec une confiance √©lev√©e."
        },
        {
          "type": "checkbox",
          "id": "send_to_history",
          "label": "üìã Envoyer √† l'historique",
          "default": false,
          "info": "Cochez pour d√©placer cette carte vers l'historique"
        },
        {
          "type": "select",
          "id": "result",
          "label": "üéØ R√©sultat du pari",
          "options": [
            {
              "value": "pending",
              "label": "En attente"
            },
            {
              "value": "win",
              "label": "‚úÖ Gagn√© (Win)"
            },
            {
              "value": "loose",
              "label": "‚ùå Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "S√©lectionnez le r√©sultat du pari"
        },
        {
          "type": "checkbox",
          "id": "show_card",
          "label": "Afficher cette carte",
          "default": true
        }
      ]
    },
    {
      "type": "parlay_card",
      "name": "üé≤ Carte Parlay Avanc√©e",
      "settings": [
            {
              "type": "select",
              "id": "sport_type",
              "label": "üèíüèà Type de sport pour l'analyse IA",
              "options": [
                {
                  "value": "nhl",
                  "label": "üèí NHL (Hockey)"
                },
                {
                  "value": "nfl",
                  "label": "üèà NFL (Football am√©ricain)"
                }
              ],
              "default": "nhl",
              "info": "S√©lectionnez le template d'analyse √† afficher"
            },
            {
              "type": "checkbox",
              "id": "auto_increment_enabled",
              "label": "üîÑ Activer l'auto-incr√©mentation des donn√©es IA",
              "default": false,
              "info": "Les donn√©es IA analys√©es augmenteront automatiquement"
            },
            {
              "type": "select",
              "id": "auto_increment_interval",
              "label": "‚è±Ô∏è Intervalle d'incr√©mentation",
              "options": [
                {
                  "value": "0.1",
                  "label": "‚ö° Test: Toutes les 6 secondes"
                },
                {
                  "value": "0.5",
                  "label": "‚ö° Test: Toutes les 30 secondes"
                },
                {
                  "value": "1",
                  "label": "Toutes les 1 minute"
                },
                {
                  "value": "2",
                  "label": "Toutes les 2 minutes"
                },
                {
                  "value": "5",
                  "label": "Toutes les 5 minutes"
                },
                {
                  "value": "10",
                  "label": "Toutes les 10 minutes"
                }
              ],
              "default": "5",
              "info": "Fr√©quence d'ajout automatique de donn√©es"
            },
            {
              "type": "select",
              "id": "auto_increment_amount",
              "label": "üìä Quantit√© √† ajouter",
              "options": [
                {
                  "value": "1",
                  "label": "1 donn√©e"
                },
                {
                  "value": "5",
                  "label": "5 donn√©es"
                },
                {
                  "value": "10",
                  "label": "10 donn√©es"
                },
                {
                  "value": "25",
                  "label": "25 donn√©es"
                },
                {
                  "value": "50",
                  "label": "50 donn√©es"
                }
              ],
              "default": "5",
              "info": "Combien de donn√©es ajouter √† chaque intervalle"
            },
        {
          "type": "number",
          "id": "ai_data_count",
          "label": "Nombre de donn√©es IA analys√©es",
          "default": 2857
        },
        {
          "type": "select",
          "id": "bet_type",
          "label": "üìä Type de pari",
          "options": [
            {
              "value": "moneyline",
              "label": "üí∞ Moneyline"
            },
            {
              "value": "spread",
              "label": "üìè Spread"
            },
            {
              "value": "over_under",
              "label": "üî¢ Over/Under"
            }
          ],
          "default": "moneyline",
          "info": "S√©lectionnez le type de pari √† afficher"
        },
        {
          "type": "text",
          "id": "spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5",
          "info": "Ex: -3.5, +7.5, -10.5 (utilis√© uniquement pour le type Spread)"
        },
        {
          "type": "select",
          "id": "spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {
              "value": "team1",
              "label": "√âquipe 1"
            },
            {
              "value": "team2",
              "label": "√âquipe 2"
            }
          ],
          "default": "team2",
          "info": "Quelle √©quipe a le spread (utilis√© uniquement pour le type Spread)"
        },
        {
          "type": "select",
          "id": "over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {
              "value": "over",
              "label": "OVER"
            },
            {
              "value": "under",
              "label": "UNDER"
            }
          ],
          "default": "over",
          "info": "S√©lectionnez OVER ou UNDER (utilis√© uniquement pour le type Over/Under)"
        },
        {
          "type": "text",
          "id": "over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5",
          "info": "Ex: 225.5, 45.5, 310.5 (utilis√© uniquement pour le type Over/Under)"
        },
        {
          "type": "text",
          "id": "over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux",
          "info": "Ex: 'points totaux', 'yards de Patrick Mahomes' (utilis√© uniquement pour le type Over/Under)"
        },
        {
          "type": "range",
          "id": "win_percentage",
          "label": "Pourcentage de chance de gagner (%)",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 92
        },
        {
          "type": "header",
          "content": "üéØ LEG 1"
        },
        {
          "type": "text",
          "id": "leg1_team1_name",
          "label": "√âquipe 1 (√† domicile)",
          "default": "VEGAS"
        },
        {
          "type": "image_picker",
          "id": "leg1_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg1_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)",
          "default": "TAMPA BAY"
        },
        {
          "type": "image_picker",
          "id": "leg1_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg1_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg1_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg1_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg1_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg1_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg1_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg1_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "header",
          "content": "üéØ LEG 2"
        },
        {
          "type": "text",
          "id": "leg2_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg2_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg2_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg2_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg2_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg2_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg2_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg2_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg2_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg2_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg2_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "header",
          "content": "üéØ LEG 3"
        },
        {
          "type": "text",
          "id": "leg3_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg3_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg3_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg3_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg3_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg3_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg3_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg3_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg3_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg3_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg3_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "header",
          "content": "üéØ LEG 4"
        },
        {
          "type": "text",
          "id": "leg4_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg4_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg4_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg4_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg4_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg4_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg4_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg4_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg4_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg4_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg4_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "header",
          "content": "üéØ LEG 5"
        },
        {
          "type": "text",
          "id": "leg5_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg5_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg5_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg5_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg5_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg5_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg5_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg5_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg5_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg5_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg5_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "header",
          "content": "üéØ LEG 6"
        },
        {
          "type": "text",
          "id": "leg6_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg6_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg6_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg6_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg6_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg6_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg6_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg6_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg6_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg6_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg6_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "header",
          "content": "üéØ LEG 7"
        },
        {
          "type": "text",
          "id": "leg7_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg7_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg7_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg7_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg7_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg7_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg7_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg7_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg7_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg7_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg7_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "header",
          "content": "üéØ LEG 8"
        },
        {
          "type": "text",
          "id": "leg8_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg8_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg8_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg8_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg8_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg8_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg8_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg8_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg8_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg8_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg8_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "header",
          "content": "üéØ LEG 9"
        },
        {
          "type": "text",
          "id": "leg9_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg9_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg9_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg9_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg9_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg9_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg9_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg9_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg9_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg9_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg9_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "header",
          "content": "üéØ LEG 10"
        },
        {
          "type": "text",
          "id": "leg10_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg10_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg10_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg10_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg10_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg10_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg10_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg10_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg10_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg10_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg10_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "text",
          "id": "bet_units",
          "label": "Nombre d'unit√©s",
          "default": "1",
          "info": "Nombre d'unit√©s √† parier"
        },
        {
          "type": "text",
          "id": "match_time",
          "label": "Heure du match",
          "default": "5:00 PM"
        },
        {
          "type": "text",
          "id": "match_date",
          "label": "Date du match",
          "default": "Aujourd'hui",
          "info": "Ex: Aujourd'hui, Demain, 28 Octobre"
        },
        {
          "type": "text",
          "id": "multiplier",
          "label": "Multiplicateur (cote)",
          "default": "1.74",
          "info": "Ex: 1.74, 2.50, 3.25"
        },
        {
          "type": "number",
          "id": "odds",
          "label": "Cote principale",
          "default": -136,
          "info": "Format am√©ricain (ex: -136, +150)"
        },
        {
          "type": "text",
          "id": "best_bookmaker",
          "label": "Meilleur bookmaker",
          "default": "DRAFTKINGS"
        },
        {
          "type": "number",
          "id": "best_odds",
          "label": "Meilleures cotes",
          "default": -135,
          "info": "Format am√©ricain"
        },
        {
          "type": "textarea",
          "id": "ai_explanation",
          "label": "Explication de l'IA",
          "default": "Notre IA a analys√© plus de 2857 variables incluant les performances r√©centes, les statistiques head-to-head, les conditions de jeu, et les tendances du march√© pour vous proposer ce pari avec une confiance √©lev√©e."
        },
        {
          "type": "checkbox",
          "id": "send_to_history",
          "label": "üìã Envoyer √† l'historique",
          "default": false,
          "info": "Cochez pour d√©placer cette carte vers l'historique"
        },
        {
          "type": "select",
          "id": "result",
          "label": "üéØ R√©sultat du pari",
          "options": [
            {
              "value": "pending",
              "label": "En attente"
            },
            {
              "value": "win",
              "label": "‚úÖ Gagn√© (Win)"
            },
            {
              "value": "loose",
              "label": "‚ùå Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "S√©lectionnez le r√©sultat du pari"
        },
        {
          "type": "checkbox",
          "id": "show_card",
          "label": "Afficher cette carte",
          "default": true
        }
      ]
    }
  ],
  "max_blocks": 20,
  "presets": [
    {
      "name": "Dashboard WINABET.AI",
      "blocks": [
        {
          "type": "bet_card",
          "settings": {
            "ai_data_count": 2843,
            "win_percentage": 92,
            "team1_name": "ST. LOUIS",
            "team1_bet_type": "MONEYLINE",
            "team2_name": "PITTSBURGH",
            "team2_bet_type": "VICTOIRE",
            "match_time": "7:00 PM",
            "match_date": "Aujourd'hui",
            "multiplier": "1.95",
            "bet_units": "1",
            "odds": -105,
            "best_bookmaker": "DRAFTKINGS",
            "best_odds": -105,
            "show_card": true
          }
        },
        {
          "type": "parlay_card",
          "settings": {
            "ai_data_count": 5214,
            "win_percentage": 78,
            "leg1_team1_name": "VEGAS",
            "leg1_team2_name": "TAMPA BAY",
            "leg1_bet_type": "moneyline",
            "leg1_match_time": "7:00 PM",
            "multiplier": "5.24",
            "bet_units": "1",
            "odds": 495,
            "best_bookmaker": "DRAFTKINGS",
            "best_odds": 495,
            "show_card": true
          }
        }
      ]
    }
  ]
}
{% endschema %}