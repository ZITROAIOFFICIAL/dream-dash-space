<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WINABET.AI - Dashboard Paris Sportifs</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fustat:wght@300;400&family=Outfit:wght@300;500;600&display=swap" rel="stylesheet">
  {% render 'dashboard-styles' %}
  <style>
    /* ==================== VARIABLES CSS SP√âCIFIQUES AU DASHBOARD ==================== */
    :root {
      /* Position du badge/logo/badge IA √† gauche */
      --desktop-left-offset: -39rem;
      
      /* Position des boutons auth √† droite */
      --desktop-right-offset: 10rem;
      
      /* Variables laptop allong√© - Dashboard */
      --laptop-left-margin: 10rem;
      --laptop-right-transform: 10rem;
      --laptop-nav-gap: 1.75rem;
      --laptop-scrolled-width: calc(100% - 15rem);
      
      /* ===== TAILLE VID√âO - MODIFIEZ ICI ===== */
      /* Desktop: largeur max de la vid√©o */
      --video-max-width-desktop: 350px;
      
      /* Mobile: largeur max de la vid√©o */
      --video-max-width-mobile: 55%;
      
      /* ===== MARGES VID√âO - MODIFIEZ ICI ===== */
      /* Desktop: marges haut et bas de la vid√©o */
      --video-margin-top-desktop: 0;
      --video-margin-bottom-desktop: 0.5rem;
      
      /* Mobile: marges haut et bas de la vid√©o */
      --video-margin-top-mobile: 0;
      --video-margin-bottom-mobile: 0.5rem;
      
      /* ===== MARGES LIGNE DE S√âPARATION - MODIFIEZ ICI ===== */
      /* Desktop: marges haut et bas de la ligne */
      --separator-margin-top-desktop: -3rem;
      --separator-margin-bottom-desktop: 1rem;
      
      /* Mobile: marges haut et bas de la ligne */
      --separator-margin-top-mobile: -1rem;
      --separator-margin-bottom-mobile: 0rem;
    }
    
    /* Style pour les vid√©os */
    .video-container {
      width: 100%;
      max-width: var(--video-max-width-desktop);
      margin-top: var(--video-margin-top-desktop);
      margin-bottom: var(--video-margin-bottom-desktop);
      margin-left: auto;
      margin-right: auto;
    }
    
    .video-container video {
      width: 100%;
      height: auto;
      border-radius: 12px;
      display: block;
    }
    
    /* Style pour la ligne de s√©paration */
    .separator-line {
      width: 100%;
      max-width: 699px;
      margin-top: var(--separator-margin-top-desktop);
      margin-bottom: var(--separator-margin-bottom-desktop);
      margin-left: auto;
      margin-right: auto;
      padding: 0 1rem;
    }
    
    /* Mobile: appliquer la largeur et marges mobiles */
    @media (max-width: 768px) {
      .video-container {
        max-width: var(--video-max-width-mobile);
        margin-top: var(--video-margin-top-mobile);
        margin-bottom: var(--video-margin-bottom-mobile);
      }
      
      .separator-line {
        margin-top: var(--separator-margin-top-mobile) !important;
        margin-bottom: var(--separator-margin-bottom-mobile) !important;
      }
    }
    
    /* Carte englobante pour vid√©o + texte */
    .video-text-card {
      background: #000000;
      border: 2px solid transparent;
      background-image: 
        linear-gradient(#000000, #000000),
        linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.8));
      background-origin: border-box;
      background-clip: padding-box, border-box;
      border-radius: 1rem;
      padding: 1.5rem 1rem;
      margin: 2rem auto;
      max-width: 650px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
      position: relative;
    }
    
    /* Bouton de rechargement */
    .refresh-button {
      position: absolute;
      top: 1rem;
      right: 1rem;
      width: 40px;
      height: 40px;
      background: white;
      border: none;
      border-radius: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: opacity 0.2s;
      z-index: 10;
    }
    
    .refresh-button:hover {
      opacity: 0.8;
    }
    
    @media (max-width: 768px) {
      .refresh-button {
        width: 32px;
        height: 32px;
        top: 0.75rem;
        right: 0.75rem;
      }
      
      .refresh-button svg {
        width: 16px;
        height: 16px;
      }
    }
    
    /* Styles du modal de g√©n√©ration IA */
    .ai-modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      padding: 1rem;
    }
    
    .ai-modal-overlay.active {
      display: flex;
    }
    
    .ai-modal-container {
      background: #000000;
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 1rem;
      width: 90%;
      max-width: 700px;
      max-height: 85vh;
      overflow-y: auto;
      position: relative;
      padding: 2rem;
    }
    
    .ai-modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      width: 36px;
      height: 36px;
      border-radius: 0.5rem;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }
    
    .ai-modal-close:hover {
      background: rgba(255, 255, 255, 0.2);
    }
    
    .ai-modal-title {
      color: white;
      font-size: 2rem;
      font-weight: 600;
      text-align: center;
      margin-bottom: 1.5rem;
      font-family: 'Outfit', sans-serif;
    }
    
    .ai-modal-steps {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 2rem;
    }
    
    .ai-step-indicator {
      color: rgba(255, 255, 255, 0.5);
      font-size: 1.1rem;
      font-family: 'Outfit', sans-serif;
    }
    
    .ai-step-indicator.active {
      color: white;
      font-weight: 600;
    }
    
    .ai-modal-content {
      min-height: 300px;
    }
    
    .ai-step {
      display: none !important;
    }
    
    .ai-step.active {
      display: block !important;
      animation: fadeIn 0.3s ease-in;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .ai-option-images {
      display: flex;
      gap: 0.5rem;
      justify-content: center;
      margin-bottom: 0.75rem;
    }

    .sport-icon {
      width: 50px;
      height: 50px;
      object-fit: contain;
    }

    .sport-icon-single {
      width: 80px;
      height: 80px;
      object-fit: contain;
      margin-bottom: 0.75rem;
    }

    .ai-option-card:hover .sport-icon,
    .ai-option-card:hover .sport-icon-single {
      transform: scale(1.1);
      transition: transform 0.2s ease;
    }
    
    .ai-step-title {
      color: white;
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      text-align: center;
      font-family: 'Outfit', sans-serif;
    }
    
    .ai-options-grid {
      display: grid;
      gap: 1rem;
      margin-bottom: 2rem;
    }
    
    .ai-option-card {
      background: rgba(255, 255, 255, 0.03);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 0.75rem;
      padding: 1.25rem;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }
    
    .ai-option-card:hover {
      background: rgba(255, 255, 255, 0.06);
      border-color: rgba(255, 255, 255, 0.3);
    }
    
    .ai-option-card.selected {
      background: rgba(255, 255, 255, 0.1);
      border-color: white;
    }
    
    .ai-option-icon {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }
    
    .ai-option-title {
      color: white;
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
      font-family: 'Outfit', sans-serif;
    }
    
    .ai-option-desc {
      color: rgba(255, 255, 255, 0.6);
      font-size: 1rem;
      font-family: 'Outfit', sans-serif;
    }
    
    .ai-modal-actions {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-top: 2rem;
    }
    
    .ai-modal-btn {
      padding: 1rem 2.5rem;
      border-radius: 0.5rem;
      border: none;
      font-size: 1.1rem;
      font-weight: 600;
      font-family: 'Outfit', sans-serif;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .ai-modal-btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .ai-modal-btn-secondary:hover {
      background: rgba(255, 255, 255, 0.15);
    }
    
    .ai-modal-btn-primary {
      background: white;
      color: black;
    }
    
    .ai-modal-btn-primary:hover {
      opacity: 0.9;
    }
    
    .ai-modal-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .ai-loading-screen {
      display: none;
      text-align: center;
      padding: 2rem 0;
    }
    
    .ai-loading-screen.active {
      display: block;
    }
    
    /* Masquer les indicateurs d'√©tapes pendant le chargement */
    .ai-loading-screen.active ~ .ai-modal-steps {
      display: none !important;
    }
    
    /* Masquer le bouton X pendant le chargement */
    .ai-modal.loading .ai-modal-close {
      display: none !important;
      pointer-events: none;
    }
    
    /* Forcer le masquage de TOUTES les √©tapes pendant le chargement */
    .ai-modal.loading .ai-step {
      display: none !important;
      opacity: 0 !important;
      visibility: hidden !important;
    }
    
    /* Forcer l'affichage UNIQUEMENT de l'√©cran de chargement */
    .ai-modal.loading .ai-loading-screen.active {
      display: block !important;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      z-index: 1000;
    }
    
    /* S'assurer que le contenu du modal ne d√©borde pas */
    .ai-modal.loading .ai-modal-content {
      position: relative;
      min-height: 400px;
    }
    
    /* FORCER le masquage du bouton X pendant le chargement - TR√àS IMPORTANT */
    .ai-modal.loading .ai-modal-close {
      display: none !important;
      opacity: 0 !important;
      visibility: hidden !important;
      pointer-events: none !important;
      z-index: -1 !important;
    }
    .ai-modal.loading .ai-modal-content {
      position: relative;
      min-height: 400px;
    }
    
    .ai-atom-container {
      position: relative;
      width: 200px;
      height: 200px;
      margin: 0 auto 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .progress-circle {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1;
    }
    
    .atom-svg {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2;
    }
    
    .atom-svg .progress-percentage {
      font-family: 'Outfit', sans-serif;
      font-size: 32px;
      font-weight: 700;
      fill: white;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    @keyframes orbitRotate {
      to { transform: rotate(360deg); }
    }
    
    .ai-loading-text {
      color: white;
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 1rem;
      font-family: 'Outfit', sans-serif;
    }
    
    .ai-loading-subtext {
      color: rgba(255, 255, 255, 0.6);
      font-size: 1rem;
      font-family: 'Outfit', sans-serif;
    }
    
    @media (max-width: 768px) {
      .ai-modal-container {
        width: 95%;
        padding: 1.5rem 1rem;
      }
      
      /* AUGMENTER au lieu de r√©duire ! */
      .ai-modal-title {
        font-size: 2.2rem;
      }
      
      .ai-step-title {
        font-size: 1.6rem;
      }
      
      .ai-option-title {
        font-size: 1.3rem;
      }
      
      .ai-option-desc {
        font-size: 1.05rem;
      }
      
      .ai-option-icon {
        font-size: 2.8rem;
      }
      
      .ai-modal-btn {
        font-size: 1.15rem;
        padding: 1.1rem 2.2rem;
        width: 100%;
      }
      
      .ai-step-indicator {
        font-size: 1.15rem;
      }
      
      .ai-modal-actions {
        flex-direction: column;
      }
    }
    
    .video-card-title {
      font-family: 'Fustat', sans-serif;
      margin-top: 0.2rem;
      margin-bottom:-1rem;
      font-size: 1.5rem;
      font-weight: 300;
      color: rgba(255, 255, 255, 0.95);
      text-align: center;
      letter-spacing: 0.5px;
    }
    
    @media (max-width: 768px) {
      .video-text-card {
        max-width: 90%;
        padding: 0.75rem;
      }
    }
    
    /* ==================== ANIMATION SHIMMER TEXTE IA ==================== */
    :root {
      --shimmer-duration: 2.5s;
      --shimmer-color-base: rgba(255, 255, 255, 0.95);
      --shimmer-color-highlight: rgba(80, 80, 80, 0.95);
      
      /* ===== TAILLE TEXTE SHIMMER - MODIFIEZ ICI ===== */
      /* Desktop: taille du texte shimmer */
      --shimmer-text-size-desktop: 2.5rem;
     
      
      /* Mobile: taille du texte shimmer */
      --shimmer-text-size-mobile: 1.6rem;
      
      /* ===== MARGES DU TEXTE SHIMMER - MODIFIEZ ICI ===== */
      --shimmer-text-margin-top: 0.5rem;
      --shimmer-text-margin-bottom: 0.5rem;
      
      /* Alignement horizontal: left, center, right */
      --shimmer-text-align: center;
    }
    
    .ai-loading-text {
      text-align: center;
      margin: 0.5rem auto 3.5rem auto; /* Marge r√©duite en haut */
      max-width: 800px;
      padding: 0 1rem;
    }
    
    .ai-loading-text {
      min-height: calc(var(--shimmer-text-size-desktop) * 1.2);
    }
    
    .ai-loading-text p {
      font-size: var(--shimmer-text-size-desktop);
      font-family: 'Fustat', sans-serif;
      font-weight: 300;
      color: var(--shimmer-color-base);
      position: relative;
      display: inline-block;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: clip;
      max-width: 100%;
      margin-top: var(--shimmer-text-margin-top);
      margin-bottom: var(--shimmer-text-margin-bottom);
      text-align: var(--shimmer-text-align);
      background: linear-gradient(
        90deg,
        var(--shimmer-color-base) 0%,
        var(--shimmer-color-base) 40%,
        var(--shimmer-color-highlight) 50%,
        var(--shimmer-color-base) 60%,
        var(--shimmer-color-base) 100%
      );
      background-size: 200% 100%;
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shimmer var(--shimmer-duration) linear infinite;
    }
    
    /* Mode avec SVG (r√©flexion/modification) */
    .ai-loading-text:not(.center-only) {
      display: flex !important;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
    }
    
    /* Mode centrage strict utilis√© UNIQUEMENT pour le texte normal */
    .ai-loading-text.center-only {
      display: grid !important;
      place-items: center;
      gap: 0 !important;
    }
    
    .ai-loading-text.center-only svg {
      display: none !important;
    }
    
    @keyframes shimmer {
      0% {
        background-position: 200% 0;
      }
      100% {
        background-position: -200% 0;
      }
    }
    
    /* Ajustements responsive pour le texte shimmer */
    @media (max-width: 768px) {
      .ai-loading-text {
        margin: 0.4rem auto 1rem auto;
        padding: 0 0.5rem;
        min-height: calc(var(--shimmer-text-size-mobile) * 1.6);
      }
      
      .ai-loading-text p {
        font-size: clamp(0.75rem, 3.5vw, 0.95rem);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: clip;
        max-width: 100%;
      }
    }
    
    /* ==================== DESKTOP UNIQUEMENT - AJUSTEMENTS FACILES ==================== */
    @media (min-width: 769px) {
      
      /* ===== SANS SCROLL - Positions et tailles initiales ===== */
      
      /* Badge Online - Position gauche/droite + hauteur */
      .desktop-badge-online {
        position: relative;
        left: 0rem;
        top: 0rem;
      }
      
      /* Logo - Taille et position */
      .desktop-logo {
        font-size: 3.6rem !important;
        position: relative;
        left: 0rem;
        top: 0.5rem;
      }
      
      /* Badge IA - Position gauche/droite + hauteur */
      .desktop-badge-ia {
        position: relative;
        left: 0rem;
        top: 0rem;
      }
      
      /* Espacement global entre les √©l√©ments */
      .desktop-left {
        gap: 2rem !important;
      }
      
      /* ===== AVEC SCROLL - Rectangle gris ===== */
      /* D√©plac√© dans des media queries d√©di√©es plus bas pour laptop et grands √©crans */
    }
    
    /* ==================== LAPTOP BREAKPOINT (769px - 1440px) ==================== */
    @media (min-width: 769px) and (max-width: 1440px) {
      
      /* Rectangle gris plus large pour laptop */
      .header.scrolled::before {
        width: calc(100% - 2rem) !important;
        height: 90%;
        top: 100%;
      }
      
      /* Badge Online */
      .desktop-badge-online {
        left: 0;
        transform: scale(0.9);
      }
      
      /* Logo */
      .desktop-logo {
        font-size: 2.8rem !important;
        left: 0;
      }
      
      /* Badge MAJ IA */
      .desktop-badge-ia {
        left: 0;
        transform: scale(0.9);
      }
      
      /* Espacement global - Groupe gauche */
      .desktop-left {
        gap: 1rem !important;
        margin-left: 0rem;
      }
      
      /* Espacement global - Groupe droite */
      .desktop-right {
        gap: 1rem;
        transform: translateX(0rem);
      }
      
      /* Nav Links */
      .desktop-nav {
        gap: 1.5rem;
      }
      
      .desktop-nav-item {
        font-size: 1.2rem;
        cursor: pointer !important;
      }
      
      /* Auth Buttons */
      .desktop-auth-link {
        font-size: 1.2rem;
        margin-right: 0.5rem;
      }
      
      .desktop-auth-btn {
        padding: 0.95rem 1.4rem;
        font-size: 1.1rem;
      }
      
      /* Positions ind√©pendantes + drop vertical 2px au scroll */
      .desktop-badge-online,
      .desktop-logo,
      .desktop-badge-ia {
        --left-shift: 0rem;
        --scroll-shift: 0px;
        /* Conserver l'√©chelle si d√©finie ailleurs */
        transform: scale(0.9) translateX(var(--left-shift)) translateY(var(--scroll-shift));
      }
      
      .desktop-nav {
        --nav-shift: 0rem;
        --scroll-shift: 0px;
        transform: translateX(calc(-50% + var(--nav-shift))) translateY(var(--scroll-shift)) !important;
      }
      
      .header.scrolled .desktop-badge-online,
      .header.scrolled .desktop-logo,
      .header.scrolled .desktop-badge-ia {
        --scroll-shift: 2px;
      }
      
      /* Nav: descendre de 2px, ne pas bouger horizontalement */
    .header.scrolled .desktop-nav {
      --scroll-shift: 0px;
      transform: translateX(calc(-50% + var(--nav-shift))) translateY(var(--scroll-shift)) !important;
    }
    }

    /* Laptop √©tendu (1441px - 1800px) - Rectangle gris bord √† bord + √©l√©ments centr√©s */
    @media (min-width: 1441px) and (max-width: 1800px) {
      .header.scrolled::before {
        width: var(--laptop-scrolled-width) !important;
        height: 90%;
        top: 100%;
      }
      
      /* Groupe gauche - ajuster position (ne pas d√©placer le conteneur parent) */
      .desktop-left {
        gap: 1.5rem;
      }
      
      /* D√©placer UNIQUEMENT les √©l√©ments de gauche (ind√©pendamment du nav) */
      .desktop-badge-online,
      .desktop-logo,
      .desktop-badge-ia {
        --left-shift: 40rem; /* Ajustez cette valeur pour d√©placer logo/badges */
        --scroll-shift: 0px;
        transform: translateX(var(--left-shift)) translateY(var(--scroll-shift));
      }
      
      /* Groupe droite - ajuster position */
      .desktop-right {
        transform: translateX(-2rem);
        gap: 1.5rem;
      }
      
      /* Nav links - position ind√©pendante √† droite */
      .desktop-nav {
        gap: 1.5rem;
        margin-right: 2rem;
        --nav-shift: 23rem; /* Ajustez cette valeur pour d√©placer vers la droite */
        --scroll-shift: 0px;
        transform: translateX(calc(-50% + var(--nav-shift))) translateY(var(--scroll-shift)) !important;
      }
      
      /* Assurer que le texte reste sur une ligne */
      .desktop-nav-item {
        white-space: nowrap;
        font-size: 1.2rem;
        cursor: pointer !important;
      }
      
      /* Garder les positions identiques au scroll: descendre de 2px seulement */
      .header.scrolled .desktop-badge-online,
      .header.scrolled .desktop-logo,
      .header.scrolled .desktop-badge-ia {
        --scroll-shift: 2px;
      }
      
      /* Nav: remonter un peu pour rester plus haut */
    .header.scrolled .desktop-nav {
      --scroll-shift: -0.2rem;
      --nav-scroll-offset: 1rem;
      transform: translateX(calc(-50% + var(--nav-shift))) translateY(var(--scroll-shift)) !important;
    }
    }

    /* Tr√®s grands √©crans (>= 1801px) - largeur originale */
    @media (min-width: 1801px) {
      .header.scrolled::before {
        width: calc(75% - 6rem);
        height: 90%;
        top: 100%;
      }
      
      .desktop-nav-item {
        font-size: 1.2rem;
        cursor: pointer !important;
      }
    }
  </style>
</head>
<body>
  {% comment %} D√©tection de l'√©tat de connexion {% endcomment %}
  {% assign user_is_logged_in = false %}
  {% if customer %}
    {% assign user_is_logged_in = true %}
  {% endif %}

  {% comment %} D√©tection des customer tags {% endcomment %}
  {% assign has_payment_failed = false %}
  {% assign has_subscription = false %}
  {% assign has_free_trial = false %}

  {% if customer and customer.tags.size > 0 %}
    {% for tag in customer.tags %}
      {% assign tag_lower = tag | downcase %}
      {% if tag_lower contains 'paiement √©chou√©' or tag_lower contains 'paiement echoue' %}
        {% assign has_payment_failed = true %}
      {% elsif tag_lower contains 'abonnement' %}
        {% assign has_subscription = true %}
      {% elsif tag_lower contains 'free trials' or tag_lower contains 'free trial' %}
        {% assign has_free_trial = true %}
      {% endif %}
    {% endfor %}
  {% endif %}

  {% comment %} D√©tection de l'√©diteur Shopify {% endcomment %}
  {% assign is_shopify_editor = false %}
  {% if request.design_mode %}
    {% assign is_shopify_editor = true %}
  {% endif %}

  {% comment %} D√©terminer le niveau d'acc√®s {% endcomment %}
  {% assign access_level = 'no_subscription' %}
  
  {% comment %} En mode √©diteur Shopify, toujours acc√®s complet {% endcomment %}
  {% if is_shopify_editor %}
    {% assign access_level = 'full' %}
  {% else %}
    {% comment %} Production normale : v√©rifier les tags client {% endcomment %}
    {% if customer == nil %}
      {% assign access_level = 'no_subscription' %}
    {% elsif has_payment_failed %}
      {% assign access_level = 'payment_failed' %}
    {% elsif has_subscription %}
      {% assign access_level = 'full' %}
    {% elsif has_free_trial %}
      {% assign access_level = 'free_trial' %}
    {% else %}
      {% comment %} Utilisateur connect√© MAIS aucun tag valide {% endcomment %}
      {% assign access_level = 'no_subscription' %}
    {% endif %}
  {% endif %}

  {% comment %} CSS conditionnel: cacher sidebar si non connect√© ou paiement √©chou√© {% endcomment %}
  {% assign should_hide_sidebar = false %}
  {% if access_level == 'payment_failed' or access_level == 'no_subscription' %}
    {% assign should_hide_sidebar = true %}
  {% elsif customer == nil and is_shopify_editor == false %}
    {% assign should_hide_sidebar = true %}
  {% endif %}
  
  {% if should_hide_sidebar %}
  <style>
    .sidebar {
      display: none !important;
    }
    .mobile-toggle {
      display: none !important;
    }
    .main-content {
      margin-left: 0 !important;
    }
    .overlay {
      display: none !important;
    }
  </style>
  {% endif %}

  {% if is_shopify_editor %}
    <div style="position: fixed; top: 10px; right: 10px; background: rgba(149, 117, 205, 0.2); border: 1px solid rgba(149, 117, 205, 0.5); padding: 0.5rem 1rem; border-radius: 8px; z-index: 9999; color: #9575cd; font-family: 'Outfit', sans-serif; font-size: 0.75rem; font-weight: 500;">
      üé® MODE √âDITEUR SHOPIFY
    </div>
  {% endif %}

  <!-- SVG Definitions pour ic√¥nes r√©utilisables -->
  <svg style="display: none;">
    <defs>
      <!-- Ic√¥ne atomique IA -->
      <symbol id="atomicIcon" viewBox="0 0 200 200">
        <defs>
          <filter id="aiIconGlow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
            <feMerge>
              <feMergeNode in="coloredBlur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
          <path id="aiOrbit0" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" pathLength="1000"/>
          <path id="aiOrbit1" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(55 100 100)" pathLength="1000"/>
          <path id="aiOrbit2" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(-55 100 100)" pathLength="1000"/>
        </defs>
        <g stroke="#68859e" stroke-width="1.5" fill="none">
          <use href="#aiOrbit0"/>
          <use href="#aiOrbit1"/>
          <use href="#aiOrbit2"/>
        </g>
        <g stroke-linecap="round" filter="url(#aiIconGlow)">
          <use href="#aiOrbit0" stroke="#ffffff" stroke-width="1.5" fill="none" stroke-dasharray="120 880" style="opacity:0.95;">
            <animate attributeName="stroke-dashoffset" values="0;-1000" dur="6s" repeatCount="indefinite"/>
          </use>
          <use href="#aiOrbit1" stroke="#ffffff" stroke-width="1.5" fill="none" stroke-dasharray="120 880" style="opacity:0.95;">
            <animate attributeName="stroke-dashoffset" values="500;-500" dur="6s" repeatCount="indefinite"/>
          </use>
          <use href="#aiOrbit2" stroke="#ffffff" stroke-width="1.5" fill="none" stroke-dasharray="120 880" style="opacity:0.95;">
            <animate attributeName="stroke-dashoffset" values="750;-250" dur="6s" repeatCount="indefinite"/>
          </use>
        </g>
        <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#ffffff" font-weight="700" font-size="43">IA</text>
      </symbol>
    </defs>
  </svg>

  <header class="header" style="background: transparent; position: fixed; height: 80px; width: 100%;">
    <!-- Mobile Toggle Button -->
    <button class="mobile-toggle" onclick="toggleSidebar()" aria-label="Toggle menu">
      <svg class="mobile-toggle-icon hamburger-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M4 6h16M4 12h16M4 18h16"/>
      </svg>
      <svg class="mobile-toggle-icon close-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M6 18L18 6M6 6l12 12"/>
      </svg>
    </button>
    
    <!-- Mobile: Online Badge -->
    <div id="online-badge-container" class="mobile-only" style="position: absolute; left: 23%; top: 0.15rem; transform: translateX(-50%);">
      <div id="online-badge" style="position: relative; display: flex; align-items: center; gap: 0.25rem; padding: 0.25rem 0.4rem; background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.35); border-radius: 9999px; z-index: 2;">
        <svg style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: calc(100% + 4px); height: calc(100% + 4px); pointer-events: none; z-index: -1;">
          <defs>
            <filter id="onlineGlowHeader" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="2" result="b"/>
              <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
          </defs>
          <rect x="2" y="2" width="calc(100% - 4px)" height="calc(100% - 4px)" rx="10" ry="10" fill="none" stroke="#68859e" stroke-width="1" opacity="0.3"/>
          <rect x="2" y="2" width="calc(100% - 4px)" height="calc(100% - 4px)" rx="10" ry="10" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="30 510" stroke-linecap="round" filter="url(#onlineGlowHeader)" opacity="0.9">
            <animate attributeName="stroke-dashoffset" values="0;-540" dur="8s" repeatCount="indefinite"/>
          </rect>
        </svg>
        <svg width="6" height="6" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
          <circle cx="10" cy="10" r="4" fill="rgba(255, 255, 255, 0.7)"/>
        </svg>
        <span style="color: rgba(255, 255, 255, 0.7); font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 0.75rem; white-space: nowrap;"><span id="header-member-count" class="member-count" style="color: rgba(255, 255, 255, 0.95); font-weight: 300;">{{ section.settings.members_base | default: 50 }}</span> online</span>
      </div>
    </div>
    
    <!-- Mobile: Logo centr√© -->
    <div class="logo mobile-only" style="font-family: 'Outfit', sans-serif; font-size: 3.5rem; letter-spacing: -0.02em; font-weight: 300; display: inline-flex; align-items: baseline; position: relative; top: 1rem;">
      <span style="color: #ffffff;">wina</span><span style="color: rgba(255, 255, 255, 0.35);">bet</span><span style="color: #ffffff; font-size: 1.4rem; margin-left: -0.15em;">.ai</span>
    </div>
    
    <!-- Mobile: Badge IA -->
    <div id="maj-badge-container" class="mobile-only" style="position: absolute; left: 83%; top: 1.25rem; transform: translateX(-50%);">
      <svg style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 86px; height: 32px; pointer-events: none; z-index: 1;">
        <defs>
          <filter id="badgeGlowHeader" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="2" result="b"/>
            <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>
        </defs>
         <rect x="2" y="2" width="82" height="28" rx="14" ry="14" fill="none" stroke="#68859e" stroke-width="1" opacity="0.3"/>
         <rect x="2" y="2" width="82" height="28" rx="14" ry="14" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="40 500" stroke-linecap="round" filter="url(#badgeGlowHeader)" opacity="0.9">
           <animate attributeName="stroke-dashoffset" values="0;-540" dur="8s" repeatCount="indefinite"/>
         </rect>
      </svg>
      <div style="position: relative; display: flex; align-items: center; gap: 0.3rem; padding: 0.25rem 0.5rem; background: rgba(16, 185, 129, 0.05); border: 1px solid rgba(255, 255, 255, 0.35); border-radius: 9999px; min-width: 80px; z-index: 2;">
        <svg id="atom-header" width="20" height="20" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
          <defs>
            <filter id="softGlowHeader" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="1.2" result="b"/>
              <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <path id="orbit0Header" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" pathLength="1000"/>
            <path id="orbit1Header" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(55 100 100)" pathLength="1000"/>
            <path id="orbit2Header" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(-55 100 100)" pathLength="1000"/>
          </defs>
          <g stroke="#68859e" stroke-width="2" fill="none">
            <use href="#orbit0Header"/>
            <use href="#orbit1Header"/>
            <use href="#orbit2Header"/>
          </g>
          <g stroke-linecap="round" filter="url(#softGlowHeader)">
            <use href="#orbit0Header" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
              <animate attributeName="stroke-dashoffset" values="0;-1000" dur="6s" repeatCount="indefinite" begin="0s"/>
            </use>
            <use href="#orbit1Header" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
              <animate attributeName="stroke-dashoffset" values="500;-500" dur="6s" repeatCount="indefinite" begin="0s"/>
            </use>
            <use href="#orbit2Header" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
              <animate attributeName="stroke-dashoffset" values="750;-250" dur="6s" repeatCount="indefinite" begin="0s"/>
            </use>
          </g>
          <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#ffffff" font-weight="700" font-size="54">IA</text>
        </svg>
          <span style="color: rgba(255, 255, 255, 0.7); font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 0.75rem; white-space: nowrap;">MAJ <span id="header-time" style="color: rgba(255, 255, 255, 0.95); font-weight: 300;">17:34</span></span>
      </div>
    </div>

    <!-- Desktop Menu -->
    <div class="desktop-menu">
      <!-- Left: Logo + Badges + Menu Items -->
      <div class="desktop-left">
        <!-- Online Badge -->
        <div class="desktop-badge-online">
          <div id="desktop-online-badge" style="position: relative; display: flex; align-items: center; gap: 0.64rem; padding: 0.6rem 0.92rem; background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.35); border-radius: 9999px; z-index: 2;">
            <svg style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: calc(100% + 10px); height: calc(100% + 10px); pointer-events: none; z-index: -1;">
              <defs>
                <filter id="onlineGlowDesktopClone" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="2" result="b"/>
                  <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
              </defs>
              <rect x="5" y="5" width="calc(100% - 10px)" height="calc(100% - 10px)" rx="16" ry="16" fill="none" stroke="#68859e" stroke-width="1" opacity="0.3"/>
              <rect x="5" y="5" width="calc(100% - 10px)" height="calc(100% - 10px)" rx="16" ry="16" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="70 1000" stroke-linecap="round" filter="url(#onlineGlowDesktopClone)" opacity="0.9">
                <animate attributeName="stroke-dashoffset" values="0;-540" dur="8s" repeatCount="indefinite"/>
              </rect>
            </svg>
            <svg width="14" height="14" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
              <circle cx="10" cy="10" r="4" fill="rgba(255, 255, 255, 0.7)"/>
            </svg>
            <span style="color: rgba(255, 255, 255, 0.7); font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 1.48rem; white-space: nowrap;"><span id="desktop-member-count" class="member-count" style="color: rgba(255, 255, 255, 0.95); font-weight: 300;">{{ section.settings.members_base | default: 50 }}</span> online</span>
          </div>
        </div>

        <!-- Logo -->
        <div class="desktop-logo" style="font-family: 'Outfit', sans-serif; font-weight: 300;">
          <span style="color: #ffffff;">wina</span><span style="color: rgba(255, 255, 255, 0.35);">bet</span><span style="color: #ffffff; font-size: 1.4rem; margin-left: -0.15em;">.ai</span>
        </div>

        <!-- IA Badge -->
        <div class="desktop-badge-ia">
          <div style="position: relative; display: flex; align-items: center; gap: 0.52rem; padding: 0.44rem 0.72rem; background: rgba(16, 185, 129, 0.05); border: 1px solid rgba(255, 255, 255, 0.35); border-radius: 40px; min-width: 140px; z-index: 2;">
            <svg style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: calc(100% + 10px); height: calc(100% + 10px); pointer-events: none; z-index: -1;">
              <defs>
                <filter id="iaGlowDesktop" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="2" result="b"/>
                  <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
              </defs>
              <rect x="5" y="5" width="calc(100% - 10px)" height="calc(100% - 10px)" rx="20" ry="20" fill="none" stroke="#68859e" stroke-width="1" opacity="0.3"/>
              <rect x="5" y="5" width="calc(100% - 10px)" height="calc(100% - 10px)" rx="20" ry="20" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="70 1000" stroke-linecap="round" filter="url(#iaGlowDesktop)" opacity="0.9">
                <animate attributeName="stroke-dashoffset" values="0;-540" dur="8s" repeatCount="indefinite"/>
              </rect>
            </svg>
            <svg id="atom-desktop" width="29" height="29" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
              <defs>
                <filter id="softGlowDesktopClone" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="1.2" result="b"/>
                  <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
                <path id="orbit0DesktopClone" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" pathLength="1000"/>
                <path id="orbit1DesktopClone" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(55 100 100)" pathLength="1000"/>
                <path id="orbit2DesktopClone" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(-55 100 100)" pathLength="1000"/>
              </defs>
              <g stroke="#68859e" stroke-width="2" fill="none">
                <use href="#orbit0DesktopClone"/>
                <use href="#orbit1DesktopClone"/>
                <use href="#orbit2DesktopClone"/>
              </g>
              <g stroke-linecap="round" filter="url(#softGlowDesktopClone)">
                <use href="#orbit0DesktopClone" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                  <animate attributeName="stroke-dashoffset" values="0;-1000" dur="6s" repeatCount="indefinite" begin="0s"/>
                </use>
                <use href="#orbit1DesktopClone" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                  <animate attributeName="stroke-dashoffset" values="500;-500" dur="6s" repeatCount="indefinite" begin="0s"/>
                </use>
                <use href="#orbit2DesktopClone" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                  <animate attributeName="stroke-dashoffset" values="750;-250" dur="6s" repeatCount="indefinite" begin="0s"/>
                </use>
              </g>
              <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#ffffff" font-weight="700" font-size="43">IA</text>
            </svg>
            <span style="color: rgba(255, 255, 255, 0.7); font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 1.04rem; white-space: nowrap;">MAJ <span id="desktop-time" style="color: rgba(255, 255, 255, 0.95); font-weight: 300;">17:34</span></span>
          </div>
        </div>

        <!-- Menu Items -->
        <nav class="desktop-nav" style="margin-right: 3rem;">
          <a class="desktop-nav-item" data-page="bet" onclick="navigateTo(event, 'bet')">Bet du jour</a>
          <a class="desktop-nav-item" data-page="parlay" onclick="navigateTo(event, 'parlay')">Parlay du jour</a>
          <a class="desktop-nav-item" data-page="historique-bet" onclick="navigateTo(event, 'historique-bet')">Historique bet du jour</a>
          <a class="desktop-nav-item" data-page="historique-parlay" onclick="navigateTo(event, 'historique-parlay')">Historique Parlay du jour</a>
          <a class="desktop-nav-item" data-page="strategy" onclick="navigateTo(event, 'strategy')">Notre strat√©gie</a>
          <a class="desktop-nav-item" href="https://winabet.ai/#rejoindre" target="_blank" rel="noopener noreferrer">Abonnement</a>
          <a class="desktop-nav-item" href="https://shopify.com/78184907003/account/pages/5176fb69-acd0-47d9-a29c-3ad5668cf59d">Mon compte</a>
          <a class="desktop-nav-item" href="https://winabet.ai">Boutique</a>
          <a class="desktop-nav-item" data-page="support" onclick="navigateTo(event, 'support')">Support</a>
        </nav>
      </div>
    </div>
  </header>

  <!-- Overlay -->
  <div class="overlay" onclick="toggleSidebar()"></div>

  <!-- Sidebar -->
  <aside class="sidebar">
    <!-- Mobile Toggle X Button (inside sidebar) -->
    <button class="mobile-toggle active" onclick="toggleSidebar()" aria-label="Toggle menu" style="position: absolute; top: 1.25rem; left: 1.5rem; z-index: 100;">
      <svg class="mobile-toggle-icon close-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M6 18L18 6M6 6l12 12"/>
      </svg>
    </button>
    
    <div id="online-badge-container" class="mobile-only" style="position: absolute; left: 23%; top: 0.15rem; transform: translateX(-50%);">
      <div id="online-badge" style="position: relative; display: flex; align-items: center; gap: 0.25rem; padding: 0.25rem 0.4rem; background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.35); border-radius: 9999px; z-index: 2;">
        <svg style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: calc(100% + 4px); height: calc(100% + 4px); pointer-events: none; z-index: -1;">
          <defs>
            <filter id="onlineGlowHeader" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="2" result="b"/>
              <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
          </defs>
          <rect x="2" y="2" width="calc(100% - 4px)" height="calc(100% - 4px)" rx="10" ry="10" fill="none" stroke="#68859e" stroke-width="1" opacity="0.3"/>
          <rect x="2" y="2" width="calc(100% - 4px)" height="calc(100% - 4px)" rx="10" ry="10" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="30 510" stroke-linecap="round" filter="url(#onlineGlowHeader)" opacity="0.9">
            <animate attributeName="stroke-dashoffset" values="0;-540" dur="8s" repeatCount="indefinite"/>
          </rect>
        </svg>
        <svg width="6" height="6" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
          <circle cx="10" cy="10" r="4" fill="rgba(255, 255, 255, 0.7)"/>
        </svg>
        <span style="color: rgba(255, 255, 255, 0.7); font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 0.75rem; white-space: nowrap;"><span id="header-member-count" class="member-count" style="color: rgba(255, 255, 255, 0.95); font-weight: 300;">{{ section.settings.members_base | default: 50 }}</span> online</span>
      </div>
    </div>
    
    <!-- Mobile: Logo centr√© -->
    <div class="logo mobile-only" style="font-family: 'Outfit', sans-serif; font-size: 3.5rem; letter-spacing: -0.02em; font-weight: 300; display: inline-flex; align-items: baseline; position: absolute; left: 50%; transform: translateX(-50%); top: 1rem;">
      <span style="color: #ffffff;">wina</span><span style="color: rgba(255, 255, 255, 0.35);">bet</span><span style="color: #ffffff; font-size: 1.4rem; margin-left: -0.15em;">.ai</span>
    </div>
    
    <!-- Mobile: Badge IA -->
    <div id="maj-badge-container" class="mobile-only" style="position: absolute; left: 83%; top: 1.25rem; transform: translateX(-50%);">
      <svg style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 86px; height: 32px; pointer-events: none; z-index: 1;">
        <defs>
          <filter id="badgeGlowHeader" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="2" result="b"/>
            <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>
        </defs>
         <rect x="2" y="2" width="82" height="28" rx="14" ry="14" fill="none" stroke="#68859e" stroke-width="1" opacity="0.3"/>
         <rect x="2" y="2" width="82" height="28" rx="14" ry="14" fill="none" stroke="#ffffff" stroke-width="2" stroke-dasharray="40 500" stroke-linecap="round" filter="url(#badgeGlowHeader)" opacity="0.9">
           <animate attributeName="stroke-dashoffset" values="0;-540" dur="8s" repeatCount="indefinite"/>
         </rect>
      </svg>
      <div style="position: relative; display: flex; align-items: center; gap: 0.3rem; padding: 0.25rem 0.5rem; background: rgba(16, 185, 129, 0.05); border: 1px solid rgba(255, 255, 255, 0.35); border-radius: 9999px; min-width: 80px; z-index: 2;">
        <svg id="atom-header" width="20" height="20" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" style="flex-shrink: 0;">
          <defs>
            <filter id="softGlowHeader" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="1.2" result="b"/>
              <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <path id="orbit0Header" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" pathLength="1000"/>
            <path id="orbit1Header" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(55 100 100)" pathLength="1000"/>
            <path id="orbit2Header" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(-55 100 100)" pathLength="1000"/>
          </defs>
          <g stroke="#68859e" stroke-width="2" fill="none">
            <use href="#orbit0Header"/>
            <use href="#orbit1Header"/>
            <use href="#orbit2Header"/>
          </g>
          <g stroke-linecap="round" filter="url(#softGlowHeader)">
            <use href="#orbit0Header" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
              <animate attributeName="stroke-dashoffset" values="0;-1000" dur="6s" repeatCount="indefinite" begin="0s"/>
            </use>
            <use href="#orbit1Header" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
              <animate attributeName="stroke-dashoffset" values="500;-500" dur="6s" repeatCount="indefinite" begin="0s"/>
            </use>
            <use href="#orbit2Header" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
              <animate attributeName="stroke-dashoffset" values="750;-250" dur="6s" repeatCount="indefinite" begin="0s"/>
            </use>
          </g>
          <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#ffffff" font-weight="700" font-size="54">IA</text>
        </svg>
        <span style="color: rgba(255, 255, 255, 0.7); font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 0.75rem; white-space: nowrap;">MAJ <span id="header-time" style="color: rgba(255, 255, 255, 0.95); font-weight: 300;">17:34</span></span>
      </div>
    </div>
   

    <nav class="sidebar-nav">
      <a class="nav-item active" data-page="bet" onclick="navigateTo(event, 'bet')">
        <div class="nav-item-content">
          <span>Bet du jour</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" data-page="parlay" onclick="navigateTo(event, 'parlay')">
        <div class="nav-item-content">
          <span>Parlay du jour</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" data-page="historique-bet" onclick="navigateTo(event, 'historique-bet')">
        <div class="nav-item-content">
          <span>Historique bet du jour</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" data-page="historique-parlay" onclick="navigateTo(event, 'historique-parlay')">
        <div class="nav-item-content">
          <span>Historique Parlay du jour</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" data-page="strategy" onclick="navigateTo(event, 'strategy')">
        <div class="nav-item-content">
          <span>Notre strat√©gie</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" href="https://winabet.ai/#rejoindre" target="_blank" rel="noopener noreferrer">
        <div class="nav-item-content">
          <span>Abonnement</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" href="https://shopify.com/78184907003/account/pages/5176fb69-acd0-47d9-a29c-3ad5668cf59d">
        <div class="nav-item-content">
          <span>Mon compte</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" href="https://winabet.ai">
        <div class="nav-item-content">
          <span>Boutique</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>

      <a class="nav-item" data-page="support" onclick="navigateTo(event, 'support')">
        <div class="nav-item-content">
          <span>Support</span>
        </div>
        <svg class="chevron-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </a>
    </nav>

    <div class="sidebar-footer">
      ¬© 2024 WINABET.AI
    </div>
  </aside>

  

  <!-- Main Content -->
  <main class="main-content">
    <!-- PAGE 1: BET DU JOUR -->
    <div id="page-bet" class="page active">
      <div class="container">
        <!-- Carte englobante vid√©o + texte -->
        <div class="video-text-card">
          <button class="refresh-button" aria-label="Recharger l'analyse">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="2">
              <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
            </svg>
          </button>
          <h2 class="video-card-title">Analyse IA en temps r√©el</h2>
          <!-- Vid√©o en boucle -->
          <div class="video-container">
            <video 
              id="bet-video"
              autoplay 
              loop 
              muted 
              playsinline
              style="display: block;"
            >
              <source src="https://cdn.shopify.com/videos/c/o/v/8d4ee094c0044c0e8bdb95482b822830.mp4" type="video/mp4">
              Votre navigateur ne supporte pas la lecture de vid√©os.
            </video>
            <img 
              id="bet-fallback-image"
              src="https://cdn.shopify.com/s/files/1/0781/8490/7003/files/frame_000.png?v=1762845718"
              alt="Analyse IA"
              style="display: none; width: 100%; height: 100%; object-fit: cover;"
            />
          </div>
          
          <div class="ai-loading-text">
            <!-- SVG Lumi√®re - visible pendant phases de r√©flexion -->
            <svg id="light-icon-bet" style="display: none; flex-shrink: 0; color: var(--shimmer-color-base); background: linear-gradient(90deg, var(--shimmer-color-base) 0%, var(--shimmer-color-highlight) 20%, var(--shimmer-color-highlight) 40%, var(--shimmer-color-base) 60%, var(--shimmer-color-base) 100%); background-size: 200% 100%; background-clip: text; -webkit-background-clip: text; animation: shimmer 6s ease-in-out infinite;" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 18h6M10 22h4M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8c0-3.31-2.69-6-6-6S6 4.69 6 8c0 1.3.53 2.48 1.5 3.5.76.76 1.23 1.52 1.41 2.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <!-- SVG Modification - visible pendant phases de modification -->
            <svg id="edit-icon-bet" style="display: none; flex-shrink: 0; color: var(--shimmer-color-base); background: linear-gradient(90deg, var(--shimmer-color-base) 0%, var(--shimmer-color-highlight) 20%, var(--shimmer-color-highlight) 40%, var(--shimmer-color-base) 60%, var(--shimmer-color-base) 100%); background-size: 200% 100%; background-clip: text; -webkit-background-clip: text; animation: shimmer 6s ease-in-out infinite;" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <p id="rotating-text">Analyse des meilleurs opportunit√©es en cours</p>
          </div>
        </div>
        
        <!-- Modal de g√©n√©ration IA pour Bet du jour -->
        <div id="ai-modal-bet" class="ai-modal-overlay">
          <div class="ai-modal-container">
            <button class="ai-modal-close" onclick="closeAIModal('bet')">&times;</button>
            <h2 class="ai-modal-title">Bet du jour</h2>
            
            <div class="ai-modal-steps">
              <span class="ai-step-indicator active" data-step="1">√âtape 1</span>
              <span style="color: rgba(255,255,255,0.3);">‚Ä¢</span>
              <span class="ai-step-indicator" data-step="2">√âtape 2</span>
              <span style="color: rgba(255,255,255,0.3);">‚Ä¢</span>
              <span class="ai-step-indicator" data-step="3">√âtape 3</span>
            </div>
            
            <div class="ai-modal-content">
              <!-- √âtape 1: Choix du sport -->
              <div class="ai-step active" data-step="1">
                <h3 class="ai-step-title">Choisis le sport</h3>
                <div class="ai-options-grid">
                  <div class="ai-option-card" data-option="sport" data-value="all">
                    <div class="ai-option-images">
                      <img src="https://cdn.shopify.com/s/files/1/0781/8490/7003/files/Untitled_design-67_cafd428b-ced8-42b4-ba01-5acb849f28f1.png?v=1763771742" 
                           alt="NFL" class="sport-icon">
                      <img src="https://cdn.shopify.com/s/files/1/0781/8490/7003/files/Untitled_design-68_6926abde-3b9e-4114-a163-6b2f934f73a6.png?v=1763771741" 
                           alt="NHL" class="sport-icon">
                    </div>
                    <div class="ai-option-title">Tous les sports</div>
                  </div>
                  <div class="ai-option-card" data-option="sport" data-value="nhl">
                    <img src="https://cdn.shopify.com/s/files/1/0781/8490/7003/files/Untitled_design-68_6926abde-3b9e-4114-a163-6b2f934f73a6.png?v=1763771741" 
                         alt="NHL" class="sport-icon-single">
                    <div class="ai-option-title">NHL</div>
                  </div>
                  <div class="ai-option-card" data-option="sport" data-value="nfl">
                    <img src="https://cdn.shopify.com/s/files/1/0781/8490/7003/files/Untitled_design-67_cafd428b-ced8-42b4-ba01-5acb849f28f1.png?v=1763771742" 
                         alt="NFL" class="sport-icon-single">
                    <div class="ai-option-title">NFL</div>
                  </div>
                </div>
              </div>
              
              <!-- √âtape 2: Choix du type -->
              <div class="ai-step" data-step="2">
                <h3 class="ai-step-title">Choisis ton type</h3>
                <div class="ai-options-grid">
                  <div class="ai-option-card" data-option="type" data-value="safe">
                    <div class="ai-option-icon">üõ°Ô∏è</div>
                    <div class="ai-option-title">Les plus safe</div>
                    <div class="ai-option-desc">Mais moins de gain</div>
                  </div>
                  <div class="ai-option-card" data-option="type" data-value="profitable">
                    <div class="ai-option-icon">üí∞</div>
                    <div class="ai-option-title">Les plus rentable</div>
                    <div class="ai-option-desc">C'est le plus √©quilibr√© entre gain et risque</div>
                  </div>
                  <div class="ai-option-card" data-option="type" data-value="risky">
                    <div class="ai-option-icon">üöÄ</div>
                    <div class="ai-option-title">Les plus gros gain</div>
                    <div class="ai-option-desc">Plus de risque</div>
                  </div>
                </div>
              </div>
              
              <!-- √âtape 3: Type d'analyse -->
              <div class="ai-step" data-step="3">
                <h3 class="ai-step-title">Analyse de l'IA</h3>
                <div class="ai-options-grid">
                  <div class="ai-option-card" data-option="analysis" data-value="deep">
                    <div class="ai-option-icon">üî¨</div>
                    <div class="ai-option-title">Analyse pouss√©e</div>
                    <div class="ai-option-desc">Recherche approfondie des meilleures opportunit√©s</div>
                  </div>
                  <div class="ai-option-card" data-option="analysis" data-value="normal">
                    <div class="ai-option-icon">‚ö°</div>
                    <div class="ai-option-title">Analyse normale</div>
                    <div class="ai-option-desc">√âquilibre entre rapidit√© et pr√©cision</div>
                  </div>
                  <div class="ai-option-card" data-option="analysis" data-value="fast">
                    <div class="ai-option-icon">üöÄ</div>
                    <div class="ai-option-title">Analyse rapide</div>
                    <div class="ai-option-desc">R√©sultats optimis√©s en un instant</div>
                  </div>
                </div>
              </div>
              
              <!-- √âcran de chargement -->
              <div class="ai-loading-screen">
                <div class="ai-atom-container">
                  <!-- Cercle de progression externe -->
                  <svg class="progress-circle" width="200" height="200" viewBox="0 0 200 200">
                    <circle 
                      cx="100" 
                      cy="100" 
                      r="90" 
                      fill="none" 
                      stroke="rgba(255,255,255,0.1)" 
                      stroke-width="4"
                    />
                    <circle 
                      id="progress-circle-bet"
                      cx="100" 
                      cy="100" 
                      r="90" 
                      fill="none" 
                      stroke="white" 
                      stroke-width="4" 
                      stroke-dasharray="565.48" 
                      stroke-dashoffset="565.48"
                      transform="rotate(-90 100 100)"
                      style="transition: stroke-dashoffset 0.1s linear;"
                    />
                  </svg>
                  
                  <!-- SVG Atome IA par-dessus -->
                  <svg class="atom-svg" width="160" height="160" viewBox="0 0 200 200">
                    <defs>
                      <filter id="softGlow-bet" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                        <feMerge>
                          <feMergeNode in="coloredBlur"/>
                          <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                      </filter>
                    </defs>
                    
                    <!-- Orbites -->
                    <g filter="url(#softGlow-bet)">
                      <ellipse cx="100" cy="100" rx="70" ry="30" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1.5">
                        <animateTransform attributeName="transform" type="rotate" from="0 100 100" to="360 100 100" dur="8s" repeatCount="indefinite"/>
                      </ellipse>
                      <ellipse cx="100" cy="100" rx="70" ry="30" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1.5">
                        <animateTransform attributeName="transform" type="rotate" from="60 100 100" to="420 100 100" dur="8s" repeatCount="indefinite"/>
                      </ellipse>
                      <ellipse cx="100" cy="100" rx="70" ry="30" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1.5">
                        <animateTransform attributeName="transform" type="rotate" from="120 100 100" to="480 100 100" dur="8s" repeatCount="indefinite"/>
                      </ellipse>
                    </g>
                    
                    <!-- Pourcentage au centre -->
                    <text id="progress-percentage-bet" x="100" y="110" class="progress-percentage" text-anchor="middle">0%</text>
                  </svg>
                </div>
                <div class="ai-loading-text">Analyse en cours...</div>
                <div class="ai-loading-subtext" id="loading-subtext-bet">Analyse des statistiques</div>
              </div>
            </div>
            
            <div class="ai-modal-actions">
              <button class="ai-modal-btn ai-modal-btn-secondary" id="prev-btn-bet" onclick="prevStepBet()" style="display: none;">Pr√©c√©dent</button>
              <button class="ai-modal-btn ai-modal-btn-primary" id="next-btn-bet" onclick="nextStepBet()" disabled>Prochain</button>
            </div>
          </div>
        </div>
        
        <h1>BET DU JOUR</h1>
        <p class="subtitle">Les bet avec la meilleur probabilit√© de r√©ussite aujourd'hui. Nous affichons tous les bet avec minimum de 70% de chance de gagner selon notre IA.</p>

        {% assign bet_cards = section.blocks | where: 'type', 'bet_card' %}
        {% if bet_cards.size > 0 %}
          {% assign visible_bets = 0 %}
          <div class="cards-grid">
          {% for block in bet_cards %}
            {% if block.settings.show_card %}
              {% comment %} D√©terminer si le bet doit √™tre affich√© {% endcomment %}
              {% assign should_display = false %}
              {% if access_level == 'free_trial' %}
                {% if block.settings.available_for_free_trial %}
                  {% assign should_display = true %}
                  {% assign visible_bets = visible_bets | plus: 1 %}
                {% endif %}
              {% else %}
                {% assign should_display = true %}
                {% assign visible_bets = visible_bets | plus: 1 %}
              {% endif %}
              
              {% if should_display %}
              <div class="card-wrapper">

              <div class="bet-card" style="{% if block.settings.send_to_history == true %}display:none{% endif %}" 
                   {{ block.shopify_attributes }}
                   data-block-type="bet_card"
                   data-block-id="{{ block.id }}"
                   data-sport-type="{{ block.settings.sport_type | default: 'nhl' }}"
                   data-ai-data-count="{{ block.settings.ai_data_count | default: 2843 }}"
                   data-win-percentage="{{ block.settings.win_percentage | default: 92 }}"
                   data-bet-type="{{ block.settings.bet_type | default: 'moneyline' }}"
                   data-team1-name="{{ block.settings.team1_name }}"
                   data-team1-logo="{{ block.settings.team1_logo | image_url: width: 200 }}"
                   data-team2-name="{{ block.settings.team2_name }}"
                   data-team2-logo="{{ block.settings.team2_logo | image_url: width: 200 }}"
                   data-match-time="{{ block.settings.match_time }}"
                   data-match-date="{{ block.settings.match_date }}"
                   data-multiplier="{{ block.settings.multiplier }}"
                   data-bet-units="{{ block.settings.bet_units }}"
                   data-odds="{{ block.settings.odds }}"
                   data-best-bookmaker="{{ block.settings.best_bookmaker }}"
                   data-best-odds="{{ block.settings.best_odds }}"
                   data-result="{{ block.settings.result | default: 'pending' }}"
                   data-send-to-history="{{ block.settings.send_to_history }}"
                   data-available-for-free-trial="{{ block.settings.available_for_free_trial }}"
                   data-spread-value="{{ block.settings.spread_value }}"
                   data-spread-team="{{ block.settings.spread_team }}"
                   data-over-under-type="{{ block.settings.over_under_type }}"
                   data-over-under-value="{{ block.settings.over_under_value }}"
                   data-over-under-stat-type="{{ block.settings.over_under_stat_type }}"
                   data-over-under-text-custom="{{ block.settings.over_under_text_custom }}"
                   data-moneyline-team="{{ block.settings.moneyline_team | default: 'team2' }}"
              >
                 <!-- AI Analysis Header - Nouveau Layout -->
             <div class="confidence-badge" style="display: flex; align-items: center; justify-content: flex-start; gap: 0.5rem; background: rgba(0, 0, 0, 0.6); margin-top: 0.75rem; margin-bottom: 0.125rem;">
                   <!-- Gauche: Ic√¥ne IA + Pourcentage -->
                   <div style="display: flex; align-items: center; gap: 1rem;">
                     <!-- Ic√¥ne IA atomique (50px) -->
                     <div style="position: relative; width: 50px; height: 50px; flex-shrink: 0;">
                       <svg width="50" height="50" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                         <defs>
                           <filter id="softGlowBetHeader{{ forloop.index }}" x="-50%" y="-50%" width="200%" height="200%">
                             <feGaussianBlur stdDeviation="1.2" result="b"/>
                             <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                           </filter>
                           <path id="orbit0BetHeader{{ forloop.index }}" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" pathLength="1000"/>
                           <path id="orbit1BetHeader{{ forloop.index }}" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(55 100 100)" pathLength="1000"/>
                           <path id="orbit2BetHeader{{ forloop.index }}" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(-55 100 100)" pathLength="1000"/>
                         </defs>
                         <g stroke="#68859e" stroke-width="2" fill="none">
                           <use href="#orbit0BetHeader{{ forloop.index }}"/><use href="#orbit1BetHeader{{ forloop.index }}"/><use href="#orbit2BetHeader{{ forloop.index }}"/>
                         </g>
                         <g stroke-linecap="round" filter="url(#softGlowBetHeader{{ forloop.index }})">
                           <use href="#orbit0BetHeader{{ forloop.index }}" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                             <animate attributeName="stroke-dashoffset" values="0;-1000" dur="6s" repeatCount="indefinite" begin="0s"/>
                           </use>
                           <use href="#orbit1BetHeader{{ forloop.index }}" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                             <animate attributeName="stroke-dashoffset" values="500;-500" dur="6s" repeatCount="indefinite" begin="0s"/>
                           </use>
                           <use href="#orbit2BetHeader{{ forloop.index }}" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                             <animate attributeName="stroke-dashoffset" values="750;-250" dur="6s" repeatCount="indefinite" begin="0s"/>
                           </use>
                         </g>
                         <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#ffffff" font-weight="700" font-size="54">IA</text>
                       </svg>
                     </div>
                     
                     <!-- Pourcentage -->
                <span style="font-family: 'outfit', sans-serif; font-weight: 300; font-size: 1.80rem; color: #ffffff; line-height: 1;">{{ block.settings.win_percentage | default: 92 }}%</span>
                   </div>
                   
                   <!-- Centre: Texte confiance ia -->
                   <span style="font-family: 'fustat', sans-serif; font-weight: 400; font-size: 1.25rem; color: rgba(255, 255, 255, 0.7); line-height: 1;  margin-left: 0.5rem;">Confiance ia pour ce bet</span>
                   
                   <!-- Droite: Bouton VOIR ANALYSE IA avec coins arrondis (8px) -->
                      <button 
                      style="padding: 0.5rem 1rem; background: rgba(255, 255, 255, 0.1); color: rgba(255, 255, 255, 0.7); border: 1px solid rgba(255, 255, 255, 0.15); border-radius: 0.5rem; font-family: 'Outfit', sans-serif; font-weight: 300; font-size: 0.75rem; cursor: pointer; transition: all 0.2s; line-height: 1.2; white-space: nowrap; margin-left: auto;"
                     onclick="openAnalysisDialog(this)"
                     data-win-percentage="{{ block.settings.win_percentage | default: 92 }}"
                     data-ai-data-count="{{ block.settings.ai_data_count | default: 2843 }}"
                     data-sport-type="{{ block.settings.sport_type | default: 'nhl' }}"
                     data-team1="{{ block.settings.team1_name | default: '√âQUIPE DOMICILE' }}"
                     data-team2="{{ block.settings.team2_name | default: '√âQUIPE EXT√âRIEUR' }}"
                     data-auto-increment="{{ block.settings.auto_increment_enabled }}"
                     data-increment-interval="{{ block.settings.auto_increment_interval | default: 5 }}"
                     data-increment-amount="{{ block.settings.auto_increment_amount | default: 5 }}"
                   >
                     VOIR<br>ANALYSE<br>IA
                   </button>
                 </div>

                <div class="bet-card-content">
                  <button class="multiplier-button">x{{ block.settings.multiplier | default: '1.95' }}</button>
                  <div class="match-info-new">
                    {% assign bet_type = block.settings.bet_type | default: 'moneyline' %}
                    
                    {% if bet_type == 'moneyline' %}
                      <!-- MONEYLINE -->
                      {% assign moneyline_team = block.settings.moneyline_team | default: 'team2' %}
                      <div class="match-info-header">MONEYLINE</div>
                      <div class="match-info-content">
                        <div class="team-side {% if moneyline_team == 'team1' %}selected{% endif %}">
                          {% if block.settings.team1_logo %}
                            <img src="{{ block.settings.team1_logo | image_url: width: 200 }}" alt="{{ block.settings.team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team1_name | default: 'ST. LOUIS' }}</div>
                          {% if moneyline_team == 'team1' %}
                            <div class="team-bet-type">VICTOIRE</div>
                          {% endif %}
                        </div>

                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                        </div>

                        <div class="team-side {% if moneyline_team == 'team2' %}selected{% endif %}">
                          {% if block.settings.team2_logo %}
                            <img src="{{ block.settings.team2_logo | image_url: width: 200 }}" alt="{{ block.settings.team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team2_name | default: 'PITTSBURGH' }}</div>
                          {% if moneyline_team == 'team2' %}
                            <div class="team-bet-type">VICTOIRE</div>
                          {% endif %}
                        </div>
                      </div>
                    
                    {% elsif bet_type == 'spread' %}
                      <!-- SPREAD -->
                      <div class="match-info-header">SPREAD</div>
                      <div class="match-info-content">
                        <div class="team-side {% if block.settings.spread_team == 'team1' %}selected{% endif %}">
                          {% if block.settings.team1_logo %}
                            <img src="{{ block.settings.team1_logo | image_url: width: 200 }}" alt="{{ block.settings.team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team1_name | default: 'ST. LOUIS' }}</div>
                          {% if block.settings.spread_team == 'team1' %}
                            <div class="team-bet-type">{{ block.settings.spread_value | default: '-3.5' }}</div>
                          {% endif %}
                        </div>

                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                        </div>

                        <div class="team-side {% if block.settings.spread_team == 'team2' %}selected{% endif %}">
                          {% if block.settings.team2_logo %}
                            <img src="{{ block.settings.team2_logo | image_url: width: 200 }}" alt="{{ block.settings.team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team2_name | default: 'PITTSBURGH' }}</div>
                          {% if block.settings.spread_team == 'team2' %}
                            <div class="team-bet-type">{{ block.settings.spread_value | default: '-3.5' }}</div>
                          {% endif %}
                        </div>
                      </div>
                    
                     {% elsif bet_type == 'over_under' %}
                      <!-- OVER/UNDER -->
                      {% assign custom_text = block.settings.over_under_text_custom | default: '' %}
                      {% if custom_text != blank %}
                        <div class="match-info-header">{{ custom_text | upcase }}</div>
                      {% else %}
                        <div class="match-info-header">{{ block.settings.over_under_type | default: 'OVER' | upcase }}</div>
                      {% endif %}
                      <div class="match-info-content">
                        <div class="team-side">
                          {% if block.settings.team1_logo %}
                            <img src="{{ block.settings.team1_logo | image_url: width: 200 }}" alt="{{ block.settings.team1_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team1_name | default: 'ST. LOUIS' }}</div>
                        </div>

                        <div class="match-center">
                          <div class="match-time-new">{{ block.settings.match_time | default: '7:00 PM' }}</div>
                          <div class="match-vs-new">VS</div>
                          <div class="over-under-display">
                            {% if custom_text != blank %}
                              <div class="over-under-type">{{ custom_text | upcase }}</div>
                            {% else %}
                              <div class="over-under-type">{{ block.settings.over_under_type | default: 'OVER' | upcase }}</div>
                            {% endif %}
                            <div class="over-under-value">{{ block.settings.over_under_value | default: '225.5' }}</div>
                            {% if block.settings.over_under_stat_type != blank %}
                              <div class="over-under-stat">{{ block.settings.over_under_stat_type }}</div>
                            {% endif %}
                          </div>
                        </div>

                        <div class="team-side">
                          {% if block.settings.team2_logo %}
                            <img src="{{ block.settings.team2_logo | image_url: width: 200 }}" alt="{{ block.settings.team2_name }}" class="team-logo">
                          {% endif %}
                          <div class="team-name-new">{{ block.settings.team2_name | default: 'PITTSBURGH' }}</div>
                        </div>
                      </div>
                    {% endif %}
                  </div>

                  <button class="units-button">{{ block.settings.bet_units | default: '1' }} UNITS</button>

                  <div class="gain-section">
                    <div class="bet-modify-horizontal">
                      <div class="bet-info">
                        <span>VOTRE MISE - <span class="bet-amount-value-small">$100</span></span>
                      </div>
                      <button class="modify-btn" onclick="openBetDialog(this)" data-multiplier="{{ block.settings.multiplier | default: '1.95' }}">MODIFIER</button>
                    </div>
                    <div class="cashout-full-width">
                      <div class="cashout-label">CASHOUT</div>
                      <div class="cashout-amount">${{ 100 | times: block.settings.multiplier | default: 1.95 | round: 2 }}</div>
                      <div class="cashout-profit">+${{ 100 | times: block.settings.multiplier | default: 1.95 | minus: 100 | round: 2 }} b√©n√©fice</div>
                    </div>
                  </div>
                </div>
              </div>
              </div> <!-- card-wrapper -->
              {% endif %}
            {% endif %}
          {% endfor %}
          </div> <!-- cards-grid -->
        {% else %}
          <div class="card text-center empty-state-card" style="padding: 2rem;">
            <div class="ai-loading-text" style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin: 0;">
              <!-- SVG Lumi√®re -->
              <svg id="light-icon-no-bet" style="flex-shrink: 0; color: var(--shimmer-color-base); background: linear-gradient(90deg, var(--shimmer-color-base) 0%, var(--shimmer-color-highlight) 20%, var(--shimmer-color-highlight) 40%, var(--shimmer-color-base) 60%, var(--shimmer-color-base) 100%); background-size: 200% 100%; background-clip: text; -webkit-background-clip: text; animation: shimmer 6s ease-in-out infinite;" width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 18h6M10 22h4M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8c0-3.31-2.69-6-6-6S6 4.69 6 8c0 1.3.53 2.48 1.5 3.5.76.76 1.23 1.52 1.41 2.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <p style="margin: 0;">IA en cours du prochain bet</p>
            </div>
          </div>
        {% endif %}
        
        {% comment %} Message de restriction pour free trial - toujours affich√© {% endcomment %}
        {% if access_level == 'free_trial' %}
          <div class="card text-center" style="padding: 2.5rem; background: rgba(255, 255, 255, 0.03); border: 2px solid rgba(255, 255, 255, 0.1); {% if bet_cards.size == 0 %}max-width: 900px; margin-left: auto; margin-right: auto;{% endif %}">
            <div style="font-size: 2.5rem; margin-bottom: 1rem;">üîí</div>
            <h3 style="color: rgba(255, 255, 255, 0.95); font-size: 1.6rem; margin-bottom: 0.8rem; font-weight: 600;">D√©bloquer tous les bets</h3>
            <p style="color: rgba(255, 255, 255, 0.7); font-size: 1.05rem; margin-bottom: 1.5rem; line-height: 1.5;">
              Vous avez acc√®s √† un bet du jour pendant votre essai gratuit. Une fois l'essai termin√©, vous aurez acc√®s √† tous les bets du jour ainsi qu'aux parlays du jour.
            </p>
            <button onclick="navigateTo(event, 'skip-trial')" style="display: inline-block; background: rgba(255, 255, 255, 0.1); color: #ffffff; padding: 0.9rem 2rem; border-radius: 0.5rem; border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.2s; margin-bottom: 1.2rem; cursor: pointer; font-size: 1rem; font-weight: 600; font-family: 'Outfit', sans-serif;">
              Skipper l'essai gratuit
            </button>
            <p style="color: rgba(255, 255, 255, 0.5); font-size: 0.9rem; margin-top: 1.2rem;">
              Contactez <a href="mailto:support@winabet.ai" style="color: rgba(255, 255, 255, 0.7); text-decoration: underline;">support@winabet.ai</a> pour toute question
            </p>
          </div>
        {% endif %}
      </div>
    </div>

    <!-- PAGE 2: PARLAY DU JOUR -->
    {% render 'parlay-du-jour-page', access_level: access_level, section: section %}


    <!-- PAGE 3: HISTORIQUE BET DU JOUR -->
    {% render 'historique-bet-page' %}

    <!-- PAGE 4: HISTORIQUE PARLAY DU JOUR -->
    {% render 'historique-parlay-page' %}

    <style>
      /* Override snippets to show logos in history */
      #bet-history-container img,
      #parlay-history-container img {
        display: block !important;
      }
      
      /* Empty state card - max-width plus grand sur desktop */
      .empty-state-card {
        max-width: 900px;
        margin-left: auto;
        margin-right: auto;
      }
      
      /* Mobile: garder le comportement actuel */
      @media (max-width: 768px) {
        .empty-state-card {
          max-width: 100%;
        }
      }
    </style>

    <!-- PAGE 5: NOTRE STRAT√âGIE -->
    <div id="page-strategy" class="page">
      <div class="container" style="max-width: 1000px; margin: 0 auto;">
        <h1 style="font-size: 3.5rem; margin-bottom: 1rem;">Notre Strat√©gie</h1>
        <p class="subtitle" style="font-size: 1.3rem; margin-bottom: 3rem;">D√©couvrez notre approche gagnante</p>
        
        <div style="display: grid; gap: 2rem;">
          
          <!-- Carte Strat√©gie : Guide des paris sportifs -->
          <a href="#page-guide-paris" onclick="navigateTo(event, 'guide-paris')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Guide des paris sportifs</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">Comprends les bases du pari sportif ‚Äî cotes, types de mises, logique du march√© ‚Äî et d√©couvre comment Winabet.ai t'aide √† parier plus intelligemment, sans effort.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Strat√©gie : Strat√©gies de paris -->
          <a href="#page-strategies-paris" onclick="navigateTo(event, 'strategies-paris')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Strat√©gies de paris</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">D√©couvre comment penser comme un parieur intelligent. Winabet.ai t'explique les principes qui influencent tes chances de succ√®s ‚Äî lignes, timing, gestion de mise et analyse des matchs ‚Äî pendant que son IA fait tout le travail pour toi.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Strat√©gie : Point Spread -->
          <a href="#page-point-spread" onclick="navigateTo(event, 'point-spread')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Point Spread</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">D√©couvre comment fonctionnent les paris √† l'√©cart, l'un des types de mises les plus populaires dans le sport. Winabet.ai t'explique comment lire les spreads, les comprendre et les utiliser pour miser plus intelligemment.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Strat√©gie : Moneyline -->
          <a href="#page-moneyline" onclick="navigateTo(event, 'moneyline')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer; margin-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Moneyline (Vainqueur du match)</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">Le pari le plus simple : tu choisis l'√©quipe qui gagne. Winabet.ai t'explique comment lire les cotes + / ‚Äì et t'indique directement les meilleurs moneylines en NFL et NHL.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Strat√©gie : Over/Under -->
          <a href="#page-overunder" onclick="navigateTo(event, 'overunder')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer; margin-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Over/Under (Total de points)</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">Parie sur le rythme du match, pas sur le vainqueur. Winabet.ai t'explique comment fonctionnent les totaux de points et t'indique automatiquement quand miser sur le Over ou le Under selon ses analyses IA.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Strat√©gie : Prop Bets -->
          <a href="#page-propbets" onclick="navigateTo(event, 'propbets')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer; margin-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Prop Bets (Paris sp√©ciaux)</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">Parie sur les performances des joueurs, pas seulement sur le score. Winabet.ai t'explique les diff√©rents types de prop bets et t'indique ceux qui ont le plus de valeur selon les donn√©es r√©elles des matchs en NFL et NHL.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Strat√©gie : Parlay Bets -->
          <a href="#page-parlaybets" onclick="navigateTo(event, 'parlaybets')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer; margin-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 4v3m0 3v3m-7-9v3m0 3v3"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Parlay Bets (Paris combin√©s)</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">Apprends √† comprendre les paris combin√©s et pourquoi ils sont si populaires. Winabet.ai t'explique comment ils fonctionnent, leurs variantes (m√™me-match, teaser, round-robin) et surtout, pourquoi ils sont risqu√©s malgr√© leurs gains potentiels.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>

          <!-- Carte Strat√©gie : Lire les cotes -->
          <a href="#page-odds" onclick="navigateTo(event, 'odds')" style="text-decoration: none; display: block; background: rgba(113, 113, 122, 0.08); border: 3px solid #71717a; border-radius: 1rem; padding: 2rem 2.5rem; transition: all 0.3s; cursor: pointer; margin-top: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 2rem;">
              <div style="flex-shrink: 0; width: 80px; height: 80px; background: #71717a; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center;">
                <svg style="width: 48px; height: 48px; color: #ffffff; stroke: #ffffff;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                </svg>
              </div>
              <div style="flex: 1;">
                <h3 style="color: #ffffff; font-size: 1.8rem; font-weight: 300; margin-bottom: 0.5rem;">Lire les cotes (Odds)</h3>
                <p style="color: #ffffff; font-size: 1.1rem; margin: 0; opacity: 0.9;">Comprends rapidement les cotes am√©ricaines (+/‚Äì), fractionnelles et d√©cimales, la probabilit√© implicite et le juice. Winabet.ai traduit tout en pourcentages et te pointe directement les paris NFL et NHL avec valeur.</p>
              </div>
              <svg style="width: 32px; height: 32px; color: #71717a; flex-shrink: 0;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </div>
          </a>
          
        </div>
      </div>
    </div>

    <!-- PAGE 6: MON COMPTE -->
    <div id="page-account" class="page">
      <div class="container">
        <h1>Mon compte</h1>
        <p class="subtitle">G√©rez votre profil et vos pr√©f√©rences</p>
        
        <div class="card">
          <p class="text-center" style="color: rgba(255, 255, 255, 0.6);">
            Fonctionnalit√© √† venir. Vous pourrez bient√¥t g√©rer votre profil, vos pr√©f√©rences et vos param√®tres.
          </p>
        </div>
      </div>
    </div>

    <!-- PAGE 7: BOUTIQUE -->
    <div id="page-boutique" class="page">
      <div class="container">
        <h1>Boutique</h1>
        <p class="subtitle">D√©couvrez nos produits et services</p>
        
        <div class="card">
          <p class="text-center" style="color: rgba(255, 255, 255, 0.6);">
            Fonctionnalit√© √† venir. D√©couvrez bient√¥t nos offres exclusives et nos services premium.
          </p>
        </div>
      </div>
    </div>

    <!-- PAGE 8: SUPPORT -->
    <div id="page-support" class="page">
      <div class="container" style="max-width: 800px; margin: 0 auto;">
        <h1 style="font-size: 3.5rem; margin-bottom: 1rem;">Contactez-nous</h1>
        <p class="subtitle" style="font-size: 1.3rem; margin-bottom: 4rem;">Notre √©quipe est l√† pour vous aider</p>
        
        <!-- Contact rapide WhatsApp -->
        <div style="background: linear-gradient(135deg, rgba(113, 113, 122, 0.1) 0%, rgba(113, 113, 122, 0.05) 100%); padding: 3rem 2rem; border-radius: 1rem; margin-bottom: 3rem; text-align: center;">
          <div style="font-size: 4rem; margin-bottom: 1.5rem;">üì±</div>
          <h2 style="color: #71717a; font-size: 2rem; margin-bottom: 1rem; font-weight: 300;">Support sportif rapide</h2>
          <p style="color: #ffffff; font-size: 2.5rem; font-weight: 300; margin-bottom: 1rem; letter-spacing: 0.05em;">
            (+1) 438 223 4581
          </p>
          <p style="color: rgba(255, 255, 255, 0.8); font-size: 1.2rem; line-height: 1.8;">
            WhatsApp ou message texte uniquement<br>
            <span style="color: rgba(255, 255, 255, 0.6); font-size: 1rem;">(Ligne de message seulement, pas d'appel t√©l√©phonique)</span>
          </p>
        </div>
        
        <!-- Contact par email -->
        <div style="background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%); padding: 3rem 2rem; border-radius: 1rem; text-align: center;">
          <div style="font-size: 4rem; margin-bottom: 1.5rem;">‚úâÔ∏è</div>
          <h2 style="color: #71717a; font-size: 2rem; margin-bottom: 1rem; font-weight: 300;">Contact par email</h2>
          <a href="mailto:info@winabet.ai.com" style="color: #ffffff; font-size: 1.8rem; font-weight: 300; text-decoration: none; transition: color 0.3s;">
            info@winabet.ai.com
          </a>
          <p style="color: rgba(255, 255, 255, 0.6); font-size: 1rem; margin-top: 1rem;">
            Nous r√©pondons sous 24-48h
          </p>
        </div>
      </div>
    </div>

    <!-- PAGE 9: CONNEXION REQUISE -->
    <div id="page-auth-required" class="page">
      <div class="container" style="max-width: 800px; margin: 0 auto; text-align: center; padding-top: 8rem;">
        <div style="font-size: 8rem; margin-bottom: 2rem; opacity: 0.8;">üîí</div>
        <h1 style="font-size: 3.5rem; margin-bottom: 1.5rem; font-weight: 600; background: linear-gradient(135deg, #ffffff 0%, rgba(255, 255, 255, 0.7) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Acc√®s Restreint</h1>
        <p class="subtitle" style="font-size: 1.5rem; margin-bottom: 4rem; color: rgba(255, 255, 255, 0.7); max-width: 600px; margin-left: auto; margin-right: auto; line-height: 1.6;">
          Vous devez √™tre connect√© et avoir un plan actif pour acc√©der au Dashboard
        </p>
        
        <!-- Boutons d'action -->
        <div style="display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap; margin-top: 3rem;">
          <a href="https://account.winabet.ai" style="background: linear-gradient(135deg, #ffffff 0%, #e4e4e7 100%); color: #000000; padding: 1.5rem 3.5rem; border-radius: 0.75rem; text-decoration: none; font-size: 1.3rem; font-weight: 600; transition: all 0.3s; box-shadow: 0 4px 20px rgba(255, 255, 255, 0.2); font-family: 'Outfit', sans-serif; display: inline-block;">
            Se Connecter
          </a>
          <a href="https://winabet.ai/#rejoindre" style="background: linear-gradient(135deg, rgba(113, 113, 122, 0.3) 0%, rgba(113, 113, 122, 0.2) 100%); color: #ffffff; padding: 1.5rem 3.5rem; border-radius: 0.75rem; text-decoration: none; font-size: 1.3rem; font-weight: 600; border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.3s; font-family: 'Outfit', sans-serif; display: inline-block;">
            Commencer Gratuitement
          </a>
          <a href="https://winabet.ai" style="background: linear-gradient(135deg, rgba(113, 113, 122, 0.2) 0%, rgba(113, 113, 122, 0.1) 100%); color: rgba(255, 255, 255, 0.85); padding: 1.5rem 3.5rem; border-radius: 0.75rem; text-decoration: none; font-size: 1.3rem; font-weight: 600; border: 1px solid rgba(255, 255, 255, 0.15); transition: all 0.3s; font-family: 'Outfit', sans-serif; display: inline-block;">
            Retour √† l'Accueil
          </a>
        </div>
        
        <!-- Message additionnel -->
        <p style="margin-top: 4rem; color: rgba(255, 255, 255, 0.5); font-size: 1.1rem;">
          Besoin d'aide? <a href="mailto:info@winabet.ai.com" style="color: rgba(255, 255, 255, 0.8); text-decoration: underline;">Contactez-nous</a>
        </p>
      </div>
    </div>

    <!-- PAGE 10: PAIEMENT √âCHOU√â -->
    <div id="page-payment-failed" class="page">
      <div class="container" style="max-width: 800px; margin: 0 auto; text-align: center;">
        <div style="font-size: 5rem; margin-bottom: 1.5rem;">‚ö†Ô∏è</div>
        <h1 style="font-size: 3rem; margin-bottom: 1.2rem; font-weight: 600; color: rgba(255, 255, 255, 0.95);">Probl√®me de Paiement</h1>
        <p class="subtitle" style="font-size: 1.4rem; margin-bottom: 2rem; color: rgba(255, 255, 255, 0.75); line-height: 1.5;">
          Votre dernier paiement n'a pas pu √™tre trait√©.
        </p>
        
        <div style="background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(255, 255, 255, 0.15); border-radius: 1rem; padding: 2.5rem; margin-bottom: 2.5rem;">
          <h3 style="color: rgba(255, 255, 255, 0.9); font-size: 1.3rem; margin-bottom: 1rem; font-weight: 600;">üîÑ Mise √† Jour Requise</h3>
          <p style="color: rgba(255, 255, 255, 0.75); font-size: 1.1rem; line-height: 1.6; margin: 0;">
            Veuillez mettre √† jour vos informations de paiement afin que le paiement s'effectue et retrouvez l'acc√®s √† toutes les fonctionnalit√©s.
          </p>
        </div>
        
        <!-- Boutons d'action -->
        <div style="display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap; margin-bottom: 2rem;">
          <a href="https://account.winabet.ai" style="background: rgba(255, 255, 255, 0.1); color: #ffffff; padding: 1.1rem 2.5rem; border-radius: 0.5rem; text-decoration: none; font-size: 1.1rem; font-weight: 600; border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.2s;">
            Mettre √† Jour le Paiement
          </a>
          <a href="https://winabet.ai" style="background: rgba(255, 255, 255, 0.05); color: rgba(255, 255, 255, 0.85); padding: 1.1rem 2.5rem; border-radius: 0.5rem; text-decoration: none; font-size: 1.1rem; font-weight: 600; border: 1px solid rgba(255, 255, 255, 0.1); transition: all 0.2s;">
            Retour √† l'Accueil
          </a>
        </div>
        
        <p style="color: rgba(255, 255, 255, 0.5); font-size: 0.9rem;">
          Besoin d'assistance ? Contactez-nous au <a href="tel:4382234581" style="color: rgba(255, 255, 255, 0.8); text-decoration: underline;">438-223-4581</a> ou <a href="mailto:info@winabet.ai" style="color: rgba(255, 255, 255, 0.8); text-decoration: underline;">info@winabet.ai</a>
        </p>
      </div>
    </div>

    <!-- PAGE 11: ABONNEMENT REQUIS -->
    <div id="page-no-subscription" class="page">
      <div class="container" style="max-width: 800px; margin: 0 auto; text-align: center;">
        <div style="font-size: 5rem; margin-bottom: 1.5rem;">üîí</div>
        <h1 style="font-size: 3rem; margin-bottom: 1.2rem; font-weight: 600; color: rgba(255, 255, 255, 0.95);">Abonnement Requis</h1>
        <p class="subtitle" style="font-size: 1.4rem; margin-bottom: 2rem; color: rgba(255, 255, 255, 0.75); line-height: 1.5;">
          Vous devez souscrire √† un abonnement pour acc√©der au Dashboard WINABET.AI
        </p>
        
        <div style="background: rgba(255, 255, 255, 0.05); border: 2px solid rgba(255, 255, 255, 0.15); border-radius: 1rem; padding: 2.5rem; margin-bottom: 2.5rem;">
          <h3 style="color: rgba(255, 255, 255, 0.9); font-size: 1.3rem; margin-bottom: 1rem; font-weight: 600;">üöÄ D√©bloquer l'Acc√®s Complet</h3>
          <p style="color: rgba(255, 255, 255, 0.75); font-size: 1.1rem; line-height: 1.6; margin: 0;">
            Commencez votre essai gratuit ou souscrivez √† un abonnement pour acc√©der aux pr√©dictions de notre IA et maximiser vos gains.
          </p>
        </div>
        
        <!-- Boutons d'action -->
        <div style="display: flex; gap: 1.5rem; justify-content: center; flex-wrap: wrap; margin-bottom: 2rem;">
          <a href="https://winabet.ai/#rejoindre" style="background: linear-gradient(135deg, #ffffff 0%, #e4e4e7 100%); color: #000000; padding: 1.5rem 3.5rem; border-radius: 0.75rem; text-decoration: none; font-size: 1.3rem; font-weight: 600; transition: all 0.3s; box-shadow: 0 4px 20px rgba(255, 255, 255, 0.2); font-family: 'Outfit', sans-serif; display: inline-block;">
            Commencer l'Essai Gratuit
          </a>
          <a href="https://winabet.ai" style="background: rgba(255, 255, 255, 0.1); color: #ffffff; padding: 1.5rem 3.5rem; border-radius: 0.75rem; text-decoration: none; font-size: 1.3rem; font-weight: 600; border: 1px solid rgba(255, 255, 255, 0.2); transition: all 0.3s; font-family: 'Outfit', sans-serif; display: inline-block;">
            Retour √† l'Accueil
          </a>
        </div>
        
        <!-- Bo√Æte d'information pour nouveaux abonn√©s -->
        <div style="background: transparent; border: 2px solid rgba(113, 113, 122, 0.4); border-radius: 0.75rem; padding: 1.5rem; margin: 2rem auto; max-width: 600px; text-align: left;">
          <p style="color: rgba(255, 255, 255, 0.85); font-size: 1rem; line-height: 1.6; margin: 0;">
            üí° <strong>Vous venez de prendre un abonnement ?</strong><br>
            Assurez-vous d'√™tre encore connect√© et rafra√Æchissez la page. Normalement √ßa devrait √™tre bon.
          </p>
        </div>
        
        <p style="color: rgba(255, 255, 255, 0.5); font-size: 0.9rem;">
          Besoin d'assistance ? Contactez-nous au <a href="tel:4382234581" style="color: rgba(255, 255, 255, 0.8); text-decoration: underline;">438-223-4581</a> ou <a href="mailto:info@winabet.ai" style="color: rgba(255, 255, 255, 0.8); text-decoration: underline;">info@winabet.ai</a>
        </p>
      </div>
    </div>

    <!-- PAGE 12: SKIPPER L'ESSAI GRATUIT -->
    <div id="page-skip-trial" class="page">
      <div class="container" style="max-width: 900px; margin: 0 auto;">
        <!-- Bouton Retour -->
        <div style="margin-bottom: 2rem;">
          <button onclick="navigateTo(event, 'bet')" style="background: rgba(255, 255, 255, 0.1); color: #ffffff; padding: 0.75rem 1.5rem; border-radius: 0.5rem; border: 1px solid rgba(255, 255, 255, 0.2); font-size: 1rem; font-weight: 500; cursor: pointer; transition: all 0.2s; display: inline-flex; align-items: center; gap: 0.5rem; font-family: 'Outfit', sans-serif;">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            Retour
          </button>
        </div>

        <!-- Contenu Principal -->
        <div style="text-align: center; margin-bottom: 3rem;">
          <h1 style="font-size: 2.5rem; margin-bottom: 1rem; font-weight: 600; color: rgba(255, 255, 255, 0.95); line-height: 1.2;">Skipper l'essai gratuit, pour d√©bloquer l'acc√®s complet</h1>
          <p class="subtitle" style="font-size: 1.1rem; color: rgba(255, 255, 255, 0.65); line-height: 1.6; max-width: 700px; margin: 0 auto;">
            Passez √† un abonnement complet maintenant et acc√©dez imm√©diatement √† l'ensemble de nos pr√©dictions.
          </p>
        </div>
        
        <!-- Video Section - Format TikTok -->
        <div style="margin-bottom: 3rem; display: flex; justify-content: center;">
          <div style="border-radius: 12px; overflow: hidden; background: rgba(255,255,255,0.05); max-width: 400px; width: 100%;">
            <video 
              controls 
              style="width: 100%; height: auto; display: block; aspect-ratio: 9/16;"
              poster=""
            >
              <source src="https://cdn.shopify.com/videos/c/o/v/991ccd106dc949d8bd0386301dc04ff6.mov" type="video/mp4">
              Votre navigateur ne supporte pas la lecture de vid√©os.
            </video>
          </div>
        </div>
        
        <!-- Acc√®s D√©bloqu√© -->
        <div style="margin-bottom: 3rem;">
          <h2 style="font-size: 1.8rem; margin-bottom: 2rem; font-weight: 600; color: rgba(255, 255, 255, 0.95); text-align: center;">Acc√®s Complet D√©bloqu√©</h2>
          
          <div style="display: flex; flex-direction: column; gap: 1.5rem; max-width: 700px; margin: 0 auto;">
            <!-- Item 1 -->
            <div style="background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 0.5rem; padding: 1.5rem; border-left: 3px solid rgba(255, 255, 255, 0.4); transition: all 0.2s;">
              <h3 style="color: rgba(255, 255, 255, 0.95); font-size: 1.2rem; margin-bottom: 0.5rem; font-weight: 600;">Tous les Bets du Jour</h3>
              <p style="color: rgba(255, 255, 255, 0.65); font-size: 1rem; line-height: 1.5; margin: 0;">
                Acc√©dez √† l'int√©gralit√© de nos pr√©dictions quotidiennes avec analyses IA d√©taill√©es et cotes optimis√©es.
              </p>
            </div>
            
            <!-- Item 2 -->
            <div style="background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 0.5rem; padding: 1.5rem; border-left: 3px solid rgba(255, 255, 255, 0.4); transition: all 0.2s;">
              <h3 style="color: rgba(255, 255, 255, 0.95); font-size: 1.2rem; margin-bottom: 0.5rem; font-weight: 600;">Tous les Parlays du Jour</h3>
              <p style="color: rgba(255, 255, 255, 0.65); font-size: 1rem; line-height: 1.5; margin: 0;">
                D√©bloquez les combinaisons √† fort potentiel avec des cotes √©lev√©es et des strat√©gies avanc√©es.
              </p>
            </div>
          </div>
        </div>
        
        <!-- Bouton d'action principal -->
        <div style="text-align: center; margin-bottom: 3rem;">
          <a href="https://account.winabet.ai/pages/5176fb69-acd0-47d9-a29c-3ad5668cf59d" style="background: linear-gradient(135deg, #ffffff 0%, #e4e4e7 100%); color: #000000; padding: 1.4rem 3rem; border-radius: 0.75rem; text-decoration: none; font-size: 1.3rem; font-weight: 600; transition: all 0.3s; box-shadow: 0 4px 20px rgba(255, 255, 255, 0.2); font-family: 'Outfit', sans-serif; display: inline-block;">
            Passer √† l'Abonnement Complet
          </a>
        </div>
        
        <!-- Information compl√©mentaire -->
        <div style="background: transparent; border: 2px solid rgba(113, 113, 122, 0.3); border-radius: 0.75rem; padding: 1.5rem; margin: 2rem auto; max-width: 650px; text-align: center;">
          <p style="color: rgba(255, 255, 255, 0.75); font-size: 1rem; line-height: 1.6; margin: 0;">
            <strong style="color: rgba(255, 255, 255, 0.9);">Besoin d'aide ?</strong><br>
            Notre √©quipe est disponible pour vous accompagner dans votre choix d'abonnement.
          </p>
        </div>
        
        <p style="color: rgba(255, 255, 255, 0.5); font-size: 0.9rem; text-align: center;">
          Contactez-nous : <a href="tel:4382234581" style="color: rgba(255, 255, 255, 0.7); text-decoration: underline;">438-223-4581</a> ou <a href="mailto:info@winabet.ai" style="color: rgba(255, 255, 255, 0.7); text-decoration: underline;">info@winabet.ai</a>
        </p>
      </div>
    </div>

    {% render 'strategy-detail-pages' %}
  </main>

  <!-- AI Loading Overlay -->
  <div id="ai-loading-overlay" class="ai-loading-overlay">
    <svg class="ai-loading-spinner" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <filter id="softGlowLoading" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="1.2" result="b"/>
          <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
        </filter>
        <path id="orbit0Loading" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" pathLength="1000"/>
        <path id="orbit1Loading" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(55 100 100)" pathLength="1000"/>
        <path id="orbit2Loading" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(-55 100 100)" pathLength="1000"/>
      </defs>
      <g stroke="rgba(255, 255, 255, 0.35)" stroke-width="2" fill="none">
        <use href="#orbit0Loading"/>
        <use href="#orbit1Loading"/>
        <use href="#orbit2Loading"/>
      </g>
      <g stroke-linecap="round" filter="url(#softGlowLoading)">
        <use href="#orbit0Loading" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
          <animate attributeName="stroke-dashoffset" values="0;-1000" dur="6s" repeatCount="indefinite" begin="0s"/>
        </use>
        <use href="#orbit1Loading" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
          <animate attributeName="stroke-dashoffset" values="500;-500" dur="6s" repeatCount="indefinite" begin="0s"/>
        </use>
        <use href="#orbit2Loading" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
          <animate attributeName="stroke-dashoffset" values="750;-250" dur="6s" repeatCount="indefinite" begin="0s"/>
        </use>
      </g>
      <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#ffffff" font-weight="700" font-size="54">IA</text>
    </svg>
    <div class="ai-loading-logo" style="font-family: 'Outfit', sans-serif; font-weight: 300;">
      <span style="color: #ffffff;">wina</span><span style="color: rgba(255, 255, 255, 0.35);">bet</span><span style="color: #ffffff; font-size: 1.4rem; margin-left: -0.15em;">.ai</span>
    </div>
    <p class="ai-loading-message">Chargement de notre IA</p>
  </div>

  <!-- Dialog: Modifier la mise -->
  <div id="bet-dialog" class="dialog-overlay">
    <div class="dialog">
      <div class="dialog-header">
        <h2 class="dialog-title">Modifier votre mise</h2>
        <button class="dialog-close" onclick="closeBetDialog()" aria-label="Fermer">
          <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="dialog-content">
        <div class="bet-buttons">
          <button class="bet-button" onclick="setBetAmount(10)">$10</button>
          <button class="bet-button" onclick="setBetAmount(20)">$20</button>
          <button class="bet-button" onclick="setBetAmount(50)">$50</button>
          <button class="bet-button" onclick="setBetAmount(100)">$100</button>
          <button class="bet-button" onclick="setBetAmount(150)">$150</button>
          <button class="bet-button" onclick="setBetAmount(200)">$200</button>
          <button class="bet-button" onclick="setBetAmount(500)">$500</button>
          <button class="bet-button" onclick="customBetAmount()">Autre</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Dialog: Analyse IA Compl√®te -->
  <div id="analysis-dialog" class="dialog-overlay">
    <div class="dialog dialog-large">
      <div class="analysis-header">
        <button class="dialog-close" onclick="closeAnalysisDialog()" aria-label="Fermer" style="position: absolute; top: 1rem; right: 1rem;">
          <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>

        <div style="display: flex; align-items: center; justify-content: center; gap: 0.75rem; margin-bottom: 0.75rem;">
          <div class="ai-spinner" style="width: 2.4rem; height: 2.4rem;">
            <svg width="30" height="30" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <filter id="softGlowDialog" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="1.2" result="b"/>
                  <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
                <path id="orbit0Dialog" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" pathLength="1000"/>
                <path id="orbit1Dialog" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(55 100 100)" pathLength="1000"/>
                <path id="orbit2Dialog" d="M100 64a86 36 0 1 1 0 72a86 36 0 1 1 0-72" transform="rotate(-55 100 100)" pathLength="1000"/>
              </defs>
              <g stroke="#68859e" stroke-width="2" fill="none">
                <use href="#orbit0Dialog"/><use href="#orbit1Dialog"/><use href="#orbit2Dialog"/>
              </g>
              <g stroke-linecap="round" filter="url(#softGlowDialog)">
                <use href="#orbit0Dialog" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                  <animate attributeName="stroke-dashoffset" values="0;-1000" dur="6s" repeatCount="indefinite" begin="0s"/>
                </use>
                <use href="#orbit1Dialog" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                  <animate attributeName="stroke-dashoffset" values="500;-500" dur="6s" repeatCount="indefinite" begin="0s"/>
                </use>
                <use href="#orbit2Dialog" stroke="#ffffff" stroke-width="2" fill="none" stroke-dasharray="120 880" stroke-linecap="butt" vector-effect="non-scaling-stroke" stroke-opacity="0.95">
                  <animate attributeName="stroke-dashoffset" values="750;-250" dur="6s" repeatCount="indefinite" begin="0s"/>
                </use>
              </g>
              <text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#ffffff" font-weight="700" font-size="54">IA</text>
            </svg>
          </div>
          <span style="color: #ffffff; font-weight: 300; font-size: 1.125rem; letter-spacing: 0.03em;">
            ANALYSE IA D√âTAILL√âE
          </span>
        </div>

        <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: 1rem;">
          <div style="width: 10px; height: 10px; background: rgba(255, 255, 255, 0.6); border-radius: 50%;"></div>
          <span style="color: rgba(255, 255, 255, 0.9); font-size: 1rem; font-weight: 300;">Derni√®re mise √† jour IA pour ce bet : <span id="analysis-time">19:42</span></span>
        </div>
      </div>

      <div class="dialog-content">
        <div id="loading-section" class="loading-container">
          <div class="loading-dots">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
          </div>
          <p style="color: rgba(255, 255, 255, 0.6);">Analyse en cours...</p>
        </div>

        <div id="analysis-content" style="display: none;">
          <!-- Chance de gagner -->
          <div class="confidence-section">
            <div class="confidence-label">CHANCE DE GAGNER</div>
            <div class="confidence-value"><span id="dialog-win-percentage">92</span>%</div>
            <div class="confidence-progress">
              <div id="dialog-progress-bar" class="confidence-progress-bar" style="width: 0%"></div>
            </div>
          </div>

          <!-- ========== TEMPLATE NHL ========== -->
          <div id="template-nhl">
          <h3 class="analysis-section-title">Analyse du march√© & meilleures cotes</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî March√© & pricing (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a analys√© la probabilit√© implicite du march√© pour √âquipe domicile en convertissant les cotes en pourcentages r√©els afin d'√©valuer la valeur per√ßue.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî March√© & pricing (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a observ√© le mouvement de ligne (line movement) afin de d√©terminer si la valeur a √©volu√© en faveur ou en d√©faveur de √âquipe domicile.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî March√© & pricing (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a identifi√© la pr√©sence d'un potentiel closing line value (CLV) et a mesur√© l'impact du sharp money par rapport au public money.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî March√© & pricing (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a calcul√© la probabilit√© implicite du march√© pour √âquipe ext√©rieur en convertissant les cotes en pourcentages r√©els afin d'√©valuer la perception de valeur.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî March√© & pricing (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a analys√© les variations de ligne concernant √âquipe ext√©rieur afin de savoir si le mouvement des mises soutenait ou affaiblissait la valeur de cette √©quipe.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî March√© & pricing (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a mesur√© la valeur potentielle du closing line value et a identifi√© la proportion du sharp money influen√ßant les cotes c√¥t√© ext√©rieur.
              </div>
            </div>
          </div>

          <!-- Historique des confrontations (H2H) -->
          <h3 class="analysis-section-title">Historique des confrontations (H2H)</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Historique des confrontations (H2H)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a analys√© les pr√©c√©dents affrontements entre les deux √©quipes pour rep√©rer les tendances r√©currentes, les styles dominants et les sch√©mas statistiques fr√©quents lors de leurs duels.
              </div>
            </div>
          </div>

          <!-- Lineup / alignement projet√© du jour -->
          <h3 class="analysis-section-title">Lineup / alignement projet√© du jour</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Lineup / Alignement projet√© du jour</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a examin√© les alignements projet√©s des deux √©quipes, incluant les trios offensifs, les paires d√©fensives, la pr√©sence des gardiens et les absences cl√©s susceptibles d'influencer le rythme du match.
              </div>
            </div>
          </div>

          <!-- Analyse du jeu de puissance & discipline -->
          <h3 class="analysis-section-title">Analyse du jeu de puissance & discipline</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Power Play (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a √©valu√© l'efficacit√© du power play de √âquipe domicile √† travers la structure tactique, la qualit√© des entr√©es de zone, les chances cr√©√©es (HDCF) et la r√©ussite globale en avantage num√©rique (xGoals/PP).
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Power Play (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a mesur√© la performance du power play de √âquipe ext√©rieur en observant la circulation du disque, la cr√©ation de tirs dangereux et la coh√©sion tactique de l'unit√© sp√©ciale.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Discipline & P√©nalit√©s (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a analys√© la discipline de √âquipe domicile selon la fr√©quence des p√©nalit√©s conc√©d√©es, le temps pass√© en inf√©riorit√© et l'impact sur le momentum d√©fensif.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Discipline & P√©nalit√©s (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a √©tudi√© la discipline de √âquipe ext√©rieur en mesurant le volume et le moment des p√©nalit√©s conc√©d√©es ainsi que leur influence sur la performance du penalty kill.
              </div>
            </div>
          </div>

          <!-- Analyse du gardien & structure d√©fensive -->
          <h3 class="analysis-section-title">Analyse du gardien & structure d√©fensive</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Performance du gardien (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a √©valu√© le gardien projet√© de √âquipe domicile selon son efficacit√© face aux tirs √† haut danger, sa technique et ses indicateurs avanc√©s comme le GSAA.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Performance du gardien (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a analys√© le rendement du gardien pr√©vu pour √âquipe ext√©rieur en fonction de sa constance sous pression, de la qualit√© de ses arr√™ts et de ses statistiques ajust√©es.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Structure d√©fensive (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a observ√© la structure d√©fensive de √âquipe domicile en √©valuant la couverture du slot, la gestion des rebonds et la rapidit√© de transition vers l'attaque.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Structure d√©fensive (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a mesur√© la solidit√© d√©fensive de √âquipe ext√©rieur en observant la coh√©sion des paires, la protection du slot et la gestion des secondes chances adverses.
              </div>
            </div>
          </div>

          <!-- Analyse de la possession & qualit√© offensive -->
          <h3 class="analysis-section-title">Analyse de la possession & qualit√© offensive</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Expected Goals (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a √©valu√© la production offensive de √âquipe domicile √† travers les expected goals, la qualit√© des tirs g√©n√©r√©s et la probabilit√© de conversion de leurs occasions.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Expected Goals (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a mesur√© les expected goals de √âquipe ext√©rieur afin d'estimer la fr√©quence et la dangerosit√© de leurs opportunit√©s de tir.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Possession (Corsi/Fenwick) (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a analys√© la possession de √âquipe domicile selon les indicateurs Corsi et Fenwick, afin de d√©terminer la domination territoriale et la capacit√© √† maintenir la zone offensive.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Possession (Corsi/Fenwick) (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a √©valu√© le contr√¥le du palet de √âquipe ext√©rieur √† partir des m√™mes m√©triques, en observant leur aptitude √† dicter le rythme et √† conserver la pression offensive.
              </div>
            </div>
          </div>

          <!-- Analyse de l'alignement & profondeur -->
          <h3 class="analysis-section-title">Analyse de l'alignement & profondeur</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Profondeur offensive (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a analys√© la profondeur offensive de √âquipe domicile en mesurant la contribution du top-6, l'apport du bottom-6 et la flexibilit√© tactique des trios.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Profondeur offensive (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a √©valu√© la profondeur de √âquipe ext√©rieur en consid√©rant la r√©gularit√© du top-6 et la productivit√© du bas de l'alignement.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Stabilit√© d√©fensive (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a observ√© la stabilit√© d√©fensive de √âquipe domicile en examinant la solidit√© du top-4, la mobilit√© en relance et la gestion des transitions rapides.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Stabilit√© d√©fensive (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a mesur√© la stabilit√© d√©fensive de √âquipe ext√©rieur selon la coh√©sion de ses d√©fenseurs, leur relance et leur contr√¥le des espaces dangereux.
              </div>
            </div>
          </div>

          <!-- Analyse du contexte & fatigue -->
          <h3 class="analysis-section-title">Analyse du contexte & fatigue</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Cadence & calendrier (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                Analyse du contexte physique de √âquipe domicile, incluant l'encha√Ænement des matchs, le repos disponible, la pr√©sence √©ventuelle d'un back-to-back et la charge de d√©placement.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Cadence & calendrier (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                Analyse du contexte physique de √âquipe ext√©rieur, incluant l'encha√Ænement des matchs, le repos disponible, la pr√©sence √©ventuelle d'un back-to-back et la charge de d√©placement.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Avantage domicile / ext√©rieur (√âquipe domicile)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a mesur√© l'impact du facteur domicile pour √âquipe domicile, en tenant compte du dernier changement de ligne et des performances √† domicile.
              </div>
            </div>

            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Avantage domicile / ext√©rieur (√âquipe ext√©rieur)</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a observ√© la performance de √âquipe ext√©rieur √† l'ext√©rieur, notamment la constance de leurs entames de match et leur gestion tactique sans le dernier changement.
              </div>
            </div>
          </div>

          <!-- Autres analyses compl√©mentaires -->
          <h3 class="analysis-section-title">Autres analyses compl√©mentaires</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse ‚Äî Facteurs additionnels</div>
              <div class="analysis-subsection-content">
                ‚Ä¢ Notre IA a pris en compte plusieurs √©l√©ments secondaires comme la confiance du groupe, la dynamique mentale, la qualit√© du coaching staff, le style de match attendu (haut ou bas √©v√©nement) et la capacit√© d'adaptation tactique entre les p√©riodes.
              </div>
            </div>
          </div>
          <!-- ========== FIN TEMPLATE NHL ========== -->
          </div>

          <!-- ========== TEMPLATE NFL ========== -->
          <div id="template-nfl" style="display:none;">
          
          <!-- Analyse du march√© & meilleures cotes -->
          <h3 class="analysis-section-title">Analyse du march√© & meilleures cotes</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Probabilit√© implicite - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a analys√© la probabilit√© implicite du march√© pour √âquipe domicile en convertissant les cotes en pourcentages r√©els afin d'√©valuer la valeur per√ßue.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Comparaison bookmakers - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Comparaison inter-bookmakers pour identifier la meilleure cote disponible ("best price") et mesurer l'efficience du march√©.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Mouvement de ligne - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a observ√© le mouvement de ligne (line movement) afin de d√©terminer si la valeur a √©volu√© en faveur ou en d√©faveur de √âquipe domicile.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Closing line value - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a identifi√© la pr√©sence d'un potentiel closing line value (CLV) et a mesur√© l'impact du sharp money par rapport au public money.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Probabilit√© implicite - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Notre IA a calcul√© la probabilit√© implicite du march√© pour √âquipe ext√©rieur en convertissant les cotes en pourcentages r√©els afin d'√©valuer la perception de valeur.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Comparaison bookmakers - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Comparaison inter-bookmakers pour identifier la meilleure cote disponible ("best price") et mesurer l'efficience du march√©.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Mouvement de ligne - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Notre IA a analys√© les variations de ligne concernant √âquipe ext√©rieur afin de savoir si le mouvement des mises soutenait ou affaiblissait la valeur de cette √©quipe.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Closing line value - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Notre IA a mesur√© la valeur potentielle du closing line value et a identifi√© la proportion du sharp money influen√ßant les cotes c√¥t√© √âquipe ext√©rieur.
              </div>
            </div>
          </div>

          <!-- Historique des confrontations -->
          <h3 class="analysis-section-title">Historique des confrontations (H2H)</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Analyse H2H</div>
              <div class="analysis-subsection-content">
                Notre IA a analys√© les pr√©c√©dents affrontements entre les deux √©quipes pour rep√©rer les tendances r√©currentes, les styles dominants et les sch√©mas statistiques fr√©quents lors de leurs duels.
              </div>
            </div>
          </div>

          <!-- Alignement offensif & d√©fensif -->
          <h3 class="analysis-section-title">Alignement offensif & d√©fensif projet√©</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Starters offensifs - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a examin√© les alignements offensifs projet√©s de √âquipe domicile, incluant le quart-arri√®re, les receveurs, le porteur de ballon et la ligne offensive, susceptibles d'influencer le rythme du match.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Starters d√©fensifs - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a analys√© les alignements d√©fensifs projet√©s de √âquipe domicile, incluant le front-seven, les sch√©mas de couverture et les absences cl√©s.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Starters offensifs - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Notre IA a examin√© les alignements offensifs projet√©s de √âquipe ext√©rieur, en lien avec la production attendue et les matchups d√©fensifs.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Starters d√©fensifs - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Notre IA a analys√© les alignements d√©fensifs projet√©s de √âquipe ext√©rieur, incluant le front-seven, les sch√©mas de couverture et les absences cl√©s.
              </div>
            </div>
          </div>

          <!-- Quarterback & efficacit√© a√©rienne -->
          <h3 class="analysis-section-title">Quarterback & efficacit√© a√©rienne</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">QB - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a √©valu√© la performance du quart-arri√®re de √âquipe domicile en fonction de sa pr√©cision sous pression, son taux de compl√©tion ajust√© et sa capacit√© √† √©viter les revirements.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">QB - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Notre IA a mesur√© la performance du quart-arri√®re de √âquipe ext√©rieur en analysant les m√™mes indicateurs, en consid√©rant sa mobilit√© et son exp√©rience.
              </div>
            </div>
          </div>

          <!-- Jeu au sol & contr√¥le du tempo -->
          <h3 class="analysis-section-title">Jeu au sol & contr√¥le du tempo</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Jeu au sol - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a √©valu√© l'efficacit√© du jeu au sol de √âquipe domicile en analysant les yards apr√®s contact, le success rate et la capacit√© √† imposer un rythme physique.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Jeu au sol - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Notre IA a mesur√© la performance au sol de √âquipe ext√©rieur selon les m√™mes indicateurs, en tenant compte de la force d√©fensive adverse.
              </div>
            </div>
          </div>

          <!-- D√©fense contre la passe & contre la course -->
          <h3 class="analysis-section-title">D√©fense contre la passe & contre la course</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">D√©fense vs passe - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a analys√© la pression d√©fensive g√©n√©r√©e par √âquipe domicile selon le blitz rate, le taux de sacks et la capacit√© √† perturber le timing adverse.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">D√©fense vs course - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a observ√© la d√©fense contre la course de √âquipe domicile en analysant les yards permis avant contact, le taux de stuffs et la capacit√© √† contenir les porteurs adverses.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">D√©fense vs passe - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Notre IA a observ√© la pression d√©fensive de √âquipe ext√©rieur en mesurant la m√™me agressivit√©, la qualit√© du pass-rush et l'efficacit√© des sch√©mas de blitz.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">D√©fense vs course - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Notre IA a analys√© la d√©fense contre la course de √âquipe ext√©rieur en mesurant la solidit√© d√©fensive, la discipline des gaps et l'efficacit√© face aux diff√©rents sch√©mas.
              </div>
            </div>
          </div>

          <!-- 3rd down / red zone / discipline -->
          <h3 class="analysis-section-title">3rd down / red zone / discipline</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">3rd down & red zone - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a √©valu√© l'efficacit√© de √âquipe domicile sur les 3rd downs et en red zone, incluant le playcalling et la capacit√© √† convertir en situations critiques.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Discipline - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a analys√© la discipline de √âquipe domicile selon la fr√©quence des p√©nalit√©s conc√©d√©es, le temps perdu et l'impact sur le momentum offensif.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">3rd down & red zone - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Notre IA a √©valu√© l'efficacit√© de √âquipe ext√©rieur sur les 3rd downs et en red zone, incluant le playcalling et la capacit√© √† convertir en situations critiques.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Discipline - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Notre IA a √©tudi√© la discipline de √âquipe ext√©rieur en mesurant le volume et le moment des p√©nalit√©s conc√©d√©es ainsi que leur influence sur la performance globale.
              </div>
            </div>
          </div>

          <!-- Sp√©cial teams & kicker -->
          <h3 class="analysis-section-title">Sp√©cial teams & kicker</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Unit√©s sp√©ciales - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a analys√© les unit√©s sp√©ciales de √âquipe domicile, incluant le punt coverage, kick return, la performance du kicker et le taux de r√©ussite des field goals.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Unit√©s sp√©ciales - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Notre IA a analys√© les unit√©s sp√©ciales de √âquipe ext√©rieur, incluant le punt coverage, kick return, la performance du kicker et le taux de r√©ussite des field goals.
              </div>
            </div>
          </div>

          <!-- Coaching, strat√©gie & adaptabilit√© -->
          <h3 class="analysis-section-title">Coaching, strat√©gie & adaptabilit√©</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Coaching - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a analys√© le profil du coaching staff de √âquipe domicile, incluant l'agressivit√© en 4th down, la prise de d√©cision analytique et la gestion de l'horloge.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Coaching - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Notre IA a analys√© le profil du coaching staff de √âquipe ext√©rieur, incluant l'agressivit√© en 4th down, la prise de d√©cision analytique et la gestion de l'horloge.
              </div>
            </div>
          </div>

          <!-- Contexte physique & calendrier -->
          <h3 class="analysis-section-title">Contexte physique & calendrier</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Contexte physique - √âquipe domicile</div>
              <div class="analysis-subsection-content">
                Notre IA a analys√© la charge de matchs de √âquipe domicile, le niveau de repos et l'effet potentiel d'un calendrier condens√© ou d'un d√©placement prolong√©.
              </div>
            </div>
          </div>

          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Contexte physique - √âquipe ext√©rieur</div>
              <div class="analysis-subsection-content">
                Notre IA a √©valu√© la cadence r√©cente de √âquipe ext√©rieur, les jours de repos et la fatigue accumul√©e par les voyages r√©cents.
              </div>
            </div>
          </div>

          <!-- Autres facteurs contextuels -->
          <h3 class="analysis-section-title">Autres facteurs contextuels</h3>
          <div class="analysis-section">
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Conditions m√©t√©o</div>
              <div class="analysis-subsection-content">
                Notre IA a analys√© les conditions m√©t√©orologiques et leur impact potentiel sur le playcalling offensif, la performance des kickers et la strat√©gie de jeu.
              </div>
            </div>
            <div class="analysis-subsection">
              <div class="analysis-subsection-icon">
                <svg><use href="#atomicIcon"/></svg>
              </div>
              <div class="analysis-subsection-title">Facteurs psychologiques</div>
              <div class="analysis-subsection-content">
                Notre IA a pris en compte plusieurs √©l√©ments secondaires comme la confiance du groupe, la dynamique mentale, la qualit√© du coaching staff, le style de match attendu et la capacit√© d'adaptation tactique entre les quarts.
              </div>
            </div>
          </div>

          </div>
          <!-- ========== FIN TEMPLATE NFL ========== -->
        </div>
      </div>
    </div>
  </div>

  <script>
    // State
    let currentBetAmount = 100;
    let currentMultiplier = 1.74;
    let currentCard = null;
    let currentPage = 'bet';
    let isMobileSidebarOpen = false;

    // ===========================
    // AUTO-RESIZE OVER/UNDER TEXT
    // ===========================
    function autoResizeOverUnderText() {
      // S√©lectionner toutes les cartes qui ont un over/under
      document.querySelectorAll('.match-info-content').forEach(container => {
        const overUnderDisplay = container.querySelector('.over-under-display');
        if (!overUnderDisplay) return;
        
        const teamSides = container.querySelectorAll('.team-side');
        const matchCenter = container.querySelector('.match-center');
        if (!matchCenter || teamSides.length !== 2) return;
        
        const elements = overUnderDisplay.querySelectorAll('.over-under-type, .over-under-value, .over-under-stat');
        
        // Fonction pour calculer si le contenu d√©borde
        const checkOverflow = () => {
          const containerWidth = container.offsetWidth;
          const gap = 16; // 1rem = 16px (le gap CSS entre les √©l√©ments)
          
          // Calculer la largeur totale n√©cessaire
          const team1Width = teamSides[0].offsetWidth;
          const team2Width = teamSides[1].offsetWidth;
          const centerWidth = matchCenter.offsetWidth;
          const totalNeeded = team1Width + centerWidth + team2Width + (gap * 2);
          
          return totalNeeded > containerWidth;
        };
        
        // Permettre l'empilement vertical du texte
        elements.forEach(element => {
          // Activer le word wrap pour empiler le texte verticalement
          element.style.wordBreak = 'break-word';
          element.style.overflowWrap = 'break-word';
          element.style.hyphens = 'none';
          element.style.whiteSpace = 'normal';
          element.style.textAlign = 'center';
          element.style.lineHeight = '1.2';
          
          // Partir de la taille calcul√©e actuelle
          const computed = getComputedStyle(element);
          let fontSize = parseFloat(computed.fontSize) || 12;
          let attempts = 0;
          
          // Forcer un recalcul initial
          container.offsetHeight;
          
          // R√©duire seulement un peu si n√©cessaire (on privil√©gie l'empilement)
          while (checkOverflow() && fontSize > 10 && attempts < 20) {
            fontSize -= 0.5;
            element.style.fontSize = fontSize + 'px';
            // Forcer le navigateur √† recalculer le layout
            container.offsetHeight;
            attempts++;
          }
        });
      });
    }

    // ===========================
    // AUTO-SHRINK TEAM LOGOS
    // ===========================
    function autoShrinkTeamLogos() {
      // S√©lectionner toutes les cartes avec des logos d'√©quipe
      document.querySelectorAll('.match-info-content').forEach(container => {
        const teamSides = container.querySelectorAll('.team-side');
        const matchCenter = container.querySelector('.match-center');
        if (!matchCenter || teamSides.length !== 2) return;
        
        // Fonction pour calculer si le contenu d√©borde
        const checkOverflow = () => {
          const containerWidth = container.offsetWidth;
          const gap = 16; // 1rem = 16px
          
          const team1Width = teamSides[0].offsetWidth;
          const team2Width = teamSides[1].offsetWidth;
          const centerWidth = matchCenter.offsetWidth;
          const totalNeeded = team1Width + centerWidth + team2Width + (gap * 2);
          
          return totalNeeded > containerWidth;
        };
        
        // Trouver tous les logos
        const logos = container.querySelectorAll('.team-logo');
        if (logos.length === 0) return;
        
        // Obtenir la taille initiale des logos
        let logoSize = parseFloat(getComputedStyle(logos[0]).width) || 80;
        let attempts = 0;
        
        // Forcer un recalcul initial
        container.offsetHeight;
        
        // R√©duire la taille des logos tant que √ßa d√©borde
        while (checkOverflow() && logoSize > 40 && attempts < 50) {
          logoSize -= 2;
          logos.forEach(logo => {
            logo.style.width = logoSize + 'px';
            logo.style.height = logoSize + 'px';
          });
          // Forcer le navigateur √† recalculer le layout
          container.offsetHeight;
          attempts++;
        }
      });
    }

    // Observer pour d√©tecter les changements de contenu
    function observeOverUnderChanges() {
      const observer = new MutationObserver(() => {
        setTimeout(autoResizeOverUnderText, 100);
      });
      
      document.querySelectorAll('.over-under-display').forEach(display => {
        observer.observe(display, { 
          childList: true, 
          subtree: true, 
          characterData: true 
        });
      });
    }

    // D√©marrer l'auto-resize quand la page est charg√©e
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        autoResizeOverUnderText();
        autoShrinkTeamLogos();
        observeOverUnderChanges();
        // Ajuster aussi les cartes d'historique (vert) qui n'ont pas de classes
        const resizeHistory = () => {
          const boxes = document.querySelectorAll('.history-card div[style*="border: 2px solid"][style*="#22c55e"]');
          boxes.forEach(box => {
            const parts = Array.from(box.children);
            parts.forEach((el, idx) => {
              // Emp√™cher la coupure de mots
              el.style.wordBreak = 'keep-all';
              el.style.overflowWrap = 'normal';
              el.style.hyphens = 'none';
              el.style.whiteSpace = 'normal';

              // Partir de la taille calcul√©e actuelle (ne jamais agrandir)
              const computed = getComputedStyle(el);
              let base = parseFloat(computed.fontSize) || 16;
              el.style.fontSize = base + 'px';
              let tries = 0;
              while ((el.scrollWidth > box.clientWidth || el.scrollHeight > box.clientHeight) && base > 8 && tries < 30) {
                base -= 1;
                el.style.fontSize = base + 'px';
                tries++;
              }
            });
          });
        };
        resizeHistory();
        // Observer l'arriv√©e de nouvelles cartes historiques
        const historyObserver = new MutationObserver(() => setTimeout(resizeHistory, 50));
        const betHist = document.getElementById('bet-history-container');
        const parlayHist = document.getElementById('parlay-history-container');
        if (betHist) historyObserver.observe(betHist, { childList: true, subtree: true });
        if (parlayHist) historyObserver.observe(parlayHist, { childList: true, subtree: true });
      }, 500);
    });

    // Redimensionner lors du redimensionnement de la fen√™tre
    window.addEventListener('resize', () => {
      setTimeout(() => {
        autoResizeOverUnderText();
        autoShrinkTeamLogos();
      }, 100);
    });

    // ===========================
    // SYST√àME D'AUTO-INCR√âMENTATION AVEC LOCALSTORAGE
    // ===========================
    let autoIncrementInterval = null;
    let activeCardCounterEl = null;
    let currentDialogKey = null; // Cl√© localStorage pour le dialog actif
    
    // Sauvegarde dans localStorage
    function saveCountToStorage(key, count) {
      try {
        localStorage.setItem(key, JSON.stringify({
          count: count,
          timestamp: Date.now()
        }));
      } catch (e) {
        console.warn('Erreur sauvegarde localStorage:', e);
      }
    }
    
    // Charge depuis localStorage avec calcul du temps √©coul√©
    function loadCountFromStorage(key, initialCount, intervalMinutes, amount) {
      try {
        const stored = localStorage.getItem(key);
        if (!stored) return initialCount;
        
        const data = JSON.parse(stored);
        const timeElapsed = Date.now() - data.timestamp;
        const minutesElapsed = timeElapsed / (60 * 1000);
        const incrementsSinceLastSave = Math.floor(minutesElapsed / intervalMinutes);
        const additionalCount = incrementsSinceLastSave * amount;
        
        const newCount = data.count + additionalCount;
        console.log(`üì¶ Charg√© depuis localStorage: ${data.count} + ${additionalCount} (${incrementsSinceLastSave} incr√©ments) = ${newCount}`);
        
        return newCount;
      } catch (e) {
        console.warn('Erreur chargement localStorage:', e);
        return initialCount;
      }
    }
    
    function startAutoIncrement(initialCount, intervalMinutes, amount, storageKey) {
      // Arr√™ter l'intervalle pr√©c√©dent s'il existe
      if (autoIncrementInterval) {
        clearInterval(autoIncrementInterval);
      }
      
      // Nettoyer la valeur : enlever tous les espaces et caract√®res non num√©riques sauf les chiffres
      const cleanedCount = String(initialCount).replace(/\s/g, '').replace(/[^\d]/g, '');
      const baseCount = parseInt(cleanedCount) || 2843;
      
      // Charger la valeur depuis localStorage si disponible
      currentDialogKey = storageKey;
      let currentCount = loadCountFromStorage(storageKey, baseCount, intervalMinutes, amount);
      
      // Mettre √† jour imm√©diatement l'affichage
      updateDataCount(currentCount);
      
      console.log(`üöÄ Auto-incr√©mentation d√©marr√©e: ${currentCount} donn√©es (base: ${baseCount}), +${amount} toutes les ${intervalMinutes} min`);
      
      // D√©marrer l'incr√©mentation automatique
      const intervalMs = intervalMinutes * 60 * 1000; // Convertir minutes en millisecondes
      console.log(`‚è±Ô∏è Lancement setInterval avec`, { intervalMinutes, intervalMs, firstTickIn: `${intervalMs}ms` });
      
      autoIncrementInterval = setInterval(() => {
        currentCount += parseInt(amount);
        updateDataCount(currentCount);
        saveCountToStorage(storageKey, currentCount);
        console.log(`‚úÖ Auto-incr√©mentation: ${currentCount} donn√©es IA (+${amount})`);
      }, intervalMs);
    }
    
    function stopAutoIncrement() {
      if (autoIncrementInterval) {
        clearInterval(autoIncrementInterval);
        autoIncrementInterval = null;
        console.log('üõë Auto-incr√©mentation arr√™t√©e');
      }
    }
    
    function updateDataCount(count) {
      const dialogDataCount = document.getElementById('dialog-data-count');
      if (dialogDataCount) {
        // Animation flash pour rendre le changement visible
        dialogDataCount.style.transition = 'color 0.3s ease';
        dialogDataCount.style.color = '#16a34a'; // Vert
        dialogDataCount.textContent = count.toLocaleString('fr-FR');
        
        setTimeout(() => {
          dialogDataCount.style.color = ''; // Revenir √† la couleur normale
        }, 500);
      }
      
      // Mettre √† jour le compteur au-dessus de la carte
      if (activeCardCounterEl) {
        activeCardCounterEl.textContent = count.toLocaleString('fr-FR');
      }
      
      console.log(`üìä Compteur mis √† jour: ${count} (Dialog: ${!!dialogDataCount}, Card: ${!!activeCardCounterEl})`);
    }

    // ===========================
    // AUTO-INCR√âMENTATION GLOBALE (compteurs au-dessus des cartes)
    // ===========================
    const cardAutoIntervals = new Map(); // Map<Element, number>

    function updateCounterElement(el, count) {
      if (!el) return;
      el.textContent = Number(count).toLocaleString('fr-FR');
    }

    function startCardCounterAutoIncrement(counterEl, initialCount, intervalMinutes, amount, storageKey) {
      if (!counterEl) return;

      // Stopper interval pr√©c√©dent pour cet √©l√©ment
      const previous = cardAutoIntervals.get(counterEl);
      if (previous) clearInterval(previous);

      // Nettoyage + parsing de la valeur initiale
      const cleaned = String(initialCount).replace(/\s/g, '').replace(/[^\d]/g, '');
      const baseCount = parseInt(cleaned) || 2843;
      const step = parseInt(String(amount)) || 5;

      // Charger la valeur depuis localStorage si disponible
      let current = loadCountFromStorage(storageKey, baseCount, intervalMinutes, step);

      // Mettre √† jour imm√©diatement l'affichage
      updateCounterElement(counterEl, current);

      const intervalMs = Number(intervalMinutes) * 60 * 1000;
      if (!Number.isFinite(intervalMs) || intervalMs <= 0) return;

      console.log('üîÅ Auto-incr√©ment global activ√©', { current, step, intervalMinutes, intervalMs });
      const id = setInterval(() => {
        current += step;
        updateCounterElement(counterEl, current);
        saveCountToStorage(storageKey, current);
        console.log('‚ÜóÔ∏è Compteur carte mis √† jour', { current, step });
      }, intervalMs);

      cardAutoIntervals.set(counterEl, id);
    }

    function initGlobalAutoIncrementCounters() {
      // Pour chaque carte, lire les param√®tres sur le bouton "Voir analyse IA"
      const buttons = document.querySelectorAll('.bet-card .btn-analysis');
      buttons.forEach((btn, index) => {
        try {
          const card = btn.closest('.bet-card');
          if (!card) return;

          // Compteur au-dessus de la carte
          const counterAbove = card.previousElementSibling;
          if (!counterAbove || !counterAbove.classList.contains('ai-counter-above')) return;
          const countEl = counterAbove.querySelector('span span');
          if (!countEl) return;

          // Param√®tres
          const autoIncRaw = btn.dataset.autoIncrement;
          const enabled = String(autoIncRaw).toLowerCase() === 'true';
          if (!enabled) return;

          const rawInterval = btn.dataset.incrementInterval;
          const intervalParsed = Number.parseFloat(rawInterval);
          const interval = Number.isFinite(intervalParsed) && intervalParsed > 0 ? intervalParsed : 5;
          const amount = parseInt(btn.dataset.incrementAmount || '5') || 5;

          // Valeur initiale
          const initial = countEl.textContent || btn.dataset.aiDataCount || '2843';

          // Cr√©er une cl√© unique pour cette carte
          const blockId = card.dataset.blockId || `bet-card-${index}`;
          const storageKey = `ai-counter-${blockId}`;

          startCardCounterAutoIncrement(countEl, initial, interval, amount, storageKey);
        } catch (e) {
          console.warn('‚ùóErreur init auto-incr√©ment carte', e);
        }
      });
    }

    // ===========================
    // FONCTIONS PRINCIPALES
    // ===========================

    // Calculate return
    function calculateReturn(amount) {
      return (amount * currentMultiplier).toFixed(2);
    }

    // Update display
    function updateDisplay() {
      if (!currentCard) return;
      
      // Mise (votre mise)
      const betAmountSmall = currentCard.querySelector('.bet-amount-value-small');
      if (betAmountSmall) {
        betAmountSmall.textContent = '$' + currentBetAmount;
      }
      
      // Cashout (montant total)
      const cashoutAmount = currentCard.querySelector('.cashout-amount');
      if (cashoutAmount) {
        cashoutAmount.textContent = '$' + calculateReturn(currentBetAmount);
      }
      
      // B√©n√©fice
      const cashoutProfit = currentCard.querySelector('.cashout-profit');
      if (cashoutProfit) {
        const profit = (currentBetAmount * currentMultiplier - currentBetAmount).toFixed(2);
        cashoutProfit.textContent = '+$' + profit + ' b√©n√©fice';
      }
      
      // Anciens √©l√©ments (pour compatibilit√©)
      const betDisplay = currentCard.querySelector('.bet-amount-value');
      const gainDisplay = currentCard.querySelector('.gain-value');
      
      if (betDisplay) {
        betDisplay.textContent = '$' + currentBetAmount;
      }
      if (gainDisplay) {
        gainDisplay.textContent = '$' + calculateReturn(currentBetAmount);
      }
    }

    // Set bet amount
    function setBetAmount(amount) {
      currentBetAmount = amount;
      updateDisplay();
      closeBetDialog();
    }

    // Custom bet amount
    function customBetAmount() {
      const amount = prompt('Entrez le montant de votre mise:');
      if (amount && !isNaN(amount) && amount > 0) {
        setBetAmount(parseFloat(amount));
      }
    }

    // Toggle sidebar (mobile)
    function toggleSidebar() {
      const sidebar = document.querySelector('.sidebar');
      const overlay = document.querySelector('.overlay');
      const headerToggle = document.querySelector('header .mobile-toggle');
      isMobileSidebarOpen = !isMobileSidebarOpen;
      
      if (isMobileSidebarOpen) {
        sidebar.classList.add('active');
        overlay.classList.add('active');
        document.body.classList.add('body-no-scroll');
        document.body.classList.add('sidebar-open');
        if (headerToggle) headerToggle.classList.add('active');
      } else {
        sidebar.classList.remove('active');
        overlay.classList.remove('active');
        document.body.classList.remove('body-no-scroll');
        document.body.classList.remove('sidebar-open');
        if (headerToggle) headerToggle.classList.remove('active');
      }
    }

    // Navigate to page
    function navigateTo(event, pageName) {
      if (event) {
        event.preventDefault();
      }

      // V√©rifier l'acc√®s
      const isShopifyEditor = {{ request.design_mode | json }};
      const isUserLoggedIn = {{ user_is_logged_in | json }} || isShopifyEditor;
      const accessLevel = '{{ access_level }}';
      
      // ‚≠ê Pages d'historique accessibles √† TOUS (pas besoin de connexion)
      const publicPages = ['historique-bet', 'historique-parlay'];
      const isPublicPage = publicPages.includes(pageName);
      
      // Si c'est une page publique, autoriser l'acc√®s sans v√©rifications
      if (isPublicPage) {
        performNavigation(pageName);
        return;
      }
      
      // Pour les AUTRES pages : v√©rifications normales
      
      // Si paiement √©chou√©, forcer la page payment-failed
      if (accessLevel === 'payment_failed' && pageName !== 'payment-failed') {
        performNavigation('payment-failed');
        return;
      }
      
      // Si pas d'abonnement, forcer la page no-subscription
      if (accessLevel === 'no_subscription' && pageName !== 'no-subscription') {
        performNavigation('no-subscription');
        return;
      }
      
      // Si pas connect√©, forcer la page auth-required
      if (!isUserLoggedIn && pageName !== 'auth-required' && pageName !== 'payment-failed' && pageName !== 'no-subscription') {
        performNavigation('auth-required');
        return;
      }

      // Ne rien faire si on est d√©j√† sur cette page
      if (currentPage === pageName) {
        return;
      }

      // Afficher le chargement AI pour les pages bet et parlay (seulement si acc√®s autoris√©)
      if ((pageName === 'bet' || pageName === 'parlay') && accessLevel !== 'payment_failed') {
        const loadingOverlay = document.getElementById('ai-loading-overlay');
        loadingOverlay.classList.add('active');
        document.body.classList.add('body-no-scroll');
        
        // 75% du temps: 0.7s, 25% du temps: 3s
        const loadingDuration = Math.random() < 0.75 ? 700 : 3000;
        
        setTimeout(() => {
          loadingOverlay.classList.remove('active');
          document.body.classList.remove('body-no-scroll');
          performNavigation(pageName);
        }, loadingDuration);
      } else {
        performNavigation(pageName);
      }
    }

    // Perform the actual navigation
    function performNavigation(pageName) {
      // Hide all pages
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });

      // Show selected page
      const targetPage = document.getElementById('page-' + pageName);
      if (targetPage) {
        targetPage.classList.add('active');
      }

      // Update active nav item
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
      });
      const navItem = document.querySelector(`.nav-item[data-page="${pageName}"]`);
      if (navItem) {
        navItem.classList.add('active');
      }

      // Close mobile sidebar
      if (isMobileSidebarOpen) {
        toggleSidebar();
      }

      // Update current page
      currentPage = pageName;

      // Persist current page for editor reloads
      try { localStorage.setItem('dashboard_current_page', pageName); } catch {}

      // Charger l'historique Supabase si on navigue vers ces pages
      if (pageName === 'historique-bet' && typeof window.loadBetHistory === 'function') {
        window.loadBetHistory();
      } else if (pageName === 'historique-parlay' && typeof window.loadParlayHistory === 'function') {
        window.loadParlayHistory();
      }

      // Update URL hash
      window.location.hash = pageName;
    }

    // Open bet dialog
    function openBetDialog(element) {
      currentCard = element.closest('.bet-card');
      const multiplier = parseFloat(element.dataset.multiplier);
      
      if (!isNaN(multiplier)) {
        currentMultiplier = multiplier;
      }
      
      document.getElementById('bet-dialog').classList.add('active');
    }

    // Close bet dialog
    function closeBetDialog() {
      document.getElementById('bet-dialog').classList.remove('active');
    }

    // Open analysis dialog
    function openAnalysisDialog(trigger) {
      const dialogWinPercentage = document.getElementById('dialog-win-percentage');
      const dialogProgressBar = document.getElementById('dialog-progress-bar');
      const dialogDataCount = document.getElementById('dialog-data-count');

      // R√©cup√©rer les valeurs depuis le bouton cliqu√©
      let pctRaw = trigger?.dataset?.winPercentage;
      let dataCountRaw = trigger?.dataset?.aiDataCount;

      // R√©cup√©rer les infos de template et √©quipes
      const sportType = (trigger?.dataset?.sportType || 'nhl').toLowerCase();
      const team1 = trigger?.dataset?.team1 || '√âQUIPE DOMICILE';
      const team2 = trigger?.dataset?.team2 || '√âQUIPE EXT√âRIEUR';
      
      // R√©cup√©rer les param√®tres d'auto-incr√©mentation
      const autoIncrement = trigger?.dataset?.autoIncrement === 'true' || trigger?.dataset?.autoIncrement === true;
      const rawInterval = trigger?.dataset?.incrementInterval;
      const parsedInterval = Number.parseFloat(rawInterval);
      const incrementInterval = Number.isFinite(parsedInterval) && parsedInterval > 0 ? parsedInterval : 5;
      const incrementAmount = parseInt(trigger?.dataset?.incrementAmount) || 5;

      // Afficher le bon template
      const nhlEl = document.getElementById('template-nhl');
      const nflEl = document.getElementById('template-nfl');
      if (nhlEl && nflEl) {
        if (sportType === 'nfl') {
          nhlEl.style.display = 'none';
          nflEl.style.display = 'block';
        } else {
          nhlEl.style.display = 'block';
          nflEl.style.display = 'none';
        }
      }

      // Remplacer les placeholders d'√©quipes dans tout le contenu
      const contentRoot = document.getElementById('analysis-content');
      if (contentRoot) {
        const targets = contentRoot.querySelectorAll('.analysis-subsection-title, .analysis-subsection-content');
        targets.forEach((el) => {
          if (!el.dataset.template) {
            el.dataset.template = el.innerHTML;
          }
          el.innerHTML = el.dataset.template
            .replace(/√âquipe domicile/g, team1)
            .replace(/√âquipe ext√©rieur/g, team2);
        });
      }

      // Fallback: chercher dans la carte parente si les data-attributes ne sont pas pr√©sents
      if (!pctRaw && trigger) {
        const card = trigger.closest('.bet-card');
        const confidenceEl = card?.querySelector('.confidence-percentage');
        if (confidenceEl) {
          pctRaw = confidenceEl.textContent;
        }
      }

      if (!dataCountRaw && trigger) {
        const card = trigger.closest('.bet-card');
        const counterAbove = card?.previousElementSibling;
        if (counterAbove?.classList?.contains('ai-counter-above')) {
          const countEl = counterAbove.querySelector('span span');
          if (countEl) {
            dataCountRaw = countEl.textContent;
            activeCardCounterEl = countEl; // M√©moriser l'√©l√©ment √† mettre √† jour
          }
        }
      }

      // Normaliser et appliquer le pourcentage
      if (dialogWinPercentage && dialogProgressBar && pctRaw) {
        const pct = Math.max(0, Math.min(100, parseFloat(String(pctRaw).replace('%', '').replace(',', '.').trim())));
        if (!Number.isNaN(pct)) {
          dialogWinPercentage.textContent = String(pct).replace(/\.0+$/, '');
          dialogProgressBar.style.width = pct + '%';
        }
      }

      // Appliquer le data count
      if (dialogDataCount && dataCountRaw) {
        dialogDataCount.textContent = String(dataCountRaw).trim();
      }
      
      // Afficher l'overlay de chargement AI
      const loadingOverlay = document.getElementById('ai-loading-overlay');
      loadingOverlay.classList.add('active');
      document.body.classList.add('body-no-scroll');
      
      // Dur√©e al√©atoire entre 2 et 3 secondes (2000-3000ms)
      const randomDuration = Math.floor(Math.random() * 1000) + 2000;
      
      setTimeout(() => {
        // Cacher l'overlay de chargement
        loadingOverlay.classList.remove('active');
        document.body.classList.remove('body-no-scroll');
        
        // Mettre √† jour l'heure actuelle
        const now = new Date();
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const timeElement = document.getElementById('analysis-time');
        if (timeElement) {
          timeElement.textContent = `${hours}:${minutes}`;
        }
        
        // Ouvrir le dialog d'analyse directement avec le contenu
        const dialog = document.getElementById('analysis-dialog');
        const loading = document.getElementById('loading-section');
        const content = document.getElementById('analysis-content');
        
        dialog.classList.add('active');
        loading.style.display = 'none';
        content.style.display = 'block';
        
        // D√©marrer l'auto-incr√©mentation APR√àS l'ouverture du dialog
        if (autoIncrement) {
          console.log(`üéØ Param√®tres auto-incr√©mentation:`, {
            enabled: autoIncrement,
            interval: `${incrementInterval} minutes`,
            intervalMs: incrementInterval * 60 * 1000,
            amount: incrementAmount,
            initialCount: dataCountRaw,
            cleanedCount: String(dataCountRaw).replace(/\s/g, '')
          });
          
          // Cr√©er une cl√© unique pour cette carte
          const card = trigger?.closest('.bet-card');
          const blockId = card?.dataset?.blockId || `dialog-${dataCountRaw}`;
          const storageKey = `ai-dialog-${blockId}`;
          
          startAutoIncrement(dataCountRaw, incrementInterval, incrementAmount, storageKey);
        } else {
          console.log('‚ö†Ô∏è Auto-incr√©mentation d√©sactiv√©e');
        }
      }, randomDuration);
    }

    // Close analysis dialog
    function closeAnalysisDialog() {
      document.getElementById('analysis-dialog').classList.remove('active');
      // Arr√™ter l'auto-incr√©mentation lors de la fermeture
      stopAutoIncrement();
      activeCardCounterEl = null; // R√©initialiser la r√©f√©rence
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      if (window.__aiInitDone) return;
      window.__aiInitDone = true;
      
      updateDisplay();

      // Initialiser l'auto-incr√©mentation globale des compteurs au-dessus des cartes
      initGlobalAutoIncrementCounters();

      // D√©tection du mode √©conomie de batterie et remplacement vid√©o par image
      (async function initBatterySaverDetection() {
        // Fonction de d√©tection du mode √©conomie de batterie
        async function detectBatterySaverMode() {
          try {
            // Tentative de d√©tection via Battery API
            if ('getBattery' in navigator) {
              const battery = await navigator.getBattery();
              // D√©tecter batterie faible et non en charge
              const isLowBattery = battery.level < 0.2 && !battery.charging;
              return isLowBattery;
            }
          } catch (e) {
            console.log('Battery API non disponible:', e);
          }
          return false;
        }

        // Fonction pour remplacer la vid√©o par l'image
        function switchToFallbackImage(videoId, imageId) {
          const video = document.getElementById(videoId);
          const image = document.getElementById(imageId);
          
          if (video && image) {
            video.style.display = 'none';
            image.style.display = 'block';
            console.log(`Mode √©conomie d√©tect√©: vid√©o ${videoId} remplac√©e par image`);
          }
        }

        // Fonction pour v√©rifier si la vid√©o peut se lire
        function checkVideoPlayback(videoId, imageId) {
          const video = document.getElementById(videoId);
          
          if (!video) return;
          
          // Tentative de lecture
          const playPromise = video.play();
          
          if (playPromise !== undefined) {
            playPromise.catch(error => {
              // Si la lecture √©choue (possible en mode √©conomie de batterie)
              console.log('Lecture vid√©o bloqu√©e, passage √† l\'image:', error);
              switchToFallbackImage(videoId, imageId);
            });
          }
          
          // V√©rifier si la vid√©o stalle apr√®s quelques secondes
          setTimeout(() => {
            if (video.paused || video.readyState < 3) {
              switchToFallbackImage(videoId, imageId);
            }
          }, 2000);
        }

        // V√©rifier le mode √©conomie de batterie
        const isBatterySaver = await detectBatterySaverMode();
        
        if (isBatterySaver) {
          // Remplacer imm√©diatement par l'image
          switchToFallbackImage('bet-video', 'bet-fallback-image');
          switchToFallbackImage('parlay-video', 'parlay-fallback-image');
        } else {
          // V√©rifier la lecture des vid√©os
          checkVideoPlayback('bet-video', 'bet-fallback-image');
          checkVideoPlayback('parlay-video', 'parlay-fallback-image');
        }
      })();

      // V√©rifier l'acc√®s utilisateur
      const isShopifyEditor = {{ request.design_mode | json }};
      const isUserLoggedIn = {{ user_is_logged_in | json }} || isShopifyEditor;
      const accessLevel = '{{ access_level }}';

      // Si paiement √©chou√©, forcer la page payment-failed (uniquement hors √©diteur)
      if (accessLevel === 'payment_failed' && !isShopifyEditor) {
        performNavigation('payment-failed');
        // D√©sactiver tous les liens de navigation
        document.querySelectorAll('.nav-item, .desktop-nav-item').forEach(item => {
          item.style.pointerEvents = 'none';
          item.style.opacity = '0.5';
        });
        return;
      }

      // Si pas d'abonnement, forcer la page no-subscription (uniquement hors √©diteur)
      if (accessLevel === 'no_subscription' && !isShopifyEditor) {
        performNavigation('no-subscription');
        // D√©sactiver tous les liens de navigation
        document.querySelectorAll('.nav-item, .desktop-nav-item').forEach(item => {
          item.style.pointerEvents = 'none';
          item.style.opacity = '0.5';
        });
        return;
      }

      // Si pas connect√©, forcer l'affichage de la page de connexion requise (uniquement hors √©diteur)
      if (!isUserLoggedIn && !isShopifyEditor) {
        performNavigation('auth-required');
        
        // D√©sactiver tous les liens de navigation
        document.querySelectorAll('.nav-item, .desktop-nav-item').forEach(item => {
          if (!item.dataset.page || item.dataset.page !== 'auth-required') {
            item.style.pointerEvents = 'none';
            item.style.opacity = '0.5';
          }
        });
        
        return; // Arr√™ter l'ex√©cution normale
      }

      // Handle hash navigation with persistence (utilisateurs connect√©s uniquement)
      const hash = window.location.hash.substring(1);
      let savedPage = '';
      try { savedPage = localStorage.getItem('dashboard_current_page') || ''; } catch {}
      let targetPage = hash || savedPage || 'bet';

      // Si connect√© mais que la page cible est sp√©ciale, rediriger vers bet
      if (targetPage === 'auth-required' || targetPage === 'payment-failed' || targetPage === 'no-subscription') {
        targetPage = 'bet';
        // Nettoyer le localStorage et le hash
        try { localStorage.setItem('dashboard_current_page', 'bet'); } catch {}
        window.location.hash = '';
      }

      navigateTo(null, targetPage);

      // Update time display
      updateTime();
      setInterval(updateTime, 1000);

      // Fonctions pour choisir les phases al√©atoirement
      const getRandomStartPhase = () => {
        const phases = ['reflection', 'modifying', 'normal'];
        return phases[Math.floor(Math.random() * phases.length)];
      };

      const getNextRandomPhase = (currentPhase, lastPhase) => {
        const allPhases = ['reflection', 'confirmed', 'modifying', 'modified', 'normal'];
        const availablePhases = allPhases.filter(p => p !== currentPhase && p !== lastPhase);
        return availablePhases[Math.floor(Math.random() * availablePhases.length)];
      };

      // Helpers de persistance
      const SAVE_KEYS = {
        bet: 'ai_seq_bet_v1',
        parlay: 'ai_seq_parlay_v1',
      };

      function saveSequenceState(key, state) {
        try {
          localStorage.setItem(key, JSON.stringify(state));
        } catch {}
      }

      function loadSequenceState(key) {
        try {
          const raw = localStorage.getItem(key);
          if (!raw) return null;
          return JSON.parse(raw);
        } catch {
          return null;
        }
      }

      function nowMs() {
        return Date.now();
      }

      // Syst√®me de s√©quence d'analyse avec 4 phases pour Bet
      const rotatingTextEl = document.getElementById('rotating-text');
      const lightIconBet = document.getElementById('light-icon-bet');
      const editIconBet = document.getElementById('edit-icon-bet');
      
      if (rotatingTextEl && lightIconBet && editIconBet) {
        const aiContainerBet = rotatingTextEl.parentElement;
        
        let savedBet = loadSequenceState(SAVE_KEYS.bet);
        let currentPhase = savedBet?.phase || 'normal';
        let lastPhase = savedBet?.lastPhase ?? null;
        let reflectionDuration = savedBet?.reflectionDuration ?? 0;
        let normalTextsIndex = savedBet?.nextIndex ?? 0;
        let normalRotations = savedBet?.normalRotations ?? 0;
        
        const normalTexts = [
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-1]</span> Analyse en cours des meilleures opportunit√©s...',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-2]</span> Analyse de centaines de sites de paris sportifs...',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-3]</span> Analyse et comparaison entre les sites...',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-4]</span> Analyse des donn√©es...',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-5]</span> Analyse de l\'historique entre les √©quipes...',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-6]</span> Analyse des lineup des √©quipes...',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-7]</span> Lecture des cotes en direct . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-8]</span> Comparaison des prix entre books . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-9]</span> Mouvement de ligne suivi . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-10]</span> Probabilit√© implicite recalcul√©e . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-11]</span> Valeur de cl√¥ture (CLV) estim√©e . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-12]</span> Reverse line move (RLM) en suivi . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-13]</span> √âcart de prix rep√©r√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-14]</span> Meilleur prix identifi√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-15]</span> Consensus du march√© v√©rifi√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-16]</span> Mises vs argent en revue . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-17]</span> Volume du march√© en hausse . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-18]</span> Timing d\'achat √©valu√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-19]</span> Moneyline ‚Äî √©valuation . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-20]</span> Spread ‚Äî √©valuation . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-21]</span> Over / Under ‚Äî √©valuation . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-22]</span> Ouverture ‚Üí position actuelle . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-23]</span> Prix moyen du march√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-24]</span> Limites de mise v√©rifi√©es . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-25]</span> Liquidit√© du march√© suivie . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-26]</span> Variations rapides contr√¥l√©es . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-27]</span> H2H r√©cent pris en compte . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-28]</span> Domicile / ext√©rieur en revue . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-29]</span> Forme r√©cente analys√©e . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-30]</span> S√©ries de W / L not√©es . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-31]</span> Calendrier / repos pris en compte . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-32]</span> Blessures cl√©s v√©rifi√©es . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-33]</span> Lineups confirm√©s . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-34]</span> Gardien partant confirm√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-35]</span> Power play ‚Äî tendance r√©cente . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-36]</span> Discipline ‚Äî p√©nalit√©s r√©centes . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-37]</span> Tirs au but ‚Äî tendance . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-38]</span> Rythme de jeu estim√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-39]</span> March√©s d√©riv√©s √©cart√©s (simple) . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-40]</span> Alt lines ignor√©es (simple) . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-41]</span> Fen√™tre de prix optimale . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-42]</span> Edge estim√© mis √† jour . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-43]</span> ROI attendu ajust√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-44]</span> Cash-out moyen observ√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-45]</span> Ouverture vs cl√¥ture compar√©es . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-46]</span> Concordance des lignes entre books . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-47]</span> Outliers de prix d√©tect√©s . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-48]</span> Split public vs pros suivi . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-49]</span> Fen√™tre d\'achat recommand√©e . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-50]</span> Alerte de freeze de ligne . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-51]</span> Cote cible atteinte (march√©) . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-52]</span> Risque march√© √©valu√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-53]</span> Score de confiance IA mis √† jour . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-54]</span> Historique comparable charg√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[A-55]</span> Suivi en temps r√©el continu . . .'
        ];
        
        const hideAllIcons = () => {
          lightIconBet.style.display = 'none';
          editIconBet.style.display = 'none';
        };
        
        function saveBet(endAt, displayedIndex) {
          const state = {
            phase: currentPhase,
            lastPhase,
            reflectionDuration,
            normalRotations,
            displayedIndex: displayedIndex ?? null,
            nextIndex: normalTextsIndex,
            endAt,
            savedAt: nowMs(),
          };
          saveSequenceState(SAVE_KEYS.bet, state);
        }

        function applyCenterModeForNormal(on) {
          if (!aiContainerBet) return;
          if (on) aiContainerBet.classList.add('center-only');
          else aiContainerBet.classList.remove('center-only');
        }

        function renderFromStateAndSchedule(remaining) {
          switch (currentPhase) {
            case 'reflection':
              applyCenterModeForNormal(false);
              hideAllIcons();
              lightIconBet.style.display = 'block';
              rotatingTextEl.innerHTML = 'En r√©flexion...';
              setTimeout(nextPhaseBet, Math.max(0, remaining));
              break;
            case 'confirmed':
              applyCenterModeForNormal(false);
              hideAllIcons();
              lightIconBet.style.display = 'block';
              const seconds = Math.round((reflectionDuration || 0) / 1000);
              rotatingTextEl.innerHTML = `R√©fl√©chie pendant ${seconds} secondes`;
              setTimeout(nextPhaseBet, Math.max(0, remaining));
              break;
            case 'modifying':
              applyCenterModeForNormal(false);
              hideAllIcons();
              editIconBet.style.display = 'block';
              rotatingTextEl.innerHTML = 'Modification des donn√©es ...';
              setTimeout(nextPhaseBet, Math.max(0, remaining));
              break;
            case 'modified':
              applyCenterModeForNormal(false);
              hideAllIcons();
              editIconBet.style.display = 'block';
              rotatingTextEl.innerHTML = 'Modification des donn√©es effectu√©es';
              setTimeout(() => {
                lastPhase = currentPhase;
                currentPhase = getNextRandomPhase(currentPhase, lastPhase);
                normalTextsIndex = 0;
                normalRotations = 0;
                runSequence();
              }, Math.max(0, remaining));
              break;
            case 'normal':
            default:
              applyCenterModeForNormal(true);
              hideAllIcons();
              const displayedIndex = savedBet?.displayedIndex ?? normalTextsIndex;
              rotatingTextEl.innerHTML = normalTexts[displayedIndex % normalTexts.length];
              normalTextsIndex = (displayedIndex + 1) % normalTexts.length;

              if (remaining > 0) {
                saveBet(nowMs() + remaining, displayedIndex);
                setTimeout(runSequence, remaining);
              } else {
                runSequence();
              }
              break;
          }
        }

        function nextPhaseBet() {
          lastPhase = currentPhase;
          currentPhase = getNextRandomPhase(currentPhase, lastPhase);
          runSequence();
        }
        
        const runSequence = () => {
          switch(currentPhase) {
            case 'reflection':
              applyCenterModeForNormal(false);
              hideAllIcons();
              lightIconBet.style.display = 'block';
              rotatingTextEl.innerHTML = 'En r√©flexion...';
              reflectionDuration = Math.floor(Math.random() * (30000 - 5000 + 1)) + 5000;
              const endAt = nowMs() + reflectionDuration;
              saveBet(endAt, null);
              setTimeout(() => {
                lastPhase = currentPhase;
                currentPhase = getNextRandomPhase(currentPhase, lastPhase);
                runSequence();
              }, reflectionDuration);
              break;
              
            case 'confirmed':
              applyCenterModeForNormal(false);
              hideAllIcons();
              lightIconBet.style.display = 'block';
              const seconds = Math.round((reflectionDuration || 0) / 1000);
              rotatingTextEl.innerHTML = `R√©fl√©chie pendant ${seconds} secondes`;
              const duration = 5000;
              saveBet(nowMs() + duration, null);
              setTimeout(() => {
                lastPhase = currentPhase;
                currentPhase = getNextRandomPhase(currentPhase, lastPhase);
                runSequence();
              }, duration);
              break;
              
            case 'modifying':
              applyCenterModeForNormal(false);
              hideAllIcons();
              editIconBet.style.display = 'block';
              rotatingTextEl.innerHTML = 'Modification des donn√©es ...';
              const modifyingDuration = Math.floor(Math.random() * (30000 - 12000 + 1)) + 12000;
              saveBet(nowMs() + modifyingDuration, null);
              setTimeout(() => {
                lastPhase = currentPhase;
                currentPhase = getNextRandomPhase(currentPhase, lastPhase);
                runSequence();
              }, modifyingDuration);
              break;
              
            case 'modified':
              applyCenterModeForNormal(false);
              hideAllIcons();
              editIconBet.style.display = 'block';
              rotatingTextEl.innerHTML = 'Modification des donn√©es effectu√©es';
              const durationMod = 5000;
              saveBet(nowMs() + durationMod, null);
              setTimeout(() => {
                lastPhase = currentPhase;
                currentPhase = getNextRandomPhase(currentPhase, lastPhase);
                normalTextsIndex = 0;
                normalRotations = 0;
                runSequence();
              }, durationMod);
              break;
              
            case 'normal':
              applyCenterModeForNormal(true);
              hideAllIcons();
              const displayedIndex = normalTextsIndex;
              rotatingTextEl.innerHTML = normalTexts[displayedIndex];

              normalTextsIndex = (normalTextsIndex + 1) % normalTexts.length;
              if (normalTextsIndex === 0) normalRotations++;

              const maxRotations = Math.floor(Math.random() * (6 - 3 + 1)) + 3;
              const delay = Math.floor(Math.random() * (15000 - 2000 + 1)) + 2000;
              const endAtNormal = nowMs() + delay;
              saveBet(endAtNormal, displayedIndex);

              setTimeout(() => {
                if (normalRotations >= maxRotations) {
                  lastPhase = currentPhase;
                  currentPhase = getNextRandomPhase(currentPhase, lastPhase);
                }
                runSequence();
              }, delay);
              break;
          }
        };
        
        const remaining = savedBet?.endAt ? Math.max(0, savedBet.endAt - nowMs()) : 0;
        if (savedBet && remaining > 0) {
          renderFromStateAndSchedule(remaining);
        } else {
          if (!savedBet) {
            normalTextsIndex = Math.floor(Math.random() * normalTexts.length);
          }
          currentPhase = 'normal';
          runSequence();
        }
      }

      // Syst√®me de s√©quence d'analyse avec 4 phases pour Parlay
      const rotatingTextParlayEl = document.getElementById('rotating-text-parlay');
      const lightIconParlay = document.getElementById('light-icon-parlay');
      const editIconParlay = document.getElementById('edit-icon-parlay');
      
      if (rotatingTextParlayEl && lightIconParlay && editIconParlay) {
        const aiContainerParlay = rotatingTextParlayEl.parentElement;
        
        let savedParlay = loadSequenceState(SAVE_KEYS.parlay);
        let currentPhaseParlay = savedParlay?.phase || 'normal';
        let lastPhaseParlay = savedParlay?.lastPhase ?? null;
        let reflectionDurationParlay = savedParlay?.reflectionDuration ?? 0;
        let normalTextsIndexParlay = savedParlay?.nextIndex ?? 0;
        let normalRotationsParlay = savedParlay?.normalRotations ?? 0;
        
        const normalTextsPar = [
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-1]</span> Calcul des probabilit√©s de victoire...',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-2]</span> Analyse des combinaisons optimales...',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-3]</span> √âvaluation des risques du parlay...',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-4]</span> Analyse approfondie des matchs...',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-5]</span> Calcul des cotes combin√©es...',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-6]</span> V√©rification des statistiques...',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-7]</span> Agr√©gation des cotes par leg . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-8]</span> Comparaison des prix par leg . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-9]</span> Corr√©lation entre legs (sgp) . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-10]</span> Probabilit√© combin√©e mise √† jour . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-11]</span> EV global mis √† jour . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-12]</span> Edge global pond√©r√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-13]</span> CLV parlay estim√©e . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-14]</span> RLM suivi par leg . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-15]</span> Alt lines √©valu√©es par leg . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-16]</span> Team totals corr√©l√©s v√©rifi√©s . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-17]</span> Draw no bet envisag√© par leg . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-18]</span> Round robin 2/3 √©valu√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-19]</span> Round robin 3/4 √©valu√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-20]</span> M√™me journ√©e pour tous les legs . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-21]</span> Sports mixtes filtr√©s . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-22]</span> Ordre des legs optimis√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-23]</span> Fiabilit√© des legs class√©e . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-24]</span> Handle par leg v√©rifi√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-25]</span> Bet splits par leg lus . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-26]</span> Outliers de prix par leg rep√©r√©s . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-27]</span> Meilleur book par leg identifi√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-28]</span> Marge (vig) globale recalcul√©e . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-29]</span> Liquidit√© par leg suivie . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-30]</span> Limites de mise par leg v√©rifi√©es . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-31]</span> Timing d\'achat par leg √©valu√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-32]</span> √âcart court terme / long terme par leg . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-33]</span> Synchronisation live multi-books . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-34]</span> Variations rapides multi-legs contr√¥l√©es . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-35]</span> H2H r√©cent par leg int√©gr√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-36]</span> Domicile / ext√©rieur par leg int√©gr√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-37]</span> Blessures cl√©s par leg prises en compte . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-38]</span> Lineups impactant les legs suivis . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-39]</span> Forme r√©cente par leg analys√©e . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-40]</span> Pace / rythme attendu par leg . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-41]</span> Fen√™tres de prix align√©es . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-42]</span> Notes par leg harmonis√©es . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-43]</span> Score confiance parlay ajust√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-44]</span> Risque global parlay √©valu√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-45]</span> Exposure par sport contr√¥l√©e . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-46]</span> Corr√©lation totals vs sides v√©rifi√©e . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-47]</span> Alt totals test√©s par leg . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-48]</span> √âcart de cote inter-books agr√©g√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-49]</span> Prix moyen multi-books calcul√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-50]</span> √âcart vs ouverture par leg . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-51]</span> Position vs cl√¥ture par leg . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-52]</span> Cash-out potentiel suivi . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-53]</span> Hedging sc√©narios envisag√©s . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-54]</span> Normalisation des formats de cote . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-55]</span> Nettoyage des doublons de march√© . . .',
          '<span style="font-size: 0.85em; opacity: 0.6; font-family: monospace; color: #999;">[P-56]</span> Rafra√Æchissement multi-sources continu . . .'
        ];
        
        const hideAllIconsParlay = () => {
          lightIconParlay.style.display = 'none';
          editIconParlay.style.display = 'none';
        };
        
        function saveParlay(endAt, displayedIndex) {
          const state = {
            phase: currentPhaseParlay,
            lastPhase: lastPhaseParlay,
            reflectionDuration: reflectionDurationParlay,
            normalRotations: normalRotationsParlay,
            displayedIndex: displayedIndex ?? null,
            nextIndex: normalTextsIndexParlay,
            endAt,
            savedAt: nowMs(),
          };
          saveSequenceState(SAVE_KEYS.parlay, state);
        }

        function applyCenterModeForNormalParlay(on) {
          if (!aiContainerParlay) return;
          if (on) aiContainerParlay.classList.add('center-only');
          else aiContainerParlay.classList.remove('center-only');
        }

        function renderFromStateAndScheduleParlay(remaining) {
          switch (currentPhaseParlay) {
            case 'reflection':
              applyCenterModeForNormalParlay(false);
              hideAllIconsParlay();
              lightIconParlay.style.display = 'block';
              rotatingTextParlayEl.innerHTML = 'En r√©flexion...';
              setTimeout(nextPhaseParlay, Math.max(0, remaining));
              break;
            case 'confirmed':
              applyCenterModeForNormalParlay(false);
              hideAllIconsParlay();
              lightIconParlay.style.display = 'block';
              const secondsPar = Math.round((reflectionDurationParlay || 0) / 1000);
              rotatingTextParlayEl.innerHTML = `R√©fl√©chie pendant ${secondsPar} secondes`;
              setTimeout(nextPhaseParlay, Math.max(0, remaining));
              break;
            case 'modifying':
              applyCenterModeForNormalParlay(false);
              hideAllIconsParlay();
              editIconParlay.style.display = 'block';
              rotatingTextParlayEl.innerHTML = 'Modification des donn√©es ...';
              setTimeout(nextPhaseParlay, Math.max(0, remaining));
              break;
            case 'modified':
              applyCenterModeForNormalParlay(false);
              hideAllIconsParlay();
              editIconParlay.style.display = 'block';
              rotatingTextParlayEl.innerHTML = 'Modification des donn√©es effectu√©es';
              setTimeout(() => {
                lastPhaseParlay = currentPhaseParlay;
                currentPhaseParlay = getNextRandomPhase(currentPhaseParlay, lastPhaseParlay);
                normalTextsIndexParlay = 0;
                normalRotationsParlay = 0;
                runSequenceParlay();
              }, Math.max(0, remaining));
              break;
            case 'normal':
            default:
              applyCenterModeForNormalParlay(true);
              hideAllIconsParlay();
              const displayedIndex = savedParlay?.displayedIndex ?? normalTextsIndexParlay;
              rotatingTextParlayEl.innerHTML = normalTextsPar[displayedIndex % normalTextsPar.length];
              normalTextsIndexParlay = (displayedIndex + 1) % normalTextsPar.length;

              if (remaining > 0) {
                saveParlay(nowMs() + remaining, displayedIndex);
                setTimeout(runSequenceParlay, remaining);
              } else {
                runSequenceParlay();
              }
              break;
          }
        }

        function nextPhaseParlay() {
          lastPhaseParlay = currentPhaseParlay;
          currentPhaseParlay = getNextRandomPhase(currentPhaseParlay, lastPhaseParlay);
          runSequenceParlay();
        }
        
        const runSequenceParlay = () => {
          switch(currentPhaseParlay) {
            case 'reflection':
              applyCenterModeForNormalParlay(false);
              hideAllIconsParlay();
              lightIconParlay.style.display = 'block';
              rotatingTextParlayEl.innerHTML = 'En r√©flexion...';
              reflectionDurationParlay = Math.floor(Math.random() * (30000 - 5000 + 1)) + 5000;
              const endAt = nowMs() + reflectionDurationParlay;
              saveParlay(endAt, null);
              setTimeout(() => {
                lastPhaseParlay = currentPhaseParlay;
                currentPhaseParlay = getNextRandomPhase(currentPhaseParlay, lastPhaseParlay);
                runSequenceParlay();
              }, reflectionDurationParlay);
              break;
              
            case 'confirmed':
              applyCenterModeForNormalParlay(false);
              hideAllIconsParlay();
              lightIconParlay.style.display = 'block';
              const secondsPar = Math.round((reflectionDurationParlay || 0) / 1000);
              rotatingTextParlayEl.innerHTML = `R√©fl√©chie pendant ${secondsPar} secondes`;
              const duration = 5000;
              saveParlay(nowMs() + duration, null);
              setTimeout(() => {
                lastPhaseParlay = currentPhaseParlay;
                currentPhaseParlay = getNextRandomPhase(currentPhaseParlay, lastPhaseParlay);
                runSequenceParlay();
              }, duration);
              break;
              
            case 'modifying':
              applyCenterModeForNormalParlay(false);
              hideAllIconsParlay();
              editIconParlay.style.display = 'block';
              rotatingTextParlayEl.innerHTML = 'Modification des donn√©es ...';
              const modifyingDurationPar = Math.floor(Math.random() * (30000 - 12000 + 1)) + 12000;
              saveParlay(nowMs() + modifyingDurationPar, null);
              setTimeout(() => {
                lastPhaseParlay = currentPhaseParlay;
                currentPhaseParlay = getNextRandomPhase(currentPhaseParlay, lastPhaseParlay);
                runSequenceParlay();
              }, modifyingDurationPar);
              break;
              
            case 'modified':
              applyCenterModeForNormalParlay(false);
              hideAllIconsParlay();
              editIconParlay.style.display = 'block';
              rotatingTextParlayEl.innerHTML = 'Modification des donn√©es effectu√©es';
              const durationMod = 5000;
              saveParlay(nowMs() + durationMod, null);
              setTimeout(() => {
                lastPhaseParlay = currentPhaseParlay;
                currentPhaseParlay = getNextRandomPhase(currentPhaseParlay, lastPhaseParlay);
                normalTextsIndexParlay = 0;
                normalRotationsParlay = 0;
                runSequenceParlay();
              }, durationMod);
              break;
              
            case 'normal':
              applyCenterModeForNormalParlay(true);
              hideAllIconsParlay();
              const displayedIndex = normalTextsIndexParlay;
              rotatingTextParlayEl.innerHTML = normalTextsPar[displayedIndex];

              normalTextsIndexParlay = (normalTextsIndexParlay + 1) % normalTextsPar.length;
              if (normalTextsIndexParlay === 0) normalRotationsParlay++;

              const maxRotationsPar = Math.floor(Math.random() * (6 - 3 + 1)) + 3;
              const delay = Math.floor(Math.random() * (15000 - 2000 + 1)) + 2000;
              const endAtNormal = nowMs() + delay;
              saveParlay(endAtNormal, displayedIndex);

              setTimeout(() => {
                if (normalRotationsParlay >= maxRotationsPar) {
                  lastPhaseParlay = currentPhaseParlay;
                  currentPhaseParlay = getNextRandomPhase(currentPhaseParlay, lastPhaseParlay);
                }
                runSequenceParlay();
              }, delay);
              break;
          }
        };
        
        const remaining = savedParlay?.endAt ? Math.max(0, savedParlay.endAt - nowMs()) : 0;
        if (savedParlay && remaining > 0) {
          renderFromStateAndScheduleParlay(remaining);
        } else {
          if (!savedParlay) {
            normalTextsIndexParlay = Math.floor(Math.random() * normalTextsPar.length);
          }
          currentPhaseParlay = 'normal';
          runSequenceParlay();
        }
      }

      // In Shopify editor, preserve the current page across partial reloads
      document.addEventListener('shopify:section:load', () => {
        try {
          const p = localStorage.getItem('dashboard_current_page');
          if (p && typeof performNavigation === 'function') {
            performNavigation(p);
          }
        } catch {}
      });
      document.addEventListener('shopify:section:select', () => {
        try {
          const p = localStorage.getItem('dashboard_current_page');
          if (p && typeof performNavigation === 'function') {
            performNavigation(p);
          }
        } catch {}
      });
    });

    // Update time display
    function updateTime() {
      const now = new Date();
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const timeString = `${hours}:${minutes}`;
      
      const sidebarTime = document.getElementById('sidebar-time');
      const headerTime = document.getElementById('header-time');
      const desktopTime = document.getElementById('desktop-time');
      
      if (sidebarTime) sidebarTime.textContent = timeString;
      if (headerTime) headerTime.textContent = timeString;
      if (desktopTime) desktopTime.textContent = timeString;
    }

    // Handle browser back/forward
    window.addEventListener('hashchange', () => {
      const hash = window.location.hash.substring(1);
      if (hash) {
        navigateTo(null, hash);
      }
    });

    // Au chargement de la page, v√©rifier le hash pour les pages publiques
    document.addEventListener('DOMContentLoaded', function() {
      const hash = window.location.hash.replace('#', '');
      const publicPages = ['historique-bet', 'historique-parlay'];
      
      if (hash && publicPages.includes(hash)) {
        // Autoriser l'acc√®s direct via URL aux pages publiques
        navigateTo(null, hash);
      }
    });

    // ===== GESTION DU MODAL DE G√âN√âRATION IA =====
    let currentStepBet = 1;
    let selectedOptionsBet = {
      sport: null,
      type: null,
      analysis: null
    };
    
    // Ouvrir le modal Bet
    function openAIModalBet() {
      document.getElementById('ai-modal-bet').classList.add('active');
      document.body.classList.add('body-no-scroll');
      currentStepBet = 1;
      selectedOptionsBet = { sport: null, type: null, analysis: null };
      updateStepDisplayBet();
    }
    
    // Fermer le modal
    function closeAIModal(type) {
      document.getElementById(`ai-modal-${type}`).classList.remove('active');
      document.body.classList.remove('body-no-scroll');
    }
    
    // √âtape suivante pour Bet
    function nextStepBet() {
      if (currentStepBet < 3) {
        currentStepBet++;
        updateStepDisplayBet();
      } else if (currentStepBet === 3) {
        startLoadingBet();
      }
    }
    
    // √âtape pr√©c√©dente pour Bet
    function prevStepBet() {
      if (currentStepBet > 1) {
        currentStepBet--;
        updateStepDisplayBet();
      }
    }
    
    // Mettre √† jour l'affichage de l'√©tape pour Bet
    function updateStepDisplayBet() {
      const modal = document.getElementById('ai-modal-bet');
      
      // Mettre √† jour les indicateurs d'√©tapes
      modal.querySelectorAll('.ai-step-indicator').forEach((indicator, index) => {
        if (index + 1 === currentStepBet) {
          indicator.classList.add('active');
        } else {
          indicator.classList.remove('active');
        }
      });
      
      // Retirer active de toutes les √©tapes d'abord
      modal.querySelectorAll('.ai-step').forEach(step => {
        step.classList.remove('active');
      });
      
      // Afficher uniquement l'√©tape courante
      const activeStep = modal.querySelector(`.ai-step[data-step="${currentStepBet}"]`);
      if (activeStep) {
        activeStep.classList.add('active');
      }
      
      // G√©rer les boutons
      const prevBtn = document.getElementById('prev-btn-bet');
      const nextBtn = document.getElementById('next-btn-bet');
      
      if (currentStepBet === 1) {
        prevBtn.style.display = 'none';
        nextBtn.textContent = 'Prochain';
        nextBtn.disabled = !selectedOptionsBet.sport;
      } else if (currentStepBet === 2) {
        prevBtn.style.display = 'inline-flex';
        nextBtn.textContent = 'Prochain';
        nextBtn.disabled = !selectedOptionsBet.type;
      } else if (currentStepBet === 3) {
        prevBtn.style.display = 'inline-flex';
        nextBtn.textContent = 'Lanc√© la recherche';
        nextBtn.disabled = !selectedOptionsBet.analysis;
      }
    }
    
    // D√©marrer le chargement pour Bet
    function startLoadingBet() {
      const modal = document.getElementById('ai-modal-bet');
      const content = modal.querySelector('.ai-modal-content');
      const actions = modal.querySelector('.ai-modal-actions');
      const loadingScreen = modal.querySelector('.ai-loading-screen');
      const stepsIndicator = modal.querySelector('.ai-modal-steps');
      
      // FORCER le masquage de TOUTES les √©tapes avec !important via style inline
      content.querySelectorAll('.ai-step').forEach(step => {
        step.style.cssText = 'display: none !important; opacity: 0 !important; visibility: hidden !important;';
      });
      
      // Cacher les boutons d'action
      actions.style.cssText = 'display: none !important; opacity: 0 !important; visibility: hidden !important;';
      
      // Ajouter la classe loading au modal (cache le bouton X)
      modal.classList.add('loading');
      
      // FORCER le masquage des indicateurs d'√©tapes
      if (stepsIndicator) {
        stepsIndicator.style.cssText = 'display: none !important; opacity: 0 !important; visibility: hidden !important;';
      }
      
      // Afficher l'√©cran de chargement
      loadingScreen.classList.add('active');
      loadingScreen.style.display = 'block';
      
      // D√©terminer la dur√©e selon le type d'analyse
      let duration;
      if (selectedOptionsBet.analysis === 'deep') {
        duration = 40000 + Math.random() * 20000; // 40-60s
      } else if (selectedOptionsBet.analysis === 'normal') {
        duration = 30000 + Math.random() * 10000; // 30-40s
      } else {
        duration = 15000 + Math.random() * 15000; // 15-30s
      }
      
      // Animation du pourcentage et du cercle
      const progressCircle = document.getElementById('progress-circle-bet');
      const progressPercentage = document.getElementById('progress-percentage-bet');
      const circumference = 2 * Math.PI * 90; // 2œÄr o√π r=90
      let currentProgress = 0;
      
      const progressInterval = setInterval(() => {
        // Calculer l'incr√©ment bas√© sur la dur√©e totale
        const increment = 100 / (duration / 100); // Mise √† jour chaque 100ms
        currentProgress = Math.min(currentProgress + increment, 100);
        
        // Mettre √† jour le pourcentage affich√©
        progressPercentage.textContent = Math.floor(currentProgress) + '%';
        
        // Mettre √† jour le cercle de progression
        const offset = circumference - (currentProgress / 100) * circumference;
        progressCircle.style.strokeDashoffset = offset;
        
        if (currentProgress >= 100) {
          clearInterval(progressInterval);
        }
      }, 100);
      
      // Textes changeants
      const loadingTexts = [
        'Analyse des statistiques',
        'Calcul des probabilit√©s',
        'Optimisation des paris',
        'V√©rification des donn√©es',
        'Finalisation de l\'analyse'
      ];
      
      let textIndex = 0;
      const textInterval = setInterval(() => {
        textIndex = (textIndex + 1) % loadingTexts.length;
        document.getElementById('loading-subtext-bet').textContent = loadingTexts[textIndex];
      }, 2000);
      
      // Fermer apr√®s la dur√©e
      setTimeout(() => {
        clearInterval(textInterval);
        clearInterval(progressInterval);
        
        // Retirer la classe loading
        modal.classList.remove('loading');
        
        // R√©initialiser les √©tapes
        content.querySelectorAll('.ai-step').forEach(step => {
          step.style.cssText = '';
        });
        
        // R√©initialiser les actions
        actions.style.cssText = '';
        
        // R√©afficher les indicateurs d'√©tapes
        if (stepsIndicator) {
          stepsIndicator.style.cssText = '';
        }
        
        // Cacher l'√©cran de chargement
        loadingScreen.classList.remove('active');
        
        // R√©initialiser le cercle et le pourcentage
        progressCircle.style.strokeDashoffset = circumference;
        progressPercentage.textContent = '0%';
        
        closeAIModal('bet');
        
        currentStepBet = 1;
        selectedOptionsBet = { sport: null, type: null, analysis: null };
        modal.querySelectorAll('.ai-option-card').forEach(card => card.classList.remove('selected'));
        updateStepDisplayBet();
      }, duration);
    }
    
    // Gestion des clics sur les options pour Bet
    document.addEventListener('DOMContentLoaded', () => {
      const modalBet = document.getElementById('ai-modal-bet');
      
      // Ajouter l'event au bouton refresh pour Bet
      document.querySelector('#page-bet .refresh-button').addEventListener('click', openAIModalBet);
      
      // Gestion des s√©lections d'options pour Bet
      modalBet.querySelectorAll('.ai-option-card').forEach(card => {
        card.addEventListener('click', () => {
          const option = card.dataset.option;
          const value = card.dataset.value;
          
          // D√©s√©lectionner les autres options du m√™me type
          modalBet.querySelectorAll(`.ai-option-card[data-option="${option}"]`).forEach(c => {
            c.classList.remove('selected');
          });
          
          // S√©lectionner cette option
          card.classList.add('selected');
          selectedOptionsBet[option] = value;
          
          // Activer le bouton suivant
          updateStepDisplayBet();
        });
      });
    });

    // ===== GESTION DU MODAL DE G√âN√âRATION IA PARLAY =====
    let currentStepParlay = 1;
    let selectedOptionsParlay = {
      sport: null,
      type: null,
      analysis: null
    };
    
    // Ouvrir le modal Parlay
    function openAIModalParlay() {
      document.getElementById('ai-modal-parlay').classList.add('active');
      document.body.classList.add('body-no-scroll');
      currentStepParlay = 1;
      selectedOptionsParlay = { sport: null, type: null, analysis: null };
      updateStepDisplayParlay();
    }
    
    // √âtape suivante pour Parlay
    function nextStepParlay() {
      if (currentStepParlay < 3) {
        currentStepParlay++;
        updateStepDisplayParlay();
      } else if (currentStepParlay === 3) {
        startLoadingParlay();
      }
    }
    
    // √âtape pr√©c√©dente pour Parlay
    function prevStepParlay() {
      if (currentStepParlay > 1) {
        currentStepParlay--;
        updateStepDisplayParlay();
      }
    }
    
    // Mettre √† jour l'affichage de l'√©tape pour Parlay
    function updateStepDisplayParlay() {
      const modal = document.getElementById('ai-modal-parlay');
      
      // Mettre √† jour les indicateurs d'√©tapes
      modal.querySelectorAll('.ai-step-indicator').forEach((indicator, index) => {
        if (index + 1 === currentStepParlay) {
          indicator.classList.add('active');
        } else {
          indicator.classList.remove('active');
        }
      });
      
      // Retirer active de toutes les √©tapes d'abord
      modal.querySelectorAll('.ai-step').forEach(step => {
        step.classList.remove('active');
      });
      
      // Afficher uniquement l'√©tape courante
      const activeStep = modal.querySelector(`.ai-step[data-step="${currentStepParlay}"]`);
      if (activeStep) {
        activeStep.classList.add('active');
      }
      
      // G√©rer les boutons
      const prevBtn = document.getElementById('prev-btn-parlay');
      const nextBtn = document.getElementById('next-btn-parlay');
      
      if (currentStepParlay === 1) {
        prevBtn.style.display = 'none';
        nextBtn.textContent = 'Prochain';
        nextBtn.disabled = !selectedOptionsParlay.sport;
      } else if (currentStepParlay === 2) {
        prevBtn.style.display = 'inline-flex';
        nextBtn.textContent = 'Prochain';
        nextBtn.disabled = !selectedOptionsParlay.type;
      } else if (currentStepParlay === 3) {
        prevBtn.style.display = 'inline-flex';
        nextBtn.textContent = 'Lanc√© la recherche';
        nextBtn.disabled = !selectedOptionsParlay.analysis;
      }
    }
    
    // D√©marrer le chargement pour Parlay
    function startLoadingParlay() {
      const modal = document.getElementById('ai-modal-parlay');
      const content = modal.querySelector('.ai-modal-content');
      const actions = modal.querySelector('.ai-modal-actions');
      const loadingScreen = modal.querySelector('.ai-loading-screen');
      const stepsIndicator = modal.querySelector('.ai-modal-steps');
      
      // FORCER le masquage de TOUTES les √©tapes avec !important via style inline
      content.querySelectorAll('.ai-step').forEach(step => {
        step.style.cssText = 'display: none !important; opacity: 0 !important; visibility: hidden !important;';
      });
      
      // Cacher les boutons d'action
      actions.style.cssText = 'display: none !important; opacity: 0 !important; visibility: hidden !important;';
      
      // Ajouter la classe loading au modal (cache le bouton X)
      modal.classList.add('loading');
      
      // FORCER le masquage des indicateurs d'√©tapes
      if (stepsIndicator) {
        stepsIndicator.style.cssText = 'display: none !important; opacity: 0 !important; visibility: hidden !important;';
      }
      
      // Afficher l'√©cran de chargement
      loadingScreen.classList.add('active');
      loadingScreen.style.display = 'block';
      
      // D√©terminer la dur√©e selon le type d'analyse
      let duration;
      if (selectedOptionsParlay.analysis === 'deep') {
        duration = 40000 + Math.random() * 20000; // 40-60s
      } else if (selectedOptionsParlay.analysis === 'normal') {
        duration = 30000 + Math.random() * 10000; // 30-40s
      } else {
        duration = 15000 + Math.random() * 15000; // 15-30s
      }
      
      // Animation du pourcentage et du cercle
      const progressCircle = document.getElementById('progress-circle-parlay');
      const progressPercentage = document.getElementById('progress-percentage-parlay');
      const circumference = 2 * Math.PI * 90;
      let currentProgress = 0;
      
      const progressInterval = setInterval(() => {
        const increment = 100 / (duration / 100);
        currentProgress = Math.min(currentProgress + increment, 100);
        progressPercentage.textContent = Math.floor(currentProgress) + '%';
        const offset = circumference - (currentProgress / 100) * circumference;
        progressCircle.style.strokeDashoffset = offset;
        
        if (currentProgress >= 100) {
          clearInterval(progressInterval);
        }
      }, 100);
      
      // Textes changeants
      const loadingTexts = [
        'Analyse des statistiques',
        'Calcul des probabilit√©s',
        'Optimisation des paris',
        'V√©rification des donn√©es',
        'Finalisation de l\'analyse'
      ];
      
      let textIndex = 0;
      const textInterval = setInterval(() => {
        textIndex = (textIndex + 1) % loadingTexts.length;
        document.getElementById('loading-subtext-parlay').textContent = loadingTexts[textIndex];
      }, 2000);
      
      // Fermer apr√®s la dur√©e
      setTimeout(() => {
        clearInterval(textInterval);
        clearInterval(progressInterval);
        
        // Retirer la classe loading
        modal.classList.remove('loading');
        
        // R√©initialiser les √©tapes
        content.querySelectorAll('.ai-step').forEach(step => {
          step.style.cssText = '';
        });
        
        // R√©initialiser les actions
        actions.style.cssText = '';
        
        // R√©afficher les indicateurs d'√©tapes
        if (stepsIndicator) {
          stepsIndicator.style.cssText = '';
        }
        
        // Cacher l'√©cran de chargement
        loadingScreen.classList.remove('active');
        
        // R√©initialiser le pourcentage et le cercle
        progressPercentage.textContent = '0%';
        progressCircle.style.strokeDashoffset = circumference;
        
        closeAIModal('parlay');
      }, duration);
    }
    
    // Gestion des clics sur les options pour Parlay
    document.addEventListener('DOMContentLoaded', () => {
      const modalParlay = document.getElementById('ai-modal-parlay');
      if (!modalParlay) return;
      
      // Ajouter l'event au bouton refresh pour Parlay
      const parlayRefreshBtn = document.querySelector('#page-parlay .refresh-button');
      if (parlayRefreshBtn) {
        parlayRefreshBtn.addEventListener('click', openAIModalParlay);
      }
      
      // Gestion des s√©lections d'options pour Parlay
      modalParlay.querySelectorAll('.ai-option-card').forEach(card => {
        card.addEventListener('click', () => {
          const option = card.dataset.option;
          const value = card.dataset.value;
          
          // D√©s√©lectionner les autres options du m√™me type
          modalParlay.querySelectorAll(`.ai-option-card[data-option="${option}"]`).forEach(c => {
            c.classList.remove('selected');
          });
          
          // S√©lectionner cette option
          card.classList.add('selected');
          selectedOptionsParlay[option] = value;
          
          // Activer le bouton suivant
          updateStepDisplayParlay();
        });
      });
    });

    // ===== GESTION DES MEMBRES CONNECT√âS LIVE =====
    const membersConfig = {
      base: {{ section.settings.members_base | default: 50 }},
      minIncrease: {{ section.settings.min_increase_per_change | default: 1 }},
      maxIncrease: {{ section.settings.max_increase_per_change | default: 5 }},
      minDecrease: {{ section.settings.min_decrease_per_change | default: 1 }},
      maxDecrease: {{ section.settings.max_decrease_per_change | default: 5 }},
      minUpdateInterval: {{ section.settings.min_update_interval_sec | default: 30 }},
      maxUpdateInterval: {{ section.settings.max_update_interval_sec | default: 90 }},
      transitionStep: {{ section.settings.transition_step | default: 3 }},
      // Heures de pointe
      peakStartHour: {{ section.settings.peak_start_hour | default: 18 }},
      peakEndHour: {{ section.settings.peak_end_hour | default: 23 }},
      peakTarget: {{ section.settings.peak_target_members | default: 100 }},
      // Heures creuses
      lowStartHour: {{ section.settings.low_start_hour | default: 2 }},
      lowEndHour: {{ section.settings.low_end_hour | default: 8 }},
      lowTarget: {{ section.settings.low_target_members | default: 25 }}
    };

    // R√©cup√©ration des valeurs sauvegard√©es ou initialisation
    let currentMembers = membersConfig.base;
    let currentTarget = membersConfig.base;
    
    try {
      const savedMembers = localStorage.getItem('winabet_current_members');
      const savedTarget = localStorage.getItem('winabet_current_target');
      
      // Restauration ind√©pendante de chaque valeur
      if (savedMembers !== null) {
        currentMembers = parseInt(savedMembers, 10);
        console.log('üîÑ Compteur restaur√©:', currentMembers);
      } else {
        console.log('üéØ Nombre initial:', currentMembers);
      }
      
      if (savedTarget !== null) {
        currentTarget = parseInt(savedTarget, 10);
      } else {
        currentTarget = currentMembers; // Si pas de cible sauvegard√©e, utiliser le compteur actuel
      }
      
      // √âcrire imm√©diatement les deux valeurs pour garantir leur pr√©sence
      localStorage.setItem('winabet_current_members', currentMembers.toString());
      localStorage.setItem('winabet_current_target', currentTarget.toString());
      
      // Mise √† jour imm√©diate de l'affichage pour √©viter le flash √† 50
      const sidebarCount = document.getElementById('sidebar-member-count');
      const headerCount = document.getElementById('header-member-count');
      if (sidebarCount) sidebarCount.textContent = currentMembers;
      if (headerCount) headerCount.textContent = currentMembers;
      
    } catch (e) {
      console.log('‚ö†Ô∏è Impossible de restaurer le compteur:', e);
    }
    
    console.log('üéØ Membres Connect√©s Config:', membersConfig);

    function isInTimeRange(startHour, endHour) {
      const now = new Date();
      const currentHour = now.getHours();
      
      if (startHour <= endHour) {
        return currentHour >= startHour && currentHour <= endHour;
      } else {
        // Cas o√π la p√©riode traverse minuit (ex: 22h √† 2h)
        return currentHour >= startHour || currentHour <= endHour;
      }
    }

    function isPeakHours() {
      return isInTimeRange(membersConfig.peakStartHour, membersConfig.peakEndHour);
    }

    function isLowHours() {
      return isInTimeRange(membersConfig.lowStartHour, membersConfig.lowEndHour);
    }

    function updateMemberCount(newCount) {
      const sidebarCount = document.getElementById('sidebar-member-count');
      const headerCount = document.getElementById('header-member-count');
      
      console.log('üìä Mise √† jour membres:', currentMembers, '‚Üí', newCount);
      
      // Sauvegarder dans localStorage
      try {
        localStorage.setItem('winabet_current_members', newCount.toString());
      } catch (e) {
        console.log('‚ö†Ô∏è Impossible de sauvegarder le compteur:', e);
      }
      
      // Animation flip
      [sidebarCount, headerCount].forEach(element => {
        if (element) {
          element.style.animation = 'flip 0.6s ease-in-out';
          
          setTimeout(() => {
            element.textContent = newCount;
            element.style.animation = '';
            console.log('‚úÖ Animation termin√©e pour:', element.id);
          }, 300);
        }
      });
    }

    function calculateNewMemberCount() {
      // D√©termine la base cible selon l'heure
      let targetBase = membersConfig.base;
      let periodName = 'Normal';
      
      if (isPeakHours()) {
        targetBase = membersConfig.peakTarget;
        periodName = `Pointe (${targetBase} membres)`;
      } else if (isLowHours()) {
        targetBase = membersConfig.lowTarget;
        periodName = `Creuse (${targetBase} membres)`;
      }
      
      console.log(`üéØ P√©riode ${periodName} | Target base: ${targetBase}`);
      
      // Fait √©voluer graduellement currentTarget vers targetBase
      const targetDiff = targetBase - currentTarget;
      if (Math.abs(targetDiff) > 0) {
        const step = Math.min(membersConfig.transitionStep, Math.abs(targetDiff));
        currentTarget += targetDiff > 0 ? step : -step;
        console.log(`üéØ Transition: ${currentTarget} ‚Üí ${targetBase} (step: ${step})`);
        
        // Sauvegarder la nouvelle cible
        try {
          localStorage.setItem('winabet_current_target', currentTarget.toString());
        } catch (e) {
          console.log('‚ö†Ô∏è Impossible de sauvegarder la cible:', e);
        }
      }
      
      // D√©cide al√©atoirement si √ßa monte ou descend (50/50)
      const goingUp = Math.random() > 0.5;
      
      let variation;
      if (goingUp) {
        // Monte entre minIncrease et maxIncrease
        const range = membersConfig.maxIncrease - membersConfig.minIncrease;
        variation = membersConfig.minIncrease + Math.floor(Math.random() * (range + 1));
        console.log('‚¨ÜÔ∏è Mont√©e de:', variation, `(entre ${membersConfig.minIncrease} et ${membersConfig.maxIncrease})`);
      } else {
        // Descend entre minDecrease et maxDecrease
        const range = membersConfig.maxDecrease - membersConfig.minDecrease;
        variation = -(membersConfig.minDecrease + Math.floor(Math.random() * (range + 1)));
        console.log('‚¨áÔ∏è Descente de:', Math.abs(variation), `(entre ${membersConfig.minDecrease} et ${membersConfig.maxDecrease})`);
      }
      
      let newCount = currentMembers + variation;
      
      // Garde le nombre proche de la cible actuelle avec une marge
      const minCount = Math.max(10, currentTarget - membersConfig.maxDecrease * 10);
      const maxCount = currentTarget + membersConfig.maxIncrease * 10;
      
      newCount = Math.max(minCount, Math.min(maxCount, newCount));
      
      return Math.floor(newCount);
    }

    // Fonction pour obtenir un intervalle al√©atoire
    function getRandomInterval() {
      const min = membersConfig.minUpdateInterval;
      const max = membersConfig.maxUpdateInterval;
      const interval = Math.floor(Math.random() * (max - min + 1) + min) * 1000;
      console.log(`‚è±Ô∏è Prochain changement dans ${interval / 1000} secondes`);
      return interval;
    }

    let updateTimer;
    
    // Fonction pour d√©marrer le prochain update
    function scheduleNextUpdate() {
      const newCount = calculateNewMemberCount();
      currentMembers = newCount;
      updateMemberCount(newCount);
      
      // Programme le prochain update avec un intervalle al√©atoire
      const nextInterval = getRandomInterval();
      updateTimer = setTimeout(scheduleNextUpdate, nextInterval);
    }
    
    // Initial display
    updateMemberCount(currentMembers);
    
    // D√©marrer le premier update apr√®s un intervalle al√©atoire
    updateTimer = setTimeout(scheduleNextUpdate, getRandomInterval());

    // Syst√®me de scroll pour le header
    let lastScrollTop = 0;
    const header = document.querySelector('.header');
    
    window.addEventListener('scroll', function() {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      
      // Ajoute la classe 'scrolled' quand on scroll vers le bas (plus de 50px)
      if (scrollTop > 50) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
      
      lastScrollTop = scrollTop;
    });
  </script>

  <!-- CSS pour l'animation flip -->
  <style>
    @keyframes flip {
      0% {
        transform: rotateX(0deg);
        opacity: 1;
      }
      50% {
        transform: rotateX(90deg);
        opacity: 0;
      }
      100% {
        transform: rotateX(0deg);
        opacity: 1;
      }
    }

    .member-count {
      display: inline-block;
      min-width: 2ch;
      text-align: center;
    }
  </style>

  <!-- Configuration Supabase -->
  <script>
    window.SUPABASE_CONFIG = {
      url: 'https://ycvfyorgkhuxcosfrsxs.functions.supabase.co',
      shopDomain: '{{ shop.permanent_domain }}'
    };
  </script>

  <!-- Inclure le fichier JS d'historique Supabase -->
  <script src="{{ 'historique-supabase.js' | asset_url | append: '?v=' | append: 'now' | date: '%s' }}" defer></script>

</body>
</html>

{% schema %}
{
  "name": "Dashboard WINABET.AI",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Titre du Dashboard",
      "default": "WINABET.AI"
    },
    {
      "type": "header",
      "content": "üë• Membres Connect√©s Live"
    },
    {
      "type": "number",
      "id": "members_base",
      "label": "Nombre de base de membres",
      "default": 50,
      "info": "Nombre initial de membres connect√©s"
    },
    {
      "type": "number",
      "id": "min_increase_per_change",
      "label": "‚¨ÜÔ∏è Mont√©e minimum par changement",
      "default": 1,
      "info": "Minimum que le nombre peut monter √† chaque fois"
    },
    {
      "type": "number",
      "id": "max_increase_per_change",
      "label": "‚¨ÜÔ∏è Mont√©e maximum par changement",
      "default": 5,
      "info": "Maximum que le nombre peut monter √† chaque fois (al√©atoire entre min et max)"
    },
    {
      "type": "number",
      "id": "min_decrease_per_change",
      "label": "‚¨áÔ∏è Descente minimum par changement",
      "default": 1,
      "info": "Minimum que le nombre peut descendre √† chaque fois"
    },
    {
      "type": "number",
      "id": "max_decrease_per_change",
      "label": "‚¨áÔ∏è Descente maximum par changement",
      "default": 5,
      "info": "Maximum que le nombre peut descendre √† chaque fois (al√©atoire entre min et max)"
    },
    {
      "type": "number",
      "id": "min_update_interval_sec",
      "label": "‚è±Ô∏è Intervalle minimum entre changements (sec)",
      "default": 30,
      "info": "Temps minimum en secondes entre chaque changement de nombre"
    },
    {
      "type": "number",
      "id": "max_update_interval_sec",
      "label": "‚è±Ô∏è Intervalle maximum entre changements (sec)",
      "default": 90,
      "info": "Temps maximum en secondes entre chaque changement de nombre (l'intervalle sera al√©atoire entre min et max)"
    },
    {
      "type": "number",
      "id": "transition_step",
      "label": "üìä Taille des tranches de transition",
      "default": 3,
      "info": "Nombre d'utilisateurs ajout√©s/retir√©s par √©tape lors du passage d'une p√©riode √† une autre (ex: 3 = transition graduelle par tranches de 3)"
    },
    {
      "type": "header",
      "content": "üî• Heures de Pointe (Nombre √âlev√©)"
    },
    {
      "type": "number",
      "id": "peak_start_hour",
      "label": "Heure de d√©but",
      "default": 18,
      "info": "D√©but des heures de pointe (format 24h, entre 0 et 23)"
    },
    {
      "type": "number",
      "id": "peak_end_hour",
      "label": "Heure de fin",
      "default": 23,
      "info": "Fin des heures de pointe (format 24h, entre 0 et 23)"
    },
    {
      "type": "number",
      "id": "peak_target_members",
      "label": "Nombre cible de membres",
      "default": 100,
      "info": "Nombre de membres connect√©s cible pendant les heures de pointe"
    },
    {
      "type": "header",
      "content": "üí§ Heures Creuses (Nombre Bas)"
    },
    {
      "type": "number",
      "id": "low_start_hour",
      "label": "Heure de d√©but",
      "default": 2,
      "info": "D√©but des heures creuses (format 24h, entre 0 et 23)"
    },
    {
      "type": "number",
      "id": "low_end_hour",
      "label": "Heure de fin",
      "default": 8,
      "info": "Fin des heures creuses (format 24h, entre 0 et 23)"
    },
    {
      "type": "number",
      "id": "low_target_members",
      "label": "Nombre cible de membres",
      "default": 25,
      "info": "Nombre de membres connect√©s cible pendant les heures creuses"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Sous-titre",
      "default": "Paris Sportifs Professionnels"
    },
    {
      "type": "header",
      "content": "üé• Page Skip Trial"
    },
    {
      "type": "url",
      "id": "video_url",
      "label": "URL de la vid√©o (lien Shopify)",
      "info": "Entrez l'URL compl√®te de la vid√©o h√©berg√©e sur Shopify"
    }
  ],
  "blocks": [
    {
      "type": "bet_card",
      "name": "Carte de Pari",
      "settings": [
            {
              "type": "select",
              "id": "sport_type",
              "label": "üèíüèà Type de sport pour l'analyse IA",
              "options": [
                {
                  "value": "nhl",
                  "label": "üèí NHL (Hockey)"
                },
                {
                  "value": "nfl",
                  "label": "üèà NFL (Football am√©ricain)"
                }
              ],
              "default": "nhl",
              "info": "S√©lectionnez le template d'analyse √† afficher"
            },
            {
              "type": "checkbox",
              "id": "auto_increment_enabled",
              "label": "üîÑ Activer l'auto-incr√©mentation des donn√©es IA",
              "default": false,
              "info": "Les donn√©es IA analys√©es augmenteront automatiquement"
            },
            {
              "type": "select",
              "id": "auto_increment_interval",
              "label": "‚è±Ô∏è Intervalle d'incr√©mentation",
              "options": [
                {
                  "value": "0.1",
                  "label": "‚ö° Test: Toutes les 6 secondes"
                },
                {
                  "value": "0.5",
                  "label": "‚ö° Test: Toutes les 30 secondes"
                },
                {
                  "value": "1",
                  "label": "Toutes les 1 minute"
                },
                {
                  "value": "2",
                  "label": "Toutes les 2 minutes"
                },
                {
                  "value": "5",
                  "label": "Toutes les 5 minutes"
                },
                {
                  "value": "10",
                  "label": "Toutes les 10 minutes"
                }
              ],
              "default": "5",
              "info": "Fr√©quence d'ajout automatique de donn√©es"
            },
            {
              "type": "select",
              "id": "auto_increment_amount",
              "label": "üìä Quantit√© √† ajouter",
              "options": [
                {
                  "value": "1",
                  "label": "1 donn√©e"
                },
                {
                  "value": "5",
                  "label": "5 donn√©es"
                },
                {
                  "value": "10",
                  "label": "10 donn√©es"
                },
                {
                  "value": "25",
                  "label": "25 donn√©es"
                },
                {
                  "value": "50",
                  "label": "50 donn√©es"
                }
              ],
              "default": "5",
              "info": "Combien de donn√©es ajouter √† chaque intervalle"
            },
        {
          "type": "number",
          "id": "ai_data_count",
          "label": "Nombre de donn√©es IA analys√©es",
          "default": 2857
        },
        {
          "type": "select",
          "id": "bet_type",
          "label": "üìä Type de pari",
          "options": [
            {
              "value": "moneyline",
              "label": "üí∞ Moneyline"
            },
            {
              "value": "spread",
              "label": "üìè Spread"
            },
            {
              "value": "over_under",
              "label": "üî¢ Over/Under"
            }
          ],
          "default": "moneyline",
          "info": "S√©lectionnez le type de pari √† afficher"
        },
        {
          "type": "text",
          "id": "spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5",
          "info": "Ex: -3.5, +7.5, -10.5 (utilis√© uniquement pour le type Spread)"
        },
        {
          "type": "select",
          "id": "spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {
              "value": "team1",
              "label": "√âquipe 1"
            },
            {
              "value": "team2",
              "label": "√âquipe 2"
            }
          ],
          "default": "team2",
          "info": "Quelle √©quipe a le spread (utilis√© uniquement pour le type Spread)"
        },
        {
          "type": "select",
          "id": "over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {
              "value": "over",
              "label": "OVER"
            },
            {
              "value": "under",
              "label": "UNDER"
            }
          ],
          "default": "over",
          "info": "S√©lectionnez OVER ou UNDER (utilis√© uniquement pour le type Over/Under)"
        },
        {
          "type": "text",
          "id": "over_under_text_custom",
          "label": "‚úèÔ∏è Texte personnalis√© Over/Under",
          "info": "Personnalisez le texte affich√© (laissez vide pour utiliser OVER/UNDER par d√©faut)"
        },
        {
          "type": "text",
          "id": "over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5",
          "info": "Ex: 225.5, 45.5, 310.5 (utilis√© uniquement pour le type Over/Under)"
        },
        {
          "type": "text",
          "id": "over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux",
          "info": "Ex: 'points totaux', 'yards de Patrick Mahomes' (utilis√© uniquement pour le type Over/Under)"
        },
        {
          "type": "range",
          "id": "win_percentage",
          "label": "Pourcentage de chance de gagner (%)",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 92
        },
        {
          "type": "text",
          "id": "team1_name",
          "label": "√âquipe 1 (√† domicile)",
          "default": "VEGAS"
        },
        {
          "type": "image_picker",
          "id": "team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "team1_bet_type",
          "label": "Type de pari √âquipe 1",
          "default": "MONEYLINE",
          "info": "Ex: MONEYLINE, SPREAD, TOTAL"
        },
        {
          "type": "text",
          "id": "team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)",
          "default": "TAMPA BAY"
        },
        {
          "type": "image_picker",
          "id": "team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "team2_bet_type",
          "label": "Type de pari √âquipe 2",
          "default": "VICTOIRE",
          "info": "Ex: VICTOIRE, SPREAD, TOTAL"
        },
        {
          "type": "text",
          "id": "bet_units",
          "label": "Nombre d'unit√©s",
          "default": "1",
          "info": "Nombre d'unit√©s √† parier"
        },
        {
          "type": "text",
          "id": "match_time",
          "label": "Heure du match",
          "default": "5:00 PM"
        },
        {
          "type": "text",
          "id": "match_date",
          "label": "Date du match",
          "default": "Aujourd'hui",
          "info": "Ex: Aujourd'hui, Demain, 28 Octobre"
        },
        {
          "type": "text",
          "id": "multiplier",
          "label": "Multiplicateur (cote)",
          "default": "1.74",
          "info": "Ex: 1.74, 2.50, 3.25"
        },
        {
          "type": "number",
          "id": "odds",
          "label": "Cote principale",
          "default": -136,
          "info": "Format am√©ricain (ex: -136, +150)"
        },
        {
          "type": "text",
          "id": "best_bookmaker",
          "label": "Meilleur bookmaker",
          "default": "DRAFTKINGS"
        },
        {
          "type": "number",
          "id": "best_odds",
          "label": "Meilleures cotes",
          "default": -135,
          "info": "Format am√©ricain"
        },
        {
          "type": "textarea",
          "id": "ai_explanation",
          "label": "Explication de l'IA",
          "default": "Notre IA a analys√© plus de 2857 variables incluant les performances r√©centes, les statistiques head-to-head, les conditions de jeu, et les tendances du march√© pour vous proposer ce pari avec une confiance √©lev√©e."
        },
        {
          "type": "checkbox",
          "id": "send_to_history",
          "label": "üìã Envoyer √† l'historique",
          "default": false,
          "info": "Cochez pour d√©placer cette carte vers l'historique"
        },
        {
          "type": "select",
          "id": "result",
          "label": "üéØ R√©sultat du pari",
          "options": [
            {
              "value": "pending",
              "label": "En attente"
            },
            {
              "value": "win",
              "label": "‚úÖ Gagn√© (Win)"
            },
            {
              "value": "loose",
              "label": "‚ùå Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "S√©lectionnez le r√©sultat du pari"
        },
        {
          "type": "checkbox",
          "id": "show_card",
          "label": "Afficher cette carte",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "available_for_free_trial",
          "label": "üÜì Disponible pour Free Trial",
          "default": false,
          "info": "Cochez pour rendre ce bet visible aux utilisateurs en essai gratuit"
        }
      ]
    },
    {
      "type": "parlay_card",
      "name": "üé≤ Carte Parlay Avanc√©e",
      "settings": [
            {
              "type": "select",
              "id": "sport_type",
              "label": "üèíüèà Type de sport pour l'analyse IA",
              "options": [
                {
                  "value": "nhl",
                  "label": "üèí NHL (Hockey)"
                },
                {
                  "value": "nfl",
                  "label": "üèà NFL (Football am√©ricain)"
                }
              ],
              "default": "nhl",
              "info": "S√©lectionnez le template d'analyse √† afficher"
            },
            {
              "type": "checkbox",
              "id": "auto_increment_enabled",
              "label": "üîÑ Activer l'auto-incr√©mentation des donn√©es IA",
              "default": false,
              "info": "Les donn√©es IA analys√©es augmenteront automatiquement"
            },
            {
              "type": "select",
              "id": "auto_increment_interval",
              "label": "‚è±Ô∏è Intervalle d'incr√©mentation",
              "options": [
                {
                  "value": "0.1",
                  "label": "‚ö° Test: Toutes les 6 secondes"
                },
                {
                  "value": "0.5",
                  "label": "‚ö° Test: Toutes les 30 secondes"
                },
                {
                  "value": "1",
                  "label": "Toutes les 1 minute"
                },
                {
                  "value": "2",
                  "label": "Toutes les 2 minutes"
                },
                {
                  "value": "5",
                  "label": "Toutes les 5 minutes"
                },
                {
                  "value": "10",
                  "label": "Toutes les 10 minutes"
                }
              ],
              "default": "5",
              "info": "Fr√©quence d'ajout automatique de donn√©es"
            },
            {
              "type": "select",
              "id": "auto_increment_amount",
              "label": "üìä Quantit√© √† ajouter",
              "options": [
                {
                  "value": "1",
                  "label": "1 donn√©e"
                },
                {
                  "value": "5",
                  "label": "5 donn√©es"
                },
                {
                  "value": "10",
                  "label": "10 donn√©es"
                },
                {
                  "value": "25",
                  "label": "25 donn√©es"
                },
                {
                  "value": "50",
                  "label": "50 donn√©es"
                }
              ],
              "default": "5",
              "info": "Combien de donn√©es ajouter √† chaque intervalle"
            },
        {
          "type": "number",
          "id": "ai_data_count",
          "label": "Nombre de donn√©es IA analys√©es",
          "default": 2857
        },
        {
          "type": "select",
          "id": "bet_type",
          "label": "üìä Type de pari",
          "options": [
            {
              "value": "moneyline",
              "label": "üí∞ Moneyline"
            },
            {
              "value": "spread",
              "label": "üìè Spread"
            },
            {
              "value": "over_under",
              "label": "üî¢ Over/Under"
            }
          ],
          "default": "moneyline",
          "info": "S√©lectionnez le type de pari √† afficher"
        },
        {
          "type": "text",
          "id": "spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5",
          "info": "Ex: -3.5, +7.5, -10.5 (utilis√© uniquement pour le type Spread)"
        },
        {
          "type": "select",
          "id": "spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {
              "value": "team1",
              "label": "√âquipe 1"
            },
            {
              "value": "team2",
              "label": "√âquipe 2"
            }
          ],
          "default": "team2",
          "info": "Quelle √©quipe a le spread (utilis√© uniquement pour le type Spread)"
        },
        {
          "type": "select",
          "id": "over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {
              "value": "over",
              "label": "OVER"
            },
            {
              "value": "under",
              "label": "UNDER"
            }
          ],
          "default": "over",
          "info": "S√©lectionnez OVER ou UNDER (utilis√© uniquement pour le type Over/Under)"
        },
        {
          "type": "text",
          "id": "over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5",
          "info": "Ex: 225.5, 45.5, 310.5 (utilis√© uniquement pour le type Over/Under)"
        },
        {
          "type": "text",
          "id": "over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux",
          "info": "Ex: 'points totaux', 'yards de Patrick Mahomes' (utilis√© uniquement pour le type Over/Under)"
        },
        {
          "type": "range",
          "id": "win_percentage",
          "label": "Pourcentage de chance de gagner (%)",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 92
        },
        {
          "type": "header",
          "content": "üéØ LEG 1"
        },
        {
          "type": "text",
          "id": "leg1_team1_name",
          "label": "√âquipe 1 (√† domicile)",
          "default": "VEGAS"
        },
        {
          "type": "image_picker",
          "id": "leg1_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg1_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)",
          "default": "TAMPA BAY"
        },
        {
          "type": "image_picker",
          "id": "leg1_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg1_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg1_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg1_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg1_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg1_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg1_over_under_text_custom",
          "label": "‚úèÔ∏è Texte personnalis√© Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par d√©faut)"
        },
        {
          "type": "text",
          "id": "leg1_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg1_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg1_result",
          "label": "‚úÖ‚ùå R√©sultat de la Leg 1",
          "options": [
            {
              "value": "pending",
              "label": "‚è≥ En attente"
            },
            {
              "value": "win",
              "label": "‚úÖ Gagn√© (Win)"
            },
            {
              "value": "loose",
              "label": "‚ùå Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "S√©lectionnez le r√©sultat de cette leg"
        },
        {
          "type": "header",
          "content": "üéØ LEG 2"
        },
        {
          "type": "text",
          "id": "leg2_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg2_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg2_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg2_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg2_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg2_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg2_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg2_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg2_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg2_over_under_text_custom",
          "label": "‚úèÔ∏è Texte personnalis√© Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par d√©faut)"
        },
        {
          "type": "text",
          "id": "leg2_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg2_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg2_result",
          "label": "‚úÖ‚ùå R√©sultat de la Leg 2",
          "options": [
            {
              "value": "pending",
              "label": "‚è≥ En attente"
            },
            {
              "value": "win",
              "label": "‚úÖ Gagn√© (Win)"
            },
            {
              "value": "loose",
              "label": "‚ùå Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "S√©lectionnez le r√©sultat de cette leg"
        },
        {
          "type": "header",
          "content": "üéØ LEG 3"
        },
        {
          "type": "text",
          "id": "leg3_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg3_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg3_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg3_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg3_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg3_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg3_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg3_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg3_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg3_over_under_text_custom",
          "label": "‚úèÔ∏è Texte personnalis√© Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par d√©faut)"
        },
        {
          "type": "text",
          "id": "leg3_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg3_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg3_result",
          "label": "‚úÖ‚ùå R√©sultat de la Leg 3",
          "options": [
            {
              "value": "pending",
              "label": "‚è≥ En attente"
            },
            {
              "value": "win",
              "label": "‚úÖ Gagn√© (Win)"
            },
            {
              "value": "loose",
              "label": "‚ùå Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "S√©lectionnez le r√©sultat de cette leg"
        },
        {
          "type": "header",
          "content": "üéØ LEG 4"
        },
        {
          "type": "text",
          "id": "leg4_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg4_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg4_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg4_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg4_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg4_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg4_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg4_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg4_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg4_over_under_text_custom",
          "label": "‚úèÔ∏è Texte personnalis√© Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par d√©faut)"
        },
        {
          "type": "text",
          "id": "leg4_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg4_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg4_result",
          "label": "‚úÖ‚ùå R√©sultat de la Leg 4",
          "options": [
            {
              "value": "pending",
              "label": "‚è≥ En attente"
            },
            {
              "value": "win",
              "label": "‚úÖ Gagn√© (Win)"
            },
            {
              "value": "loose",
              "label": "‚ùå Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "S√©lectionnez le r√©sultat de cette leg"
        },
        {
          "type": "header",
          "content": "üéØ LEG 5"
        },
        {
          "type": "text",
          "id": "leg5_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg5_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg5_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg5_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg5_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg5_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg5_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg5_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg5_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg5_over_under_text_custom",
          "label": "‚úèÔ∏è Texte personnalis√© Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par d√©faut)"
        },
        {
          "type": "text",
          "id": "leg5_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg5_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg5_result",
          "label": "‚úÖ‚ùå R√©sultat de la Leg 5",
          "options": [
            {
              "value": "pending",
              "label": "‚è≥ En attente"
            },
            {
              "value": "win",
              "label": "‚úÖ Gagn√© (Win)"
            },
            {
              "value": "loose",
              "label": "‚ùå Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "S√©lectionnez le r√©sultat de cette leg"
        },
        {
          "type": "header",
          "content": "üéØ LEG 6"
        },
        {
          "type": "text",
          "id": "leg6_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg6_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg6_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg6_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg6_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg6_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg6_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg6_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg6_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg6_over_under_text_custom",
          "label": "‚úèÔ∏è Texte personnalis√© Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par d√©faut)"
        },
        {
          "type": "text",
          "id": "leg6_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg6_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg6_result",
          "label": "‚úÖ‚ùå R√©sultat de la Leg 6",
          "options": [
            {
              "value": "pending",
              "label": "‚è≥ En attente"
            },
            {
              "value": "win",
              "label": "‚úÖ Gagn√© (Win)"
            },
            {
              "value": "loose",
              "label": "‚ùå Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "S√©lectionnez le r√©sultat de cette leg"
        },
        {
          "type": "header",
          "content": "üéØ LEG 7"
        },
        {
          "type": "text",
          "id": "leg7_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg7_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg7_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg7_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg7_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg7_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg7_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg7_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg7_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg7_over_under_text_custom",
          "label": "‚úèÔ∏è Texte personnalis√© Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par d√©faut)"
        },
        {
          "type": "text",
          "id": "leg7_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg7_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg7_result",
          "label": "‚úÖ‚ùå R√©sultat de la Leg 7",
          "options": [
            {
              "value": "pending",
              "label": "‚è≥ En attente"
            },
            {
              "value": "win",
              "label": "‚úÖ Gagn√© (Win)"
            },
            {
              "value": "loose",
              "label": "‚ùå Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "S√©lectionnez le r√©sultat de cette leg"
        },
        {
          "type": "header",
          "content": "üéØ LEG 8"
        },
        {
          "type": "text",
          "id": "leg8_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg8_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg8_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg8_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg8_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg8_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg8_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg8_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg8_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg8_over_under_text_custom",
          "label": "‚úèÔ∏è Texte personnalis√© Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par d√©faut)"
        },
        {
          "type": "text",
          "id": "leg8_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg8_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg8_result",
          "label": "‚úÖ‚ùå R√©sultat de la Leg 8",
          "options": [
            {
              "value": "pending",
              "label": "‚è≥ En attente"
            },
            {
              "value": "win",
              "label": "‚úÖ Gagn√© (Win)"
            },
            {
              "value": "loose",
              "label": "‚ùå Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "S√©lectionnez le r√©sultat de cette leg"
        },
        {
          "type": "header",
          "content": "üéØ LEG 9"
        },
        {
          "type": "text",
          "id": "leg9_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg9_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg9_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg9_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg9_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg9_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg9_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg9_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg9_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg9_over_under_text_custom",
          "label": "‚úèÔ∏è Texte personnalis√© Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par d√©faut)"
        },
        {
          "type": "text",
          "id": "leg9_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg9_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg9_result",
          "label": "‚úÖ‚ùå R√©sultat de la Leg 9",
          "options": [
            {
              "value": "pending",
              "label": "‚è≥ En attente"
            },
            {
              "value": "win",
              "label": "‚úÖ Gagn√© (Win)"
            },
            {
              "value": "loose",
              "label": "‚ùå Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "S√©lectionnez le r√©sultat de cette leg"
        },
        {
          "type": "header",
          "content": "üéØ LEG 10"
        },
        {
          "type": "text",
          "id": "leg10_team1_name",
          "label": "√âquipe 1 (√† domicile) - Laisser vide pour ne pas afficher ce leg"
        },
        {
          "type": "image_picker",
          "id": "leg10_team1_logo",
          "label": "Logo √âquipe 1"
        },
        {
          "type": "text",
          "id": "leg10_team2_name",
          "label": "√âquipe 2 (√† l'ext√©rieur)"
        },
        {
          "type": "image_picker",
          "id": "leg10_team2_logo",
          "label": "Logo √âquipe 2"
        },
        {
          "type": "text",
          "id": "leg10_match_time",
          "label": "Heure du match",
          "default": "7:00 PM"
        },
        {
          "type": "select",
          "id": "leg10_bet_type",
          "label": "üìä Type de pari",
          "options": [
            {"value": "moneyline", "label": "üí∞ Moneyline"},
            {"value": "spread", "label": "üìè Spread"},
            {"value": "over_under", "label": "üî¢ Over/Under"}
          ],
          "default": "moneyline"
        },
        {
          "type": "text",
          "id": "leg10_spread_value",
          "label": "üìè Valeur du Spread",
          "default": "-3.5"
        },
        {
          "type": "select",
          "id": "leg10_spread_team",
          "label": "üéØ √âquipe avec le Spread",
          "options": [
            {"value": "team1", "label": "√âquipe 1"},
            {"value": "team2", "label": "√âquipe 2"}
          ],
          "default": "team1"
        },
        {
          "type": "select",
          "id": "leg10_over_under_type",
          "label": "üîºüîΩ Over ou Under",
          "options": [
            {"value": "over", "label": "OVER"},
            {"value": "under", "label": "UNDER"}
          ],
          "default": "over"
        },
        {
          "type": "text",
          "id": "leg10_over_under_text_custom",
          "label": "‚úèÔ∏è Texte personnalis√© Over/Under",
          "info": "Personnalisez le texte (laissez vide pour OVER/UNDER par d√©faut)"
        },
        {
          "type": "text",
          "id": "leg10_over_under_value",
          "label": "üî¢ Valeur Over/Under",
          "default": "225.5"
        },
        {
          "type": "text",
          "id": "leg10_over_under_stat_type",
          "label": "üìä Type de statistique (optionnel)",
          "default": "points totaux"
        },
        {
          "type": "select",
          "id": "leg10_result",
          "label": "‚úÖ‚ùå R√©sultat de la Leg 10",
          "options": [
            {
              "value": "pending",
              "label": "‚è≥ En attente"
            },
            {
              "value": "win",
              "label": "‚úÖ Gagn√© (Win)"
            },
            {
              "value": "loose",
              "label": "‚ùå Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "S√©lectionnez le r√©sultat de cette leg"
        },
        {
          "type": "text",
          "id": "bet_units",
          "label": "Nombre d'unit√©s",
          "default": "1",
          "info": "Nombre d'unit√©s √† parier"
        },
        {
          "type": "text",
          "id": "match_time",
          "label": "Heure du match",
          "default": "5:00 PM"
        },
        {
          "type": "text",
          "id": "match_date",
          "label": "Date du match",
          "default": "Aujourd'hui",
          "info": "Ex: Aujourd'hui, Demain, 28 Octobre"
        },
        {
          "type": "text",
          "id": "multiplier",
          "label": "Multiplicateur (cote)",
          "default": "1.74",
          "info": "Ex: 1.74, 2.50, 3.25"
        },
        {
          "type": "number",
          "id": "odds",
          "label": "Cote principale",
          "default": -136,
          "info": "Format am√©ricain (ex: -136, +150)"
        },
        {
          "type": "text",
          "id": "best_bookmaker",
          "label": "Meilleur bookmaker",
          "default": "DRAFTKINGS"
        },
        {
          "type": "number",
          "id": "best_odds",
          "label": "Meilleures cotes",
          "default": -135,
          "info": "Format am√©ricain"
        },
        {
          "type": "textarea",
          "id": "ai_explanation",
          "label": "Explication de l'IA",
          "default": "Notre IA a analys√© plus de 2857 variables incluant les performances r√©centes, les statistiques head-to-head, les conditions de jeu, et les tendances du march√© pour vous proposer ce pari avec une confiance √©lev√©e."
        },
        {
          "type": "checkbox",
          "id": "send_to_history",
          "label": "üìã Envoyer √† l'historique",
          "default": false,
          "info": "Cochez pour d√©placer cette carte vers l'historique"
        },
        {
          "type": "select",
          "id": "result",
          "label": "üéØ R√©sultat du pari",
          "options": [
            {
              "value": "pending",
              "label": "En attente"
            },
            {
              "value": "win",
              "label": "‚úÖ Gagn√© (Win)"
            },
            {
              "value": "loose",
              "label": "‚ùå Perdu (Loose)"
            }
          ],
          "default": "pending",
          "info": "S√©lectionnez le r√©sultat du pari"
        },
        {
          "type": "checkbox",
          "id": "show_card",
          "label": "Afficher cette carte",
          "default": true
        }
      ]
    }
  ],
  "max_blocks": 20,
  "presets": [
    {
      "name": "Dashboard WINABET.AI",
      "blocks": [
        {
          "type": "bet_card",
          "settings": {
            "ai_data_count": 2843,
            "win_percentage": 92,
            "team1_name": "ST. LOUIS",
            "team1_bet_type": "MONEYLINE",
            "team2_name": "PITTSBURGH",
            "team2_bet_type": "VICTOIRE",
            "match_time": "7:00 PM",
            "match_date": "Aujourd'hui",
            "multiplier": "1.95",
            "bet_units": "1",
            "odds": -105,
            "best_bookmaker": "DRAFTKINGS",
            "best_odds": -105,
            "show_card": true
          }
        },
        {
          "type": "parlay_card",
          "settings": {
            "ai_data_count": 5214,
            "win_percentage": 78,
            "leg1_team1_name": "VEGAS",
            "leg1_team2_name": "TAMPA BAY",
            "leg1_bet_type": "moneyline",
            "leg1_match_time": "7:00 PM",
            "multiplier": "5.24",
            "bet_units": "1",
            "odds": 495,
            "best_bookmaker": "DRAFTKINGS",
            "best_odds": 495,
            "show_card": true
          }
        }
      ]
    }
  ]
}
{% endschema %}